<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-building-on-flow/run-and-secure/staking/epoch-scripts-events">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Query Epoch Info with Scripts or Events | Flow Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/next/building-on-flow/run-and-secure/staking/epoch-scripts-events"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Query Epoch Info with Scripts or Events | Flow Developer Portal"><meta data-rh="true" name="description" content="The epoch contract stores a lot of different state, and the state is constantly changing."><meta data-rh="true" property="og:description" content="The epoch contract stores a lot of different state, and the state is constantly changing."><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/next/building-on-flow/run-and-secure/staking/epoch-scripts-events"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/next/building-on-flow/run-and-secure/staking/epoch-scripts-events" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/next/building-on-flow/run-and-secure/staking/epoch-scripts-events" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Flow Developer Portal" href="/docs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script><link rel="stylesheet" href="/docs/assets/css/styles.514a97b8.css">
<link rel="preload" href="/docs/assets/js/runtime~main.ba1d6efc.js" as="script">
<link rel="preload" href="/docs/assets/js/main.641cbc7f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/concepts/start-here">Concepts</a><a class="navbar__item navbar__link" href="/docs/guides">Guides</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/tools">Tools</a><a class="navbar__item navbar__link" href="/docs/references">References</a><a class="navbar__item navbar__link" href="/docs/community-resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/concepts/start-here">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/building-on-flow/run-and-secure/staking/epoch-scripts-events">Next</a></li><li><a class="dropdown__link" href="/docs/building-on-flow/run-and-secure/staking/epoch-scripts-events">Current</a></li></ul></div><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="GitHub" id="navbar-github" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Github</span></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="Discord" id="navbar-discord" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Discord</span></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/building-on-flow">Build on Flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/building-on-flow/flow-networks">Flow Networks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Networks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/building-on-flow/app-architecture">App Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/building-on-flow/building-vs-other-chains">Differences vs. Other Blockchains</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/next/building-on-flow/run-and-secure/staking">Running and Securing Flow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking">Epochs, Staking &amp; Delegating on Flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Epochs, Staking &amp; Delegating on Flow&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/epoch-terminology">Epoch and Staking Terminology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/schedule">Epoch and Reward Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/epoch-preparation">Epoch Preparation Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/stake-slashing">Stake Slashing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/epoch-scripts-events">Query Epoch Info with Scripts or Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/technical-overview">Staking Technical Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/staking-scripts-events">Query Staking Info with Scripts or Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/staking-rewards">How to Query Staking rewards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/qc-dkg">QC and DKG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/qc-dkg-scripts-events">QC/DKG Scripts and Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/machine-account">Machine Account</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/faq">Staking FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/staking-options">Technical Staking Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/staking-collection">Staking Collection Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/staking/staking-guide">Basic Staking Guide (Deprecated)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/next/building-on-flow/run-and-secure/nodes">Flow Nodes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Nodes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/building-on-flow/core-contracts">Flow Core Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Core Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/building-on-flow/mobile">Flow Mobile</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Mobile&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/building-on-flow/governance">Governance</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Flow Developer Portal<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/building-on-flow/run-and-secure/staking/epoch-scripts-events">latest version</a></b> (<!-- -->Current<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Running and Securing Flow</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/next/building-on-flow/run-and-secure/staking"><span itemprop="name">Epochs, Staking &amp; Delegating on Flow</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Query Epoch Info with Scripts or Events</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Introduction</h1>
<p>The epoch contract stores a lot of different state, and the state is constantly changing.
As an external party, there are two ways to keep track of these state changes.
You can either use Cadence scripts to query the state of the contract at any given time,
or you can monitor events that are emitted by the epoch contract to be notified of any important occurances.</p>
<h1>Monitor Epoch Service Events</h1>
<p>These events can be queried using the Go or JavaScript SDKs to extract useful notifications and information about the
state of the epoch preparation protocol.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-service-event">What is a Service Event?<a href="#what-is-a-service-event" class="hash-link" aria-label="Direct link to What is a Service Event?" title="Direct link to What is a Service Event?">​</a></h2>
<p>Service events are special messages that are generated by smart contracts and included in execution results.
They enable communication between system smart contracts and the Flow protocol.
In other words, they serve as a communication mechanism between the execution state and the protocol state.</p>
<p>Concretely, service events are defined and emitted as events like any other in Cadence. An event is considered a service event when it is:</p>
<ul>
<li>emitted within the service chunk</li>
<li>emitted from a smart contract deployed to the service account</li>
<li>conformant to an event allowlist</li>
</ul>
<p>Each block contains a system chunk. For each system chunk,
all service events emitted are included in the corresponding execution result.</p>
<p>When verifying the system chunk, verifier nodes will only produce result approvals
when the system chunks included in the execution result are correct.
Thus, the security of this communication mechanism is enforced by the verification system.</p>
<p>When sealing a block containing a service event, the consensus committee will update the protocol state accordingly,
depending on the semantics of the event.</p>
<p>For example, a service event may indicate that a node&#x27;s stake has diminished to the point where they should be ejected,
in which case the consensus committee would mark that node as ejected in the protocol state.</p>
<p>Service events are fundamentally asynchronous, due the lag between block execution and sealing.
Consequently they are handled slightly differently than other protocol state updates.</p>
<p>The diagram below illustrates the steps each service event goes through to be included in the protocol state.</p>
<p><img loading="lazy" src="/docs/assets/images/epoch-service-event-diagram-7271210f0c98883d51d78681f01a5b6a.png" alt="Flow Service Event Diagram" width="626" height="931" class="img_ev3q"></p>
<p>For conciseness, we say a service event is <code>sealed</code> when the block in which it was emitted is sealed,
and we say a service event is <code>finalized</code> when the block containing the seal is finalized.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-descriptions">Event Descriptions<a href="#event-descriptions" class="hash-link" aria-label="Direct link to Event Descriptions" title="Direct link to Event Descriptions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="epochsetup"><code>EpochSetup</code><a href="#epochsetup" class="hash-link" aria-label="Direct link to epochsetup" title="Direct link to epochsetup">​</a></h3>
<p>The Epoch Setup service event is emitted by <code>FlowEpoch.startEpochSetup()</code>
when the staking auction phase ends and the Epoch Smart Contracts transition to the Epoch Setup phase.
It contains the finalized identity table for the upcoming epoch,
as well as timing information for phase changes.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>pub event EpochSetup (</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// The counter for the upcoming epoch. Must be one greater than the</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// counter for the current epoch.</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    counter: UInt64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// Identity table for the upcoming epoch with all node information.</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// Includes:</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// nodeID, staking key, networking key, networking address, role,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// staking information, weight, and more.</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    nodeInfo: [FlowIDTableStaking.NodeInfo],</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// The first view (inclusive) of the upcoming epoch.</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    firstView: UInt64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// The last view (inclusive) of the upcoming epoch.</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    finalView: UInt64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// The cluster assignment for the upcoming epoch. Each element in the list</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// represents one cluster and contains all the node IDs assigned to that</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// cluster, with their weights and votes</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    collectorClusters: [FlowClusterQC.Cluster],</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// The source of randomness to seed the leader selection algorithm with </span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// for the upcoming epoch.</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    randomSource: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// The deadlines of each phase in the DKG protocol to be completed in the upcoming</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// EpochSetup phase. Deadlines are specified in terms of a consensus view number. </span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// When a DKG participant observes a finalized and sealed block with view greater </span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    /// than the given deadline, it can safely transition to the next phase. </span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    DKGPhase1FinalView: UInt64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    DKGPhase2FinalView: UInt64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>    DKGPhase3FinalView: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->35</span><div style="display:inline-block;margin-left:16px"><span>)</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="epochcommit"><code>EpochCommit</code><a href="#epochcommit" class="hash-link" aria-label="Direct link to epochcommit" title="Direct link to epochcommit">​</a></h3>
<p>The <code>EpochCommit</code> service event is emitted when the Epoch Smart Contracts transition
from the Epoch Setup phase to the Epoch Commit phase.
It is emitted only when all preparation for the upcoming epoch (QC and DKG) has been completed.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>pub event EpochCommit (</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// The counter for the upcoming epoch. Must be equal to the counter in the</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// previous EpochSetup event.</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    counter: UInt64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// The result of the QC aggregation process. Each element contains </span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// all the nodes and votes received for a particular cluster</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// QC stands for quorum certificate that each cluster generates.</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    clusterQCs: [FlowClusterQC.ClusterQC],</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// The resulting public keys from the DKG process, encoded as by the flow-go</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// crypto library, then hex-encoded.</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    /// Group public key is the first element, followed by the individual keys</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    dkgPubKeys: [String],</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>)</span></div></div><br></code></div></div>
<h1>Query Information with Scripts</h1>
<p>The <code>FlowEpoch</code> smart contract stores important metadata about the current, proposed,
and previous epochs. Metadata for all historical epochs is stored permenantely
in the Epoch Smart Contract&#x27;s storage.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>pub struct EpochMetadata {</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The identifier for the epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub let counter: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The seed used for generating the epoch setup</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub let seed: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The first view of this epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub let startView: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The last view of this epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub let endView: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The last view of the staking auction</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub let stakingEndView: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The total rewards that are paid out for the epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub var totalRewards: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The reward amounts that are paid to each individual node and its delegators</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub var rewardAmounts: [FlowIDTableStaking.RewardsBreakdown]</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// Tracks if rewards have been paid for this epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub var rewardsPaid: Bool</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The organization of collector node IDs into clusters</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// determined by a round robin sorting algorithm</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub let collectorClusters: [FlowClusterQC.Cluster]</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The Quorum Certificates from the ClusterQC contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub var clusterQCs: [FlowClusterQC.ClusterQC]</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// The public keys associated with the Distributed Key Generation</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// process that consensus nodes participate in</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    /// Group key is the last element at index: length - 1</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>    pub var dkgKeys: [String]</span></div></div><div><span class="ch-code-line-number">_<!-- -->38</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-epoch-metadata">Get Epoch Metadata<a href="#get-epoch-metadata" class="hash-link" aria-label="Direct link to Get Epoch Metadata" title="Direct link to Get Epoch Metadata">​</a></h3>
<p>The <code>FlowEpoch</code> smart contract provides a public function, <code>FlowEpoch.getEpochMetadata()</code>
to query the metadata for a particular epoch.</p>
<p>You can use the <strong>Get Epoch Metadata</strong>(<a href="/docs/next/building-on-flow/core-contracts/epoch-contract-reference#getting-epoch-info">EP.01</a>) script
with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>epochCounter</strong></td><td><code>UInt64</code></td><td>The counter of the epoch to get metadata for.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-configurable-metadata">Get Configurable Metadata<a href="#get-configurable-metadata" class="hash-link" aria-label="Direct link to Get Configurable Metadata" title="Direct link to Get Configurable Metadata">​</a></h3>
<p>The <code>FlowEpoch</code> smart contract also has a set of metadata that is configurable by the admin
for phase lengths, number of collector clusters, and inflation percentage.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>pub struct Config {</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    /// The number of views in an entire epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    pub(set) var numViewsInEpoch: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    /// The number of views in the staking auction</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    pub(set) var numViewsInStakingAuction: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    </span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    /// The number of views in each dkg phase</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    pub(set) var numViewsInDKGPhase: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    /// The number of collector clusters in each epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    pub(set) var numCollectorClusters: UInt16</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    /// Tracks the annualized percentage of FLOW total supply that is minted as rewards at the end of an epoch</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    /// Calculation for a single epoch would be (totalSupply * FLOWsupplyIncreasePercentage) / 52</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    pub(set) var FLOWsupplyIncreasePercentage: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>You can use the <strong>Get Configurable Metadata</strong>(<a href="/docs/next/building-on-flow/core-contracts/epoch-contract-reference#getting-epoch-info">EP.02</a>) script
to get the list of configurable metadata:</p>
<p>This script does not require any arguments.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-epoch-counter">Get Epoch Counter<a href="#get-epoch-counter" class="hash-link" aria-label="Direct link to Get Epoch Counter" title="Direct link to Get Epoch Counter">​</a></h3>
<p>The <code>FlowEpoch</code> smart contract always tracks the counter of the current epoch.</p>
<p>You can use the <strong>Get Epoch Counter</strong>(<a href="/docs/next/building-on-flow/core-contracts/epoch-contract-reference#getting-epoch-info">EP.03</a>) script
to get the current epoch counter.</p>
<p>This script does not require any arguments.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-epoch-phase">Get Epoch Phase<a href="#get-epoch-phase" class="hash-link" aria-label="Direct link to Get Epoch Phase" title="Direct link to Get Epoch Phase">​</a></h3>
<p>The <code>FlowEpoch</code> smart contract always tracks the active phase of the current epoch.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>pub enum EpochPhase: UInt8 {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pub case STAKINGAUCTION</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pub case EPOCHSETUP</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pub case EPOCHCOMMIT</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>You can use the <strong>Get Epoch Phase</strong>(<a href="/docs/next/building-on-flow/core-contracts/epoch-contract-reference#getting-epoch-info">EP.04</a>) script
to get the current epoch phase.</p>
<p>This script does not require any arguments.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/building-on-flow/run-and-secure/staking/05-epoch-scripts-events.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-12T19:59:01.000Z">Sep 12, 2023</time></b> by <b>Alex Ni</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/building-on-flow/run-and-secure/staking/stake-slashing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Stake Slashing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/building-on-flow/run-and-secure/staking/technical-overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Staking Technical Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-service-event" class="table-of-contents__link toc-highlight">What is a Service Event?</a></li><li><a href="#event-descriptions" class="table-of-contents__link toc-highlight">Event Descriptions</a><ul><li><a href="#epochsetup" class="table-of-contents__link toc-highlight"><code>EpochSetup</code></a></li><li><a href="#epochcommit" class="table-of-contents__link toc-highlight"><code>EpochCommit</code></a></li><li><a href="#get-epoch-metadata" class="table-of-contents__link toc-highlight">Get Epoch Metadata</a></li><li><a href="#get-configurable-metadata" class="table-of-contents__link toc-highlight">Get Configurable Metadata</a></li><li><a href="#get-epoch-counter" class="table-of-contents__link toc-highlight">Get Epoch Counter</a></li><li><a href="#get-epoch-phase" class="table-of-contents__link toc-highlight">Get Epoch Phase</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/intro">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/building-on-flow/mobile">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/clients/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/next/community-resources">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/kitty-items">Kitty Items</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial/first-steps">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/building-on-flow/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/building-on-flow/run-and-secure/nodes/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/building-on-flow/run-and-secure/nodes/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/building-on-flow/run-and-secure/nodes/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/building-on-flow/run-and-secure/nodes/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.ba1d6efc.js"></script>
<script src="/docs/assets/js/main.641cbc7f.js"></script>
</body>
</html>