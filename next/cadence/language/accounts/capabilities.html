<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cadence/language/accounts/capabilities">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Capabilities | Flow Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/next/cadence/language/accounts/capabilities"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Capabilities | Flow Developer Portal"><meta data-rh="true" name="description" content="Accounts have capabilities associated with them."><meta data-rh="true" property="og:description" content="Accounts have capabilities associated with them."><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/next/cadence/language/accounts/capabilities"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/next/cadence/language/accounts/capabilities" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/next/cadence/language/accounts/capabilities" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Flow Developer Portal" href="/docs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script><link rel="stylesheet" href="/docs/assets/css/styles.8d07a146.css">
<link rel="preload" href="/docs/assets/js/runtime~main.ee2d90f4.js" as="script">
<link rel="preload" href="/docs/assets/js/main.bc7903cb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/build">Build</a><a class="navbar__item navbar__link" href="/docs/guides/flow-app-quickstart">Guides</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/tools/flow-cli">Tools</a><a class="navbar__item navbar__link" href="/docs/references">References</a><a class="navbar__item navbar__link" href="/docs/community-resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/overview">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/cadence/language/accounts/capabilities">Next</a></li><li><a class="dropdown__link" href="/docs/architecture">Current</a></li></ul></div><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="GitHub" id="navbar-github" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Github</span></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="Discord" id="navbar-discord" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Discord</span></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/design-patterns">Design Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence">index</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/anti-patterns">Anti-Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/security-best-practices">Security Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/cadence/tutorial/first-steps">Tutorial</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/contract-upgrades">Contract Upgrades with Incompatible Changes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/next/cadence/language">Language Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/syntax">Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/constants-and-variables">Constants and Variable Declarations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/type-annotations">Type Annotations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/values-and-types">Values and Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/operators">Operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/control-flow">Control Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/scope">Scope</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/type-safety">Type Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/type-inference">Type Inference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/composite-types">Composite Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/access-control">Access control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/capabilities">Capabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/interfaces">Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/enumerations">Enumerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/intersection-types">Intersection Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/references">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/imports">Imports</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/next/cadence/language/accounts">Accounts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Accounts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/accounts/paths">Paths</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/accounts/storage">Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/cadence/language/accounts/capabilities">Capabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/accounts/keys">Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/accounts/contracts">Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/accounts/inbox">Inbox</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/attachments">Attachments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/contracts">Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/contract-updatability">Contract Updatability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/transactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/events">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/core-events">Core Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/run-time-types">Run-time Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/built-in-functions">Built-in Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/environment-information">Environment Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/crypto">Crypto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/type-hierarchy">Type Hierarchy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cadence/language/glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/project-development-tips">Development Standards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/solidity-to-cadence">Guide for Solidity Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/json-cadence-spec">JSON-Cadence format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/measuring-time">Measuring Time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cadence/testing-framework">Testing</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Flow Developer Portal<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/architecture">latest version</a></b> (<!-- -->Current<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/next/cadence/language"><span itemprop="name">Language Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/next/cadence/language/accounts"><span itemprop="name">Accounts</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Capabilities</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Capabilities</h1></header><p>Accounts have <a href="/docs/next/cadence/language/capabilities">capabilities</a> associated with them.</p>
<p>An account exposes its capabilities through the <code>capabilities</code> field,
which has the type <code>Account.Capabilities</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accountcapabilities"><code>Account.Capabilities</code><a href="#accountcapabilities" class="hash-link" aria-label="Direct link to accountcapabilities" title="Direct link to accountcapabilities">​</a></h2>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>struct Capabilities {</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// The storage capabilities of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    access(CapabilitiesMapping)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    let storage: Account.StorageCapabilities</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// The account capabilities of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    access(CapabilitiesMapping)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    let account: Account.AccountCapabilities</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the capability at the given public path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if the capability does not exist,</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// or if the given type is not a supertype of the capability&#x27;s borrow type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    view fun get&lt;T: &amp;Any&gt;(_ path: PublicPath): Capability&lt;T&gt;?</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Borrows the capability at the given public path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if the capability does not exist, or cannot be borrowed using the given type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// The function is equivalent to `get(path)?.borrow()`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    view fun borrow&lt;T: &amp;Any&gt;(_ path: PublicPath): T?</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Publish the capability at the given public path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// If there is already a capability published under the given path, the program aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a public path, i.e., only the domain `public` is allowed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | PublishCapability)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    fun publish(_ capability: Capability, at: PublicPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Unpublish the capability published at the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the capability if one was published at the path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if no capability was published at the path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | UnpublishCapability)</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>    fun unpublish(_ path: PublicPath): Capability?</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>entitlement Capabilities</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>entitlement PublishCapability</span></div></div><div><span class="ch-code-line-number">_<!-- -->43</span><div style="display:inline-block;margin-left:16px"><span>entitlement UnpublishCapability</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-public-capabilities">Getting public capabilities<a href="#getting-public-capabilities" class="hash-link" aria-label="Direct link to Getting public capabilities" title="Direct link to Getting public capabilities">​</a></h2>
<p>The function <code>capabilities.get</code> obtains a public capability
that was <a href="#publishing-capabilities">published</a> before.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>view fun get&lt;T: &amp;Any&gt;(_ path: PublicPath): Capability&lt;T&gt;?</span></div></div><br></code></div></div>
<p>If the account has a capability with the given type published under the given path,
the function returns it as an optional.</p>
<p>If the account has no capability published under the given path,
or the requested type, via the type parameter <code>T</code>, does not match the published capability,
the function returns <code>nil</code>.</p>
<p>The convenience function <code>capabilities.borrow</code> obtains and borrows a public capability
that was <a href="#publishing-capabilities">published</a> before, in one step.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>view fun borrow&lt;T: &amp;Any&gt;(_ path: PublicPath): T?</span></div></div><br></code></div></div>
<p>If the account has a capability with the given type published under the given path,
the function borrows the capability and returns the resulting reference as an optional.</p>
<p>If the account has no capability published under the given path,
or the requested type, via the type parameter <code>T</code>, does not match the published capability,
the function returns <code>nil</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-capabilities">Managing capabilities<a href="#managing-capabilities" class="hash-link" aria-label="Direct link to Managing capabilities" title="Direct link to Managing capabilities">​</a></h2>
<p>Capabilities can be storage capabilities or account capabilities:</p>
<ul>
<li>
<p><strong>Storage capabilities</strong> grant access to <a href="/docs/next/cadence/language/accounts/storage">objects in account storage</a>,
via <a href="/docs/next/cadence/language/accounts/paths">paths</a>.
An account allows the management of storage capabilities through the <code>capabilities.storage</code> field,
which has the type <code>Account.StorageCapabilities</code>.</p>
</li>
<li>
<p><strong>Account capabilities</strong> grant access to <a href="/docs/next/cadence/language/accounts">accounts</a>.
An account allows the management of account capabilities through the <code>capabilities.account</code> field,
which has the type <code>Account.AccountCapabilities</code>.</p>
</li>
</ul>
<p>A capability, and all its copies, is managed by a capability controller.</p>
<ul>
<li>
<p><strong>Storage capabilities</strong> are controlled by storage capability controllers.
Storage capability controllers have the type <code>StorageCapabilityController</code>.</p>
</li>
<li>
<p><strong>Account capabilities</strong> are controlled by account capability controllers.
Account capability controllers have the type <code>AccountCapabilityController</code>.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="accountstoragecapabilities-and-accountaccountcapabilities"><code>Account.StorageCapabilities</code> and <code>Account.AccountCapabilities</code><a href="#accountstoragecapabilities-and-accountaccountcapabilities" class="hash-link" aria-label="Direct link to accountstoragecapabilities-and-accountaccountcapabilities" title="Direct link to accountstoragecapabilities-and-accountaccountcapabilities">​</a></h3>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>struct StorageCapabilities {</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Issue/create a new storage capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | StorageCapabilities | IssueStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    fun issue&lt;T: &amp;Any&gt;(_ path: StoragePath): Capability&lt;T&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Get the storage capability controller for the capability with the specified ID.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if the ID does not reference an existing storage capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | StorageCapabilities | GetStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    view fun getController(byCapabilityID: UInt64): &amp;StorageCapabilityController?</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Get all storage capability controllers for capabilities that target this storage path</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | StorageCapabilities | GetStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    view fun getControllers(forPath: StoragePath): [&amp;StorageCapabilityController]</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Iterate over all storage capability controllers for capabilities that target this storage path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// passing a reference to each controller to the provided callback function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Iteration is stopped early if the callback function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// If a new storage capability controller is issued for the path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// an existing storage capability controller for the path is deleted,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// or a storage capability controller is retargeted from or to the path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// then the callback must stop iteration by returning false.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Otherwise, iteration aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | StorageCapabilities | GetStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    fun forEachController(</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        forPath: StoragePath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        _ function: fun(&amp;StorageCapabilityController): Bool</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    )</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>struct AccountCapabilities {</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Issue/create a new account capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | AccountCapabilities | IssueAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    fun issue&lt;T: &amp;Account&gt;(): Capability&lt;T&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Get capability controller for capability with the specified ID.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if the ID does not reference an existing account capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | AccountCapabilities | GetAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    view fun getController(byCapabilityID: UInt64): &amp;AccountCapabilityController?</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Get all capability controllers for all account capabilities.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | AccountCapabilities | GetAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    view fun getControllers(): [&amp;AccountCapabilityController]</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Iterate over all account capability controllers for all account capabilities,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// passing a reference to each controller to the provided callback function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Iteration is stopped early if the callback function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// If a new account capability controller is issued for the account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// or an existing account capability controller for the account is deleted,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// then the callback must stop iteration by returning false.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Otherwise, iteration aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    access(Capabilities | AccountCapabilities | GetAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    fun forEachController(_ function: fun(&amp;AccountCapabilityController): Bool)</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement StorageCapabilities</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement AccountCapabilities</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement GetStorageCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement IssueStorageCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement GetAccountCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement IssueAccountCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>entitlement mapping CapabilitiesMapping {</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    include Identity</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    StorageCapabilities -&gt; GetStorageCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    StorageCapabilities -&gt; IssueStorageCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    AccountCapabilities -&gt; GetAccountCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    AccountCapabilities -&gt; IssueAccountCapabilityController</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="accountcapabilitycontroller-and-storagecapabilitycontroller"><code>AccountCapabilityController</code> and <code>StorageCapabilityController</code><a href="#accountcapabilitycontroller-and-storagecapabilitycontroller" class="hash-link" aria-label="Direct link to accountcapabilitycontroller-and-storagecapabilitycontroller" title="Direct link to accountcapabilitycontroller-and-storagecapabilitycontroller">​</a></h3>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>struct AccountCapabilityController {</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// The capability that is controlled by this controller.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    let capability: Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// An arbitrary &quot;tag&quot; for the controller.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// For example, it could be used to describe the purpose of the capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// Empty by default.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    var tag: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// Updates this controller&#x27;s tag to the provided string</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    fun setTag(_ tag: String)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// The type of the controlled capability, i.e. the T in `Capability&lt;T&gt;`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    let borrowType: Type</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// The identifier of the controlled capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// All copies of a capability have the same ID.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    let capabilityID: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// Delete this capability controller,</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// and disable the controlled capability and its copies.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// The controller will be deleted from storage,</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// but the controlled capability and its copies remain.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// Once this function returns, the controller is no longer usable,</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// all further operations on the controller will panic.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    /// Borrowing from the controlled capability or its copies will return nil.</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>    fun delete()</span></div></div><div><span class="ch-code-line-number">_<!-- -->40</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>struct StorageCapabilityController {</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// The capability that is controlled by this controller.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    let capability: Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// An arbitrary &quot;tag&quot; for the controller.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// For example, it could be used to describe the purpose of the capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Empty by default.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    var tag: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Updates this controller&#x27;s tag to the provided string</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    fun setTag(_ tag: String)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// The type of the controlled capability, i.e. the T in `Capability&lt;T&gt;`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    let borrowType: Type</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// The identifier of the controlled capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// All copies of a capability have the same ID.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    let capabilityID: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Delete this capability controller,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// and disable the controlled capability and its copies.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// The controller will be deleted from storage,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// but the controlled capability and its copies remain.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Once this function returns, the controller is no longer usable,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// all further operations on the controller will panic.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Borrowing from the controlled capability or its copies will return nil.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    fun delete()</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the targeted storage path of the controlled capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    fun target(): StoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// Retarget the controlled capability to the given storage path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    /// The path may be different or the same as the current path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>    fun retarget(_ target: StoragePath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-capabilities">Issuing capabilities<a href="#issuing-capabilities" class="hash-link" aria-label="Direct link to Issuing capabilities" title="Direct link to Issuing capabilities">​</a></h3>
<p>Capabilities are created by <em>issuing</em> them in the target account.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-storage-capabilities">Issuing storage capabilities<a href="#issuing-storage-capabilities" class="hash-link" aria-label="Direct link to Issuing storage capabilities" title="Direct link to Issuing storage capabilities">​</a></h4>
<p>The <code>capabilities.storage.issue</code> function issues a new storage capability
that targets the given storage path and can be borrowed with the given type.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | StorageCapabilities | IssueStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun issue&lt;T: &amp;Any&gt;(_ path: StoragePath): Capability&lt;T&gt;</span></div></div><br></code></div></div>
<p>Calling the <code>issue</code> function requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> or <code>StorageCapabilities</code> entitlements
(<code>auth(Capabilities) &amp;Account</code> or <code>auth(StorageCapabilities) &amp;Account</code>),
or the fine-grained <code>IssueStorageCapabilityController</code> entitlement
(<code>auth(IssueStorageCapabilityController) &amp;Account</code>).</p>
<p>The path must be a storage path, it must have the domain <code>storage</code>.</p>
<p>For example, the following transaction issues a new storage capability,
which grants the ability to withdraw from the stored vault,
by authorizing the capability to be borrowed with the necessary <code>Withdraw</code> entitlement.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: auth(IssueStorageCapabilityController) &amp;Account) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let capability = signer.capabilities.storage.issue&lt;auth(Withdraw) &amp;Vault&gt;(/storage/vault)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        // ...</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-account-capabilities">Issuing account capabilities<a href="#issuing-account-capabilities" class="hash-link" aria-label="Direct link to Issuing account capabilities" title="Direct link to Issuing account capabilities">​</a></h4>
<p>The <code>capabilities.account.issue</code> function issues a new account capability
that targets the account and can be borrowed with the given type.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | AccountCapabilities | IssueAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun issue&lt;T: &amp;Account&gt;(): Capability&lt;T&gt;</span></div></div><br></code></div></div>
<p>Calling the <code>issue</code> function requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> or <code>AccountCapabilities</code> entitlements
(<code>auth(Capabilities) &amp;Account</code> or <code>auth(AccountCapabilities) &amp;Account</code>),
or the fine-grained <code>IssueAccountCapabilityController</code> entitlement
(<code>auth(IssueAccountCapabilityController) &amp;Account</code>).</p>
<p>For example, the following transaction issues a new account capability,
which grants the ability to save objects into the account,
by authorizing the capability to be borrowed with the necessary <a href="/docs/next/cadence/language/accounts/storage"><code>SaveValue</code> entitlement</a>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: auth(IssueAccountCapabilityController) &amp;Account) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let capability = signer.capabilities.account.issue&lt;auth(SaveValue) &amp;Account&gt;()</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        // ...</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-capabilities">Publishing capabilities<a href="#publishing-capabilities" class="hash-link" aria-label="Direct link to Publishing capabilities" title="Direct link to Publishing capabilities">​</a></h3>
<p>Capabilities can be made available publicly by <em>publishing</em> them.</p>
<p>The <code>capabilities.publish</code> function publishes a capability under a given public path.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | PublishCapability)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun publish(_ capability: Capability, at: PublicPath)</span></div></div><br></code></div></div>
<p>Calling the <code>publish</code> function requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> entitlement (<code>auth(Capabilities) &amp;Account</code>),
or the fine-grained <code>PublishCapability</code> entitlement (<code>auth(PublishCapability) &amp;Account</code>).</p>
<p>For example, the following transaction issues a new storage capability,
and then publishes it under the path <code>/public/vault</code>,
allowing anyone to access and borrow the capability and gain access to the stored vault.
Note that the reference type is unauthorized,
so when the capability is borrowed,
only publicly accessible (<code>access(all)</code>) fields and functions of the object can be accessed.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: auth(Capabilities) &amp;Account) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let capability = signer.capabilities.storage.issue&lt;&amp;Vault&gt;(/storage/vault)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        signer.capabilities.publish(capability, at: /public/vault)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unpublishing-capabilities">Unpublishing capabilities<a href="#unpublishing-capabilities" class="hash-link" aria-label="Direct link to Unpublishing capabilities" title="Direct link to Unpublishing capabilities">​</a></h3>
<p>The <code>capabilities.unpublish</code> function unpublishes a capability from a given public path.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | UnpublishCapability)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun unpublish(_ path: PublicPath): Capability?</span></div></div><br></code></div></div>
<p>Calling the <code>unpublish</code> function requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> entitlement (<code>auth(Capabilities) &amp;Account</code>),
or the fine-grained <code>UnpublishCapability</code> entitlement (<code>auth(UnpublishCapability) &amp;Account</code>).</p>
<p>If there is a capability published under the path, the function removes it from the path and returns it.
If there is no capability published under the path, the function returns <code>nil</code>.</p>
<p>For example, the following transaction unpublishes a capability
that was previously published under the path <code>/public/vault</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: auth(Capabilities) &amp;Account) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        signer.capabilities.unpublish(/public/vault)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tagging-capabilities">Tagging capabilities<a href="#tagging-capabilities" class="hash-link" aria-label="Direct link to Tagging capabilities" title="Direct link to Tagging capabilities">​</a></h3>
<p>Capabilities can be associated with a tag, an arbitrary string.
The tag can be used for various purposes, such as recording the purpose of the capability.
It is empty by default.
The tag is stored in the capability controller.</p>
<p>Both storage capability controllers (<code>StorageCapabilityController</code>)
and account capability controllers (<code>AccountCapabilityController</code>)
have a <code>tag</code> field and <code>setTag</code> function, which can be used to get and set the tag.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>var tag: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun setTag(_ tag: String)</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retargeting-storage-capabilities">Retargeting storage capabilities<a href="#retargeting-storage-capabilities" class="hash-link" aria-label="Direct link to Retargeting storage capabilities" title="Direct link to Retargeting storage capabilities">​</a></h3>
<p>Storage capabilities (<code>StorageCapabilityController</code>) can be retargeted
to another storage path after they have been issued.</p>
<p>The <code>target</code> function returns the storage path of the controlled capability,
and the <code>retarget</code> function sets a new storage path.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun target(): StoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun retarget(_ target: StoragePath)</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="revoking-capabilities">Revoking capabilities<a href="#revoking-capabilities" class="hash-link" aria-label="Direct link to Revoking capabilities" title="Direct link to Revoking capabilities">​</a></h3>
<p>A capability and all its copies can be revoked by deleting the capability&#x27;s controller.</p>
<p>The <code>delete</code> function deletes a controller
(<code>StorageCapabilityController</code> or <code>AccountCapabilityController</code>):</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun delete()</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-capability-controllers">Getting capability controllers<a href="#getting-capability-controllers" class="hash-link" aria-label="Direct link to Getting capability controllers" title="Direct link to Getting capability controllers">​</a></h3>
<p>The capability management types <code>StorageCapabilities</code> and <code>AccountCapabilities</code>
allow obtaining the controller for a capability,
as well as iterating over all existing controllers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="getting-a-storage-capability-controller">Getting a storage capability controller<a href="#getting-a-storage-capability-controller" class="hash-link" aria-label="Direct link to Getting a storage capability controller" title="Direct link to Getting a storage capability controller">​</a></h4>
<p>The <code>capabilities.storage.getController</code> function gets the storage capability controller
for the capability with the given capability ID.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | StorageCapabilities | GetStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>view fun getController(byCapabilityID: UInt64): &amp;StorageCapabilityController?</span></div></div><br></code></div></div>
<p>Calling the <code>getController</code> function requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> or <code>StorageCapabilities</code> entitlements
(<code>auth(Capabilities) &amp;Account</code> or <code>auth(StorageCapabilities) &amp;Account</code>),
or the fine-grained <code>GetStorageCapabilityController</code> entitlement
(<code>auth(GetStorageCapabilityController) &amp;Account</code>).</p>
<p>If a storage capability controller for the capability with the given ID exists,
the function returns a reference to it, as an optional.
If there is no storage capability controller with the given capability ID,
the function returns <code>nil</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="getting-an-account-capability-controller">Getting an account capability controller<a href="#getting-an-account-capability-controller" class="hash-link" aria-label="Direct link to Getting an account capability controller" title="Direct link to Getting an account capability controller">​</a></h4>
<p>The <code>capabilities.account.getController</code> function gets the account capability controller
for the capability with the given capability ID.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | AccountCapabilities | GetAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>view fun getController(byCapabilityID: UInt64): &amp;AccountCapabilityController?</span></div></div><br></code></div></div>
<p>Calling the <code>getController</code> function requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> or <code>AccountCapabilities</code> entitlements
(<code>auth(Capabilities) &amp;Account</code> or <code>auth(AccountCapabilities) &amp;Account</code>),
or the fine-grained <code>GetAccountCapabilityController</code> entitlement
(<code>auth(GetAccountCapabilityController) &amp;Account</code>).</p>
<p>If a account capability controller for the capability with the given ID exists,
the function returns a reference to it, as an optional.
If there is no account capability controller with the given capability ID,
the function returns <code>nil</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iterating-over-storage-capability-controllers">Iterating over storage capability controllers<a href="#iterating-over-storage-capability-controllers" class="hash-link" aria-label="Direct link to Iterating over storage capability controllers" title="Direct link to Iterating over storage capability controllers">​</a></h4>
<p>The functions <code>getControllers</code> and <code>forEachController</code> allow iterating
over all storage capability controllers of a storage path.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | StorageCapabilities | GetStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>view fun getControllers(forPath: StoragePath): [&amp;StorageCapabilityController]</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | StorageCapabilities | GetStorageCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun forEachController(</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    forPath: StoragePath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    _ function: fun(&amp;StorageCapabilityController): Bool</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>)</span></div></div><br></code></div></div>
<p>Calling the <code>getControllers</code> and <code>forEachController</code> function
requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> or <code>StorageCapabilities</code> entitlements
(<code>auth(Capabilities) &amp;Account</code> or <code>auth(StorageCapabilities) &amp;Account</code>),
or the fine-grained <code>GetStorageCapabilityController</code> entitlement
(<code>auth(GetStorageCapabilityController) &amp;Account</code>).</p>
<p>The <code>getControllers</code> function returns a new array of references
to all storage capability controllers.</p>
<p>The <code>forEachController</code> function calls the given callback function
for each storage capability controller and passes a reference to the function.
Iteration stops when the callback function returns <code>false</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iterating-over-account-capability-controllers">Iterating over account capability controllers<a href="#iterating-over-account-capability-controllers" class="hash-link" aria-label="Direct link to Iterating over account capability controllers" title="Direct link to Iterating over account capability controllers">​</a></h4>
<p>The functions <code>getControllers</code> and <code>forEachController</code> allow iterating
over all account capability controllers of the account.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | AccountCapabilities | GetAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>view fun getControllers(): [&amp;AccountCapabilityController]</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(Capabilities | AccountCapabilities | GetAccountCapabilityController)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun forEachController(_ function: fun(&amp;AccountCapabilityController): Bool)</span></div></div><br></code></div></div>
<p>Calling the <code>getControllers</code> and <code>forEachController</code> function
requires access to an account via a reference which is authorized
with the coarse-grained <code>Capabilities</code> or <code>AccountCapabilities</code> entitlements
(<code>auth(Capabilities) &amp;Account</code> or <code>auth(AccountCapabilities) &amp;Account</code>),
or the fine-grained <code>GetAccountCapabilityController</code> entitlement
(<code>auth(GetAccountCapabilityController) &amp;Account</code>).</p>
<p>The <code>getControllers</code> function returns a new array of references
to all account capability controllers.</p>
<p>The <code>forEachController</code> function calls the given callback function
for each account capability controller and passes a reference to the function.
Iteration stops when the callback function returns <code>false</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h2>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>entitlement Increment</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// Declare a resource named `Counter` that has a field `count`</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// and a function `increment`, which requires the `Increment` entitlement.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>resource Counter {</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    var count: UInt</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    access(all)</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    init(count: UInt) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>        self.count = count</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    access(Increment)</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    fun increment(by amount: UInt) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>        self.count = self.count + amount</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// In this example an account reference is available through the constant `account`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// which has the type `auth(Storage, Capabilities) &amp;Account`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// i.e., the reference is authorized to perform storage and capability operations.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// Create a new instance of the resource type `Counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// and save it in the storage of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// The path `/storage/counter` is used to refer to the stored value.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// Its identifier `counter` was chosen freely and could be something else.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>account.storage.save(</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    &lt;-create Counter(count: 42),</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>    to: /storage/counter</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>)</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// Issue a new storage capability that allows access to the stored counter resource</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>let capability = account.capabilities.storage.issue&lt;&amp;Counter&gt;(/storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// Publish the capability under the path `/public/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// so that anyone can access the counter resource.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>// Its identifier `counter` was chosen freely and could be something else.</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->47</span><div style="display:inline-block;margin-left:16px"><span>account.capabilities.publish(capability, at: /public/counter)</span></div></div><br></code></div></div>
<p>Imagine that the next example is in a different context,
for example a new script or transaction.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Get a reference to the account that stores the counter</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>let account = getAccount(0x1)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Borrow the capability for the counter that is made publicly accessible</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// through the path `/public/counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// The call of `borrow` returns an optional reference `&amp;Counter?`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// The borrow succeeds, and the result is not `nil`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// it is a valid reference, because:</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// 1. The path `/public/counter` stores a capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// 2. The capability allows to be borrowed as `&amp;Counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//    as it has the type `Capability&lt;&amp;Counter&gt;`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// 3. The target of the storage capability, the *path* `/storage/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//    stores an object and it has a type which is a subtype of the borrowed type</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//    (type equality is also considered a subtype relationship).</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Finally, force-unwrap the optional reference.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// After the call, the declared constant `counterRef` has type `&amp;Counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>let counterRef = account.capabilities.borrow&lt;&amp;Counter&gt;(/public/counter)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Read the field `count` of the `Counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// The field can be accessed, because it has the access modifier `access(all)`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Even though it is a variable field (`var`),</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// it cannot be assigned to from outside of the object.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>counterRef.count  // is `42`</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Invalid: The `increment` function is not accessible for the reference,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// because the reference has the type `&amp;Counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// which does not authorize the entitlement `Increment`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// which is required by the `increment` function</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// (it has the access modifier ` access(Increment)`).</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>counterRef.increment(by: 5)</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Again, attempt to borrow the capability for the counter,</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// but use the type `auth(Increment) &amp;Counter` to re-attempt the call to `increment`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// Getting the capability fails, because the capability was issued using the type `&amp;Counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>// After the call, `counterRef2` is `nil`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->49</span><div style="display:inline-block;margin-left:16px"><span>let counterRef2 = account.capabilities.borrow&lt;auth(Increment) &amp;Counter&gt;(/public/counter)</span></div></div><br></code></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/cadence/language/accounts/capabilities.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-19T17:52:38.000Z">Sep 19, 2023</time></b> by <b>Jordan Schalm</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/cadence/language/accounts/storage"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Storage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/cadence/language/accounts/keys"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Keys</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#accountcapabilities" class="table-of-contents__link toc-highlight"><code>Account.Capabilities</code></a></li><li><a href="#getting-public-capabilities" class="table-of-contents__link toc-highlight">Getting public capabilities</a></li><li><a href="#managing-capabilities" class="table-of-contents__link toc-highlight">Managing capabilities</a><ul><li><a href="#accountstoragecapabilities-and-accountaccountcapabilities" class="table-of-contents__link toc-highlight"><code>Account.StorageCapabilities</code> and <code>Account.AccountCapabilities</code></a></li><li><a href="#accountcapabilitycontroller-and-storagecapabilitycontroller" class="table-of-contents__link toc-highlight"><code>AccountCapabilityController</code> and <code>StorageCapabilityController</code></a></li><li><a href="#issuing-capabilities" class="table-of-contents__link toc-highlight">Issuing capabilities</a></li><li><a href="#publishing-capabilities" class="table-of-contents__link toc-highlight">Publishing capabilities</a></li><li><a href="#unpublishing-capabilities" class="table-of-contents__link toc-highlight">Unpublishing capabilities</a></li><li><a href="#tagging-capabilities" class="table-of-contents__link toc-highlight">Tagging capabilities</a></li><li><a href="#retargeting-storage-capabilities" class="table-of-contents__link toc-highlight">Retargeting storage capabilities</a></li><li><a href="#revoking-capabilities" class="table-of-contents__link toc-highlight">Revoking capabilities</a></li><li><a href="#getting-capability-controllers" class="table-of-contents__link toc-highlight">Getting capability controllers</a></li></ul></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/intro">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/build/mobile/overview">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/clients/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community-resources">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial/first-steps">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/build/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.ee2d90f4.js"></script>
<script src="/docs/assets/js/main.bc7903cb.js"></script>
</body>
</html>