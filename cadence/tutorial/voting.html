<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cadence/tutorial/voting">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">9. Voting Contract | Flow docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/cadence/tutorial/voting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="9. Voting Contract | Flow docs"><meta data-rh="true" name="description" content="In this tutorial, we&#x27;re going to deploy a contract that allows users to vote on multiple proposals that a voting administrator controls."><meta data-rh="true" property="og:description" content="In this tutorial, we&#x27;re going to deploy a contract that allows users to vote on multiple proposals that a voting administrator controls."><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/cadence/tutorial/voting"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/cadence/tutorial/voting" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/cadence/tutorial/voting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DKF9ZIO5WM-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Flow docs" href="/docs/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script><link rel="stylesheet" href="/docs/assets/css/styles.c2e4af6d.css">
<link rel="preload" href="/docs/assets/js/runtime~main.30520fd2.js" as="script">
<link rel="preload" href="/docs/assets/js/main.0a84d288.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/concepts/intro">Concepts</a><a class="navbar__item navbar__link" href="/docs/tutorials/intro">Tutorials</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/tooling/intro">Tooling</a><a class="navbar__item navbar__link" href="/docs/references/Introduction">References</a><a class="navbar__item navbar__link" href="/docs/community-resources/Introduction">Community Resources</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts/intro">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/intro">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/cadence/intro">Cadence</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/why">Why Use Cadence?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/cadence/tutorial/first-steps">Tutorial</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/first-steps">1. First Steps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/hello-world">2. Hello World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/resources">3. Resource Contract Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/capabilities">4. Capability Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/non-fungible-tokens-1">5.1 Non-Fungible Token Tutorial Part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/non-fungible-tokens-2">5.2 Non-Fungible Token Tutorial Part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/fungible-tokens">6. Fungible Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/marketplace-setup">7. Marketplace Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/marketplace-compose">8. Marketplace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cadence/tutorial/voting">9. Voting Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/tutorial/resources-compose">10. Composable Resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/cadence/language">Language Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/design-patterns">Design Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/anti-patterns">Anti-Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/security-best-practices">Cadence Security Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/solidity-to-cadence">Guide for Solidity developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/contract-upgrades">Contract Upgrades with Incompatible Changes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/cadence/core-contracts">Flow Core Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Core Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/json-cadence-spec">JSON-Cadence format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/measuring-time">Measuring Time</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/cadence/styleguide/project-development-tips">styleguide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/testing-framework">Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tooling/intro">Tooling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/references/Introduction">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/community-resources/Introduction">community-resources</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Flow Documentation</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cadence</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorial</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">9. Voting Contract</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>9. Voting Contract</h1></header><p>In this tutorial, we&#x27;re going to deploy a contract that allows users to vote on multiple proposals that a voting administrator controls.</p>
<hr>
<div class="theme-admonition theme-admonition-success alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Open the starter code for this tutorial in the Flow Playground:</p><a href="https://play.onflow.org/d120f0a7-d411-4243-bc59-5125a84f99b3" target="_blank"><p><a href="https://play.onflow.org/d120f0a7-d411-4243-bc59-5125a84f99b3" target="_blank" rel="noopener noreferrer">https://play.onflow.org/d120f0a7-d411-4243-bc59-5125a84f99b3</a></p></a><br><p>The tutorial will be asking you to take various actions to interact with this code.</p></div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Instructions that require you to take action are always included in a callout box like this one.
These highlighted actions are all that you need to do to get your code running,
but reading the rest is necessary to understand the language&#x27;s design.</p></div></div>
<p>With the advent of blockchain technology and smart contracts,
it has become popular to try to create decentralized voting mechanisms that allow large groups of users to vote completely on chain.
This tutorial will provide a trivial example for how this might be achieved by using a resource-oriented programming model.</p>
<p>We&#x27;ll take you through these steps to get comfortable with the Voting contract.</p>
<ol>
<li>Deploy the contract to account 1</li>
<li>Create proposals for users to vote on</li>
<li>Use a transaction with multiple signers to directly transfer the <code>Ballot</code> resource to another account.</li>
<li>Record and cast your vote in the central Voting contract</li>
<li>Read the results of the vote</li>
</ol>
<p>Before proceeding with this tutorial, we highly recommend following the instructions in <a href="/docs/cadence/tutorial/first-steps">Getting Started</a>
and <a href="/docs/cadence/tutorial/hello-world">Hello, World!</a> to learn how to use the Playground tools and to learn the fundamentals of Cadence.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-voting-contract-in-cadence">A Voting Contract in Cadence<a href="#a-voting-contract-in-cadence" class="hash-link" aria-label="Direct link to A Voting Contract in Cadence" title="Direct link to A Voting Contract in Cadence">​</a></h2>
<p>In this contract, a Ballot is represented as a resource.
An administrator can give Ballots to other accounts,
then those account mark which proposals they vote for
and submit the Ballot to the central smart contract to have their votes recorded.
Using a resource type is logical for this application,
because if a user wants to delegate their vote,
they can send that Ballot to another account.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-contract">Deploy the Contract<a href="#deploy-the-contract" class="hash-link" aria-label="Direct link to Deploy the Contract" title="Direct link to Deploy the Contract">​</a></h2>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Open Account <code>0x01</code> which has the <code>ApprovalVoting</code> contract.<br>
Click the Deploy button to deploy it to account <code>0x01</code>&quot;</p></div></div>
<div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="ApprovalVoting.cdc" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>ApprovalVoting.cdc</div></div><div style="flex:1;min-width:0.8em"></div><button type="button" title="Copy code" class="ch-editor-button"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6px" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>/*</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   In this example, we want to create a simple approval voting contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   where a polling place issues ballots to addresses.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   The run a vote, the Admin deploys the smart contract,</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   then initializes the proposals</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   using the initialize_proposals.cdc transaction.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   The array of proposals cannot be modified after it has been initialized.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   Then they will give ballots to users by</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   using the issue_ballot.cdc transaction.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   Every user with a ballot is allowed to approve any number of proposals.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   A user can choose their votes and cast them</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*   with the cast_vote.cdc transaction.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>*/</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>pub contract ApprovalVoting {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    //list of proposals to be approved</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    pub var proposals: [String]</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // number of votes per proposal</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    pub let votes: {Int: Int}</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // This is the resource that is issued to users.</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // When a user gets a Ballot object, they call the `vote` function</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // to include their votes, and then cast it in the smart contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // using the `cast` function to have their vote included in the polling</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    pub resource Ballot {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // array of all the proposals</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        pub let proposals: [String]</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // corresponds to an array index in proposals after a vote</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        pub var choices: {Int: Bool}</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        init() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            self.proposals = ApprovalVoting.proposals</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            self.choices = {}</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            // Set each choice to false</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            var i = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            while i &lt; self.proposals.length {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                self.choices[i] = false</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                i = i + 1</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // modifies the ballot</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // to indicate which proposals it is voting for</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        pub fun vote(proposal: Int) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            pre {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                self.proposals[proposal] != nil: &quot;Cannot vote for a proposal that doesn&#x27;t exist&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            self.choices[proposal] = true</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // Resource that the Administrator of the vote controls to</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // initialize the proposals and to pass out ballot resources to voters</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    pub resource Administrator {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // function to initialize all the proposals for the voting</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        pub fun initializeProposals(_ proposals: [String]) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            pre {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                ApprovalVoting.proposals.length == 0: &quot;Proposals can only be initialized once&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                proposals.length &gt; 0: &quot;Cannot initialize with no proposals&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            ApprovalVoting.proposals = proposals</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            // Set each tally of votes to zero</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            var i = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            while i &lt; proposals.length {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                ApprovalVoting.votes[i] = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                i = i + 1</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // The admin calls this function to create a new Ballot</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // that can be transferred to another user</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        pub fun issueBallot(): @Ballot {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            return &lt;-create Ballot()</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // A user moves their ballot to this function in the contract where</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // its votes are tallied and the ballot is destroyed</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    pub fun cast(ballot: @Ballot) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        var index = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // look through the ballot</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        while index &lt; self.proposals.length {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            if ballot.choices[index]! {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                // tally the vote if it is approved</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>                self.votes[index] = self.votes[index]! + 1</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>            index = index + 1;</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        // Destroy the ballot because it has been tallied</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        destroy ballot</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // initializes the contract by setting the proposals and votes to empty</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    // and creating a new Admin resource to put in storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    init() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        self.proposals = []</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        self.votes = {}</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>        self.account.save&lt;@Administrator&gt;(&lt;-create Administrator(), to: /storage/VotingAdmin)</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->113</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div>
<p>This contract implements a simple voting mechanism where an administrator can initialize it with an array of proposals to vote on by using the <code>initializeProposals</code> function.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>// function to initialize all the proposals for the voting</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>pub fun initializeProposals(_ proposals: [String]) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    pre {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        ApprovalVoting.proposals.length == 0: &quot;Proposals can only be initialized once&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        proposals.length &gt; 0: &quot;Cannot initialize with no proposals&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    ApprovalVoting.proposals = proposals</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    // Set each tally of votes to zero</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    var i = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    while i &lt; proposals.length {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        ApprovalVoting.votes[i] = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        i = i + 1</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Then they can give <code>Ballot</code> resources to other accounts. The other accounts can record their votes on their <code>Ballot</code> resource by calling the <code>vote</code> function.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>pub fun vote(proposal: Int) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pre {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        self.proposals[proposal] != nil: &quot;Cannot vote for a proposal that doesn&#x27;t exist&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    self.choices[proposal] = true</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>After a user has voted, they submit their vote to the central smart contract by calling the <code>cast</code> function, which records the votes in the <code>Ballot</code> and destroys the used <code>Ballot</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>// A user moves their ballot to this function in the contract where</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>// its votes are tallied and the ballot is destroyed</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>pub fun cast(ballot: @Ballot) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    var index = 0</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    // look through the ballot</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    while index &lt; self.proposals.length {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        if ballot.choices[index]! {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>            // tally the vote if it is approved</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>            self.votes[index] = self.votes[index]! + 1</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        index = index + 1;</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    // Destroy the ballot because it has been tallied</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    destroy ballot</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>When the voting time ends, the administrator can read the tallies for each proposal to see if a proposal has received the right number of votes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="perform-voting">Perform Voting<a href="#perform-voting" class="hash-link" aria-label="Direct link to Perform Voting" title="Direct link to Perform Voting">​</a></h2>
<p>Performing the common actions in this voting contract only takes three types of transactions.</p>
<ol>
<li>Initialize Proposals</li>
<li>Send <code>Ballot</code> to a voter</li>
<li>Cast Vote</li>
</ol>
<p>We have a transaction for each step that we provide for you.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>&quot;You should have the ApprovalVoting already deployed to account <code>0x01</code>.<br>
Open Transaction 1 which should have <code>Transaction1.cdc</code><br>
Submit the transaction with account <code>0x01</code> selected as the only signer.</p></div></div>
<div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Transaction1.cdc" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Transaction1.cdc</div></div><div style="flex:1;min-width:0.8em"></div><button type="button" title="Copy code" class="ch-editor-button"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6px" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>import ApprovalVoting from 0x01</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>// This transaction allows the administrator of the Voting contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>// to create new proposals for voting and save them to the smart contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>    prepare(admin: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        // borrow a reference to the admin Resource</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        let adminRef = admin.borrow&lt;&amp;ApprovalVoting.Administrator&gt;(from: /storage/VotingAdmin)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        // Call the initializeProposals function</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        // to create the proposals array as an array of strings</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        adminRef.initializeProposals(</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>            [&quot;Longer Shot Clock&quot;, &quot;Trampolines instead of hardwood floors&quot;]</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        log(&quot;Proposals Initialized!&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>    post {</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>        ApprovalVoting.proposals.length == 2</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->25</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div>
<p>This transaction allows the administrator of the Voting contract to create new proposals for voting and save them to the smart contract. They do this by calling the <code>initializeProposals</code> function on their stored <code>Administrator</code> resource, giving it two new proposals to vote on.
We use the <code>post</code> block to ensure that there were two proposals created, like we wished for.</p>
<p>Next, the administrator needs to hand out Ballots to the voters. There isn&#x27;t an easy <code>deposit</code> function this time for them to send a <code>Ballot</code> to another account, so how would they do it? This is where multiple-transaction signers can come in handy!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="selecting-multiple-accounts-as-signers">Selecting multiple Accounts as Signers<a href="#selecting-multiple-accounts-as-signers" class="hash-link" aria-label="Direct link to Selecting multiple Accounts as Signers" title="Direct link to Selecting multiple Accounts as Signers">​</a></h2>
<p>A transaction has access to the private account objects of every account that signed it, so if both the admin and the voter sign a transaction, the admin can directly move a <code>Ballot</code> resource object to the other account&#x27;s storage.</p>
<p>In the Flow playground, you can select multiple accounts to sign a transaction to be able to access the private account objects of both accounts.</p>
<p>To select multiple signers, you first need to include two arguments in the <code>prepare</code> block of your transaction:</p>
<p><code>prepare(acct1: AuthAccount, acct2: AuthAccount)</code></p>
<p>The playground will give you an error if the number of selected signers is different than the number of arguments to the prepare block. The playground also maps the accounts you select as signers to the arguments in the order that you select them. The first account you select will be the first argument, and the second account you select is the second argument.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Open Transaction 2 which should have <code>Transaction2.cdc</code>.<br>
Select account <code>0x01</code> as a signer first, then also select account <code>0x02</code>. <br>
Submit the transaction by clicking the <code>Send</code> button</p></div></div>
<div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Transaction2.cdc" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Transaction2.cdc</div></div><div style="flex:1;min-width:0.8em"></div><button type="button" title="Copy code" class="ch-editor-button"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6px" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>import ApprovalVoting from 0x01</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>// This transaction allows the administrator of the Voting contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>// to create a new ballot and store it in a voter&#x27;s account</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>// The voter and the administrator have to both sign the transaction</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>// so it can access their storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    prepare(admin: AuthAccount, voter: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // borrow a reference to the admin Resource</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        let adminRef = admin.borrow&lt;&amp;ApprovalVoting.Administrator&gt;(from: /storage/VotingAdmin)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // create a new Ballot by calling the issueBallot</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // function of the admin Reference</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        let ballot &lt;- adminRef.issueBallot()</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // store that ballot in the voter&#x27;s account storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        voter.save&lt;@ApprovalVoting.Ballot&gt;(&lt;-ballot, to: /storage/Ballot)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        log(&quot;Ballot transferred to voter&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div>
<p>This transaction has two signers as <code>prepare</code> parameters, so it is able to access both of their private <code>AuthAccount</code> objects, and therefore their private account storage. Because of this, we can perform a direct transfer of the <code>Ballot</code> by creating it with the admin&#x27;s <code>issueBallot</code> function and then directly store it in the voter&#x27;s storage by using the <code>save</code> function.</p>
<p>Account <code>0x02</code> should now have a <code>Ballot</code> resource object in its account storage. You can confirm this by opening the account 2 tab and seeing the <code>Ballot</code> resource shown in the Resources box.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="casting-a-vote">Casting a Vote<a href="#casting-a-vote" class="hash-link" aria-label="Direct link to Casting a Vote" title="Direct link to Casting a Vote">​</a></h2>
<p>Now that account <code>0x02</code> has a <code>Ballot</code> in their storage, they can cast their vote. To do this, they will call the <code>vote</code> method on their stored resource, then cast that <code>Ballot</code> by passing it to the <code>cast</code> function in the main smart contract.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Open Transaction 3 which should contain <code>Transaction3.cdc</code>.<br>
Select account <code>0x02</code> as the only transaction signer<br>
Click the <code>send</code> button to submit the transaction.</p></div></div>
<div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Transaction3.cdc" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Transaction3.cdc</div></div><div style="flex:1;min-width:0.8em"></div><button type="button" title="Copy code" class="ch-editor-button"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6px" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>import ApprovalVoting from 0x01</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>// This transaction allows a voter to select the votes they would like to make</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>// and cast that vote by using the castVote function</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>// of the ApprovalVoting smart contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>transaction {</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>    prepare(voter: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        // take the voter&#x27;s ballot our of storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        let ballot &lt;- voter.load&lt;@ApprovalVoting.Ballot&gt;(from: /storage/Ballot)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        // Vote on the proposal</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        ballot.vote(proposal: 1)</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        // Cast the vote by submitting it to the smart contract</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        ApprovalVoting.cast(ballot: &lt;-ballot)</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>        log(&quot;Vote cast and tallied&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->21</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div>
<p>In this transaction, the user votes for one of the proposals, and then moves their Ballot back to the smart contract where the vote is tallied.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reading-the-result-of-the-vote">Reading the result of the vote<a href="#reading-the-result-of-the-vote" class="hash-link" aria-label="Direct link to Reading the result of the vote" title="Direct link to Reading the result of the vote">​</a></h2>
<p>At any time, anyone could read the current tally of votes by directly reading the fields of the contract. You can use a script to do that, since it does not need to modify storage.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Open a Script 1 which should contain the code below.<br>
Click the <code>execute</code> button to run the script.</p></div></div>
<div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Script1.cdc" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Script1.cdc</div></div><div style="flex:1;min-width:0.8em"></div><button type="button" title="Copy code" class="ch-editor-button"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6px" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>import ApprovalVoting from 0x01</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>// This script allows anyone to read the tallied votes for each proposal</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>pub fun main() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    // Access the public fields of the contract to log</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    // the proposal names and vote counts</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    log(&quot;Number of Votes for Proposal 1:&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    log(ApprovalVoting.proposals[0])</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    log(ApprovalVoting.votes[0])</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    log(&quot;Number of Votes for Proposal 2:&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    log(ApprovalVoting.proposals[1])</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>    log(ApprovalVoting.votes[1])</span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->19</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div>
<p>You should see something like this print:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>&quot;Number of Votes for Proposal 1:&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>&quot;Longer Shot Clock&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>0</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>&quot;Number of Votes for Proposal 2:&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>&quot;Trampolines instead of hardwood floors&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>1</span></div></div><br></code></div></div>
<p>This shows that one vote was cast for proposal 1 and no votes were cast for proposal 2.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-voting-possibilities">Other Voting possibilities<a href="#other-voting-possibilities" class="hash-link" aria-label="Direct link to Other Voting possibilities" title="Direct link to Other Voting possibilities">​</a></h2>
<p>This contract was a very simple example of voting in Cadence. It clearly couldn&#x27;t be used for a real-world voting situation, but hopefully you can see what kind of features could be added to it to ensure practicality and security.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/cadence/tutorial/09-voting.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-05-15T20:40:08.000Z">May 15, 2023</time></b> by <b>Darshit Suratwala</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cadence/tutorial/marketplace-compose"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">8. Marketplace</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cadence/tutorial/resources-compose"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">10. Composable Resources</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-voting-contract-in-cadence" class="table-of-contents__link toc-highlight">A Voting Contract in Cadence</a></li><li><a href="#deploy-the-contract" class="table-of-contents__link toc-highlight">Deploy the Contract</a></li><li><a href="#perform-voting" class="table-of-contents__link toc-highlight">Perform Voting</a></li><li><a href="#selecting-multiple-accounts-as-signers" class="table-of-contents__link toc-highlight">Selecting multiple Accounts as Signers</a></li><li><a href="#casting-a-vote" class="table-of-contents__link toc-highlight">Casting a Vote</a></li><li><a href="#reading-the-result-of-the-vote" class="table-of-contents__link toc-highlight">Reading the result of the vote</a></li><li><a href="#other-voting-possibilities" class="table-of-contents__link toc-highlight">Other Voting possibilities</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn">Learning Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/mobile">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/kitty-items">Kitty Items</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.30520fd2.js"></script>
<script src="/docs/assets/js/main.0a84d288.js"></script>
</body>
</html>