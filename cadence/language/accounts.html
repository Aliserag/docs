<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-stable plugin-docs plugin-id-default docs-doc-id-cadence/language/accounts">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Accounts | Flow Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/cadence/language/accounts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="stable"><meta data-rh="true" name="docusaurus_tag" content="docs-default-stable"><meta data-rh="true" name="docsearch:version" content="stable"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-stable"><meta data-rh="true" property="og:title" content="Accounts | Flow Developer Portal"><meta data-rh="true" name="description" content="Every account can be accessed through two types, PublicAccount and AuthAccount."><meta data-rh="true" property="og:description" content="Every account can be accessed through two types, PublicAccount and AuthAccount."><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/cadence/language/accounts"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/cadence/language/accounts" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/cadence/language/accounts" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Flow Developer Portal" href="/docs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script><link rel="stylesheet" href="/docs/assets/css/styles.8d07a146.css">
<link rel="preload" href="/docs/assets/js/runtime~main.d60b787c.js" as="script">
<link rel="preload" href="/docs/assets/js/main.3438fe16.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/build">Build</a><a class="navbar__item navbar__link" href="/docs/guides/flow-app-quickstart">Guides</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/tools/flow-cli">Tools</a><a class="navbar__item navbar__link" href="/docs/references">References</a><a class="navbar__item navbar__link" href="/docs/community-resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/architecture">Current</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/overview">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/cadence/language/accounts">Current</a></li></ul></div><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="GitHub" id="navbar-github" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Github</span></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="Discord" id="navbar-discord" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Discord</span></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/why">Why Use Cadence?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cadence/tutorial/first-steps">Tutorial</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/cadence/language">Language Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/syntax">Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/constants-and-variables">Constants and Variable Declarations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/type-annotations">Type Annotations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/values-and-types">Values and Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/operators">Operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/control-flow">Control Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/scope">Scope</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/type-safety">Type Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/type-inference">Type Inference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/composite-types">Composite Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/access-control">Access control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/interfaces">Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/enumerations">Enumerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/restricted-types">Restricted Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/references">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/imports">Imports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cadence/language/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/capabilities">Capability-based Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/attachments">Attachments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/contracts">Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/contract-updatability">Contract Updatability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/events">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/core-events">Core Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/transactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/run-time-types">Run-time Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/built-in-functions">Built-in Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/environment-information">Environment Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/crypto">Crypto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/type-hierarchy">Type Hierarchy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cadence/language/glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/design-patterns">Design Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/anti-patterns">Anti-Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/security-best-practices">Cadence Security Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/solidity-to-cadence">Guide for Solidity developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/contract-upgrades">Contract Upgrades with Incompatible Changes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/json-cadence-spec">JSON-Cadence format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/measuring-time">Measuring Time</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cadence/styleguide/project-development-tips">styleguide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cadence/testing-framework">Testing</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/cadence/language"><span itemprop="name">Language Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Accounts</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Current</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Accounts</h1></header><p>Every account can be accessed through two types, <code>PublicAccount</code> and <code>AuthAccount</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="publicaccount"><code>PublicAccount</code><a href="#publicaccount" class="hash-link" aria-label="Direct link to publicaccount" title="Direct link to publicaccount">​</a></h2>
<p><strong>Public Account</strong> objects have the type <code>PublicAccount</code>,
which represents the publicly available portion of an account.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>pub struct PublicAccount {</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The address of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let address: Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The FLOW balance of the default vault of this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let balance: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The FLOW balance of the default vault of this account that is available to be moved.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let availableBalance: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The current amount of storage used by the account in bytes.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let storageUsed: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The storage capacity of the account in bytes.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let storageCapacity: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The contracts deployed to the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let contracts: PublicAccount.Contracts</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The keys assigned to the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let keys: PublicAccount.Keys</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// All public paths of this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub let publicPaths: [PublicPath]</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the capability at the given public path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub fun getCapability&lt;T: &amp;Any&gt;(_ path: PublicPath): Capability&lt;T&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the target path of the capability at the given public or private path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// or nil if there exists no capability at the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub fun getLinkTarget(_ path: CapabilityPath): Path?</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Iterate over all the public paths of an account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// passing each path and type in turn to the provided callback function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The callback function takes two arguments:</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///   1. The path of the stored object</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///   2. The runtime type of that object</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// Iteration is stopped early if the callback function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// The order of iteration, as well as the behavior of adding or removing objects from storage during iteration,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    /// is undefined.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub fun forEachPublic(_ function: ((PublicPath, Type): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub struct Contracts {</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// The names of all contracts deployed in the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        pub let names: [String]</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the deployed contract for the contract/contract interface with the given name in the account, if any.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns nil if no contract/contract interface with the given name exists in the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        pub fun get(name: String): DeployedContract?</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns a reference of the given type to the contract with the given name in the account, if any.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns nil if no contract with the given name exists in the account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// or if the contract does not conform to the given type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        pub fun borrow&lt;T: &amp;Any&gt;(name: String): T?</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    pub struct Keys {</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the key at the given index, if it exists, or nil otherwise.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Revoked keys are always returned, but they have `isRevoked` field set to true.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        pub fun get(keyIndex: Int): AccountKey?</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Iterate over all unrevoked keys in this account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// passing each key in turn to the provided function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// Iteration is stopped early if the function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// The order of iteration is undefined.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        pub fun forEach(_ function: ((AccountKey): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        /// The total number of unrevoked keys in this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>        pub let count: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->82</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Any code can get the <code>PublicAccount</code> for an account address
using the built-in <code>getAccount</code> function:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun getAccount(_ address: Address): PublicAccount</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authaccount"><code>AuthAccount</code><a href="#authaccount" class="hash-link" aria-label="Direct link to authaccount" title="Direct link to authaccount">​</a></h2>
<p><strong>Authorized Account</strong> object have the type <code>AuthAccount</code>,
which represents the authorized portion of an account.</p>
<p>Access to an <code>AuthAccount</code> means having full access to its <a href="#account-storage">storage</a>,
public keys, and code.</p>
<p>Only <a href="/docs/cadence/language/transactions">signed transactions</a> can get the <code>AuthAccount</code> for an account.
For each signer of the transaction that signs as an authorizer, the corresponding <code>AuthAccount</code> object is passed
to the <code>prepare</code> phase of the transaction.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>pub struct AuthAccount {</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The address of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let address: Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The FLOW balance of the default vault of this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let balance: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The FLOW balance of the default vault of this account that is available to be moved.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let availableBalance: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The current amount of storage used by the account in bytes.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let storageUsed: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The storage capacity of the account in bytes.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let storageCapacity: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The contracts deployed to the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let contracts: AuthAccount.Contracts</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The keys assigned to the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let keys: AuthAccount.Keys</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The inbox allows bootstrapping (sending and receiving) capabilities.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let inbox: AuthAccount.Inbox</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// All public paths of this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let publicPaths: [PublicPath]</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// All private paths of this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let privatePaths: [PrivatePath]</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// All storage paths of this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub let storagePaths: [StoragePath]</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// **DEPRECATED**: Use `keys.add` instead.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Adds a public key to the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The public key must be encoded together with their signature algorithm, hashing algorithm and weight.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun addPublicKey(_ publicKey: [UInt8])</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// **DEPRECATED**: Use `keys.revoke` instead.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Revokes the key at the given index.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun removePublicKey(_ index: Int)</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Saves the given object into the account&#x27;s storage at the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Resources are moved into storage, and structures are copied.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If there is already an object stored under the given path, the program aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a storage path, i.e., only the domain `storage` is allowed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun save&lt;T: Storable&gt;(_ value: T, to: StoragePath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Reads the type of an object from the account&#x27;s storage which is stored under the given path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or nil if no object is stored under the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If there is an object stored, the type of the object is returned without modifying the stored object.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a storage path, i.e., only the domain `storage` is allowed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun type(at: StoragePath): Type?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Loads an object from the account&#x27;s storage which is stored under the given path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or nil if no object is stored under the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If there is an object stored,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// the stored resource or structure is moved out of storage and returned as an optional.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// When the function returns, the storage no longer contains an object under the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type must be a supertype of the type of the loaded object.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If it is not, the function panics.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type must not necessarily be exactly the same as the type of the loaded object.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a storage path, i.e., only the domain `storage` is allowed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun load&lt;T: Storable&gt;(from: StoragePath): T?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns a copy of a structure stored in account storage under the given path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// without removing it from storage,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or nil if no object is stored under the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If there is a structure stored, it is copied.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The structure stays stored in storage after the function returns.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type must be a supertype of the type of the copied structure.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If it is not, the function panics.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type must not necessarily be exactly the same as the type of the copied structure.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a storage path, i.e., only the domain `storage` is allowed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun copy&lt;T: AnyStruct&gt;(from: StoragePath): T?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns a reference to an object in storage without removing it from storage.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If no object is stored under the given path, the function returns nil.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If there is an object stored, a reference is returned as an optional,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// provided it can be borrowed using the given type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If the stored object cannot be borrowed using the given type, the function panics.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type must not necessarily be exactly the same as the type of the borrowed object.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a storage path, i.e., only the domain `storage` is allowed</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun borrow&lt;T: &amp;Any&gt;(from: StoragePath): T?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns true if the object in account storage under the given path satisfies the given type,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// i.e. could be borrowed using the given type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type must not necessarily be exactly the same as the type of the borrowed object.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The path must be a storage path, i.e., only the domain `storage` is allowed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun check&lt;T: Any&gt;(from: StoragePath): Bool</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Creates a capability at the given public or private path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// which targets the given public, private, or storage path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The target path leads to the object that will provide the functionality defined by this capability.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The given type defines how the capability can be borrowed, i.e., how the stored value can be accessed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if a link for the given capability path already exists, or the newly created capability if not.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// It is not necessary for the target path to lead to a valid object; the target path could be empty,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or could lead to an object which does not provide the necessary type interface:</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The link function does **not** check if the target path is valid/exists at the time the capability is created</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// and does **not** check if the target value conforms to the given type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The link is latent.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The target value might be stored after the link is created,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// and the target value might be moved out after the link has been created.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun link&lt;T: &amp;Any&gt;(_ newCapabilityPath: CapabilityPath, target: Path): Capability&lt;T&gt;?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Creates a capability at the given public or private path which targets this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns nil if a link for the given capability path already exists, or the newly created capability if not.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun linkAccount(_ newCapabilityPath: PrivatePath): Capability&lt;&amp;AuthAccount&gt;?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the capability at the given private or public path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun getCapability&lt;T: &amp;Any&gt;(_ path: CapabilityPath): Capability&lt;T&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Returns the target path of the capability at the given public or private path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or nil if there exists no capability at the given path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun getLinkTarget(_ path: CapabilityPath): Path?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Removes the capability at the given public or private path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun unlink(_ path: CapabilityPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Iterate over all the public paths of an account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// passing each path and type in turn to the provided callback function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The callback function takes two arguments:</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///   1. The path of the stored object</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///   2. The runtime type of that object</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Iteration is stopped early if the callback function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The order of iteration is undefined.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If an object is stored under a new public path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or an existing object is removed from a public path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// then the callback must stop iteration by returning false.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Otherwise, iteration aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun forEachPublic(_ function: ((PublicPath, Type): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Iterate over all the private paths of an account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// passing each path and type in turn to the provided callback function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The callback function takes two arguments:</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///   1. The path of the stored object</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///   2. The runtime type of that object</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Iteration is stopped early if the callback function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The order of iteration is undefined.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If an object is stored under a new private path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or an existing object is removed from a private path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// then the callback must stop iteration by returning false.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Otherwise, iteration aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun forEachPrivate(_ function: ((PrivatePath, Type): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Iterate over all the stored paths of an account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// passing each path and type in turn to the provided callback function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// The callback function takes two arguments:</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///   1. The path of the stored object</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///   2. The runtime type of that object</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Iteration is stopped early if the callback function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// If an object is stored under a new storage path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// or an existing object is removed from a storage path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// then the callback must stop iteration by returning false.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    /// Otherwise, iteration aborts.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub fun forEachStored(_ function: ((StoragePath, Type): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub struct Contracts {</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The names of all contracts deployed in the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub let names: [String]</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Adds the given contract to the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The `code` parameter is the UTF-8 encoded representation of the source code.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The code must contain exactly one contract or contract interface,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// which must have the same name as the `name` parameter.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// All additional arguments that are given are passed further to the initializer</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// of the contract that is being deployed.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The function fails if a contract/contract interface with the given name already exists in the account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// if the given code does not declare exactly one contract or contract interface,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// or if the given name does not match the name of the contract/contract interface declaration in the code.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the deployed contract.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun add(</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>            name: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>            code: [UInt8]</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ): DeployedContract</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// **Experimental**</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Updates the code for the contract/contract interface in the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The `code` parameter is the UTF-8 encoded representation of the source code.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The code must contain exactly one contract or contract interface,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// which must have the same name as the `name` parameter.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Does **not** run the initializer of the contract/contract interface again.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The contract instance in the world state stays as is.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Fails if no contract/contract interface with the given name exists in the account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// if the given code does not declare exactly one contract or contract interface,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// or if the given name does not match the name of the contract/contract interface declaration in the code.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the deployed contract for the updated contract.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun update__experimental(name: String, code: [UInt8]): DeployedContract</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the deployed contract for the contract/contract interface with the given name in the account, if any.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns nil if no contract/contract interface with the given name exists in the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun get(name: String): DeployedContract?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Removes the contract/contract interface from the account which has the given name, if any.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the removed deployed contract, if any.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns nil if no contract/contract interface with the given name exists in the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun remove(name: String): DeployedContract?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns a reference of the given type to the contract with the given name in the account, if any.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns nil if no contract with the given name exists in the account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// or if the contract does not conform to the given type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun borrow&lt;T: &amp;Any&gt;(name: String): T?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub struct Keys {</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Adds a new key with the given hashing algorithm and a weight.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the added key.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun add(</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>            publicKey: PublicKey,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>            hashAlgorithm: HashAlgorithm,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>            weight: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ): AccountKey</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the key at the given index, if it exists, or nil otherwise.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Revoked keys are always returned, but they have `isRevoked` field set to true.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun get(keyIndex: Int): AccountKey?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Marks the key at the given index revoked, but does not delete it.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns the revoked key if it exists, or nil otherwise.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun revoke(keyIndex: Int): AccountKey?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Iterate over all unrevoked keys in this account,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// passing each key in turn to the provided function.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Iteration is stopped early if the function returns `false`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The order of iteration is undefined.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun forEach(_ function: ((AccountKey): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// The total number of unrevoked keys in this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub let count: UInt64</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    pub struct Inbox {</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Publishes a new Capability under the given name,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// to be claimed by the specified recipient.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun publish(_ value: Capability, name: String, recipient: Address)</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Unpublishes a Capability previously published by this account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns `nil` if no Capability is published under the given name.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Errors if the Capability under that name does not match the provided type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun unpublish&lt;T: &amp;Any&gt;(_ name: String): Capability&lt;T&gt;?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Claims a Capability previously published by the specified provider.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Returns `nil` if no Capability is published under the given name,</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// or if this account is not its intended recipient.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        ///</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        /// Errors if the Capability under that name does not match the provided type.</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>        pub fun claim&lt;T: &amp;Any&gt;(_ name: String, provider: Address): Capability&lt;T&gt;?</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->317</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>A script can get the <code>AuthAccount</code> for an account address using the built-in <code>getAuthAccount</code> function:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun getAuthAccount(_ address: Address): AuthAccount</span></div></div><br></code></div></div>
<p>This <code>AuthAccount</code> object can perform all operations associated with authorized accounts,
and as such this function is only available in scripts,
which discard their changes upon completion.
Attempting to use this function outside of a script will cause a type error.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="account-creation">Account Creation<a href="#account-creation" class="hash-link" aria-label="Direct link to Account Creation" title="Direct link to Account Creation">​</a></h2>
<p>Accounts can be created by calling the <code>AuthAccount</code> constructor
and passing the account that should pay for the account creation for the <code>payer</code> parameter.</p>
<p>The <code>payer</code> must have enough funds to be able to create an account.
If the account does not have the required funds, the program aborts.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let account = AuthAccount(payer: signer)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="account-keys">Account Keys<a href="#account-keys" class="hash-link" aria-label="Direct link to Account Keys" title="Direct link to Account Keys">​</a></h2>
<p>An account (both <code>PublicAccount</code> and <code>AuthAccount</code>) has keys associated with it.
An account key has the following structure.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>struct AccountKey {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    let keyIndex: Int</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    let publicKey: PublicKey</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    let hashAlgorithm: HashAlgorithm</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    let weight: UFix64</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    let isRevoked: Bool</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Refer to the <a href="/docs/cadence/language/crypto#publickey"><code>PublicKey</code> section</a> for more details on the creation and validity of public keys.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-key-api">Account Key API<a href="#account-key-api" class="hash-link" aria-label="Direct link to Account Key API" title="Direct link to Account Key API">​</a></h3>
<p>Account key API provides a set of functions to manage account keys.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-account-keys">Add Account Keys<a href="#add-account-keys" class="hash-link" aria-label="Direct link to Add Account Keys" title="Direct link to Add Account Keys">​</a></h4>
<p>To authorize access to the account, keys can be added using the <code>add()</code> function.
Keys can only be added to an <code>AuthAccount</code>.</p>
<p>For example, to create an account and have the signer of the transaction pay for the account
creation, and authorize one key to access the account:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>transaction(publicKey: [UInt8]) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>        let key = PublicKey(</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>            publicKey: publicKey,</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>            signatureAlgorithm: SignatureAlgorithm.ECDSA_P256</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>        let account = AuthAccount(payer: signer)</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>        account.keys.add(</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>            publicKey: key,</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>            hashAlgorithm: HashAlgorithm.SHA3_256,</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>            weight: 10.0</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->16</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>To add a public key to an existing account, which signed the transaction:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>transaction(publicKey: [UInt8]) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>        let key = PublicKey(</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>            publicKey: publicKey,</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>            signatureAlgorithm: SignatureAlgorithm.ECDSA_P256</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>        signer.keys.add(</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>            publicKey: key,</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>            hashAlgorithm: HashAlgorithm.SHA3_256,</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>            weight: 10.0</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>⚠️  Note: Keys can also be added using the <code>addPublicKey</code> function.
However, this method is currently deprecated and is available only for the backward compatibility.
The <code>addPublicKey</code> method accepts the public key encoded together with their signature algorithm,
hashing algorithm and weight.</p><div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction(key: [UInt8]) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let account = AuthAccount(payer: signer)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        account.addPublicKey(key)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="get-account-keys">Get Account Keys<a href="#get-account-keys" class="hash-link" aria-label="Direct link to Get Account Keys" title="Direct link to Get Account Keys">​</a></h4>
<p>Keys that are added to an account can be retrieved using <code>get()</code> function, using the index of the key.
Revoked keys are always returned, but they have <code>isRevoked</code> field set to true.
Returns <code>nil</code> if there is no key available at the given index.
Keys can be retrieved from both <code>PublicAccout</code> and <code>AuthAccount</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        // Get a key from an auth account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let keyA = signer.keys.get(keyIndex: 2)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        // Get a key from the public aacount.</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let publicAccount = getAccount(0x42)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let keyB = publicAccount.keys.get(keyIndex: 2)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="revoke-account-keys">Revoke Account Keys<a href="#revoke-account-keys" class="hash-link" aria-label="Direct link to Revoke Account Keys" title="Direct link to Revoke Account Keys">​</a></h4>
<p>Keys that have been added to an account can be revoked using <code>revoke()</code> function.
Revoke function only marks the key at the given index as revoked, but never deletes it.
Keys can only be revoked from an <code>AuthAccount</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>transaction() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        // Get a key from an auth account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>        let keyA = signer.keys.revoke(keyIndex: 2)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>⚠️  Note: Keys can also be removed using the <code>removePublicKey</code> function.
However, this method is deprecated and is available only for the backward compatibility.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="account-inbox">Account Inbox<a href="#account-inbox" class="hash-link" aria-label="Direct link to Account Inbox" title="Direct link to Account Inbox">​</a></h2>
<p>Accounts also possess an <code>Inbox</code> that can be used to make <a href="/docs/cadence/language/capabilities">Capabilities</a> available to specific accounts.
The functions in this <code>Inbox</code> provide a convenient means to &quot;bootstrap&quot; Capabilities,
setting up an initial connection between two accounts that will later allow them to transfer data or permissions through a Capability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-a-capability">Publishing a Capability<a href="#publishing-a-capability" class="hash-link" aria-label="Direct link to Publishing a Capability" title="Direct link to Publishing a Capability">​</a></h3>
<p>An account (the provider) that would like to provide a Capability to another account (the recipient) can do so using the <code>publish</code> function:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun publish(_ value: Capability, name: String, recipient: Address)</span></div></div><br></code></div></div>
<p>This publishes the specified Capability using the provided string as an identifier, to be later claimed by the recipient.
Note, however, that until the recipient does claim this Capability, it is stored on the provider&#x27;s account,
and contributes towards their Account Storage total.</p>
<p>Calling this function emits an event, <code>InboxValuePublished</code>,
that includes the address of both the provider and the recipient, as well as the name and the type of the published Capability.
Refer to the <a href="/docs/cadence/language/core-events#inbox-value-published"><code>Core Events</code> section</a> for more details on this event.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="claiming-a-capability">Claiming a Capability<a href="#claiming-a-capability" class="hash-link" aria-label="Direct link to Claiming a Capability" title="Direct link to Claiming a Capability">​</a></h3>
<p>The intended recipient of a Capability can claim that Capability from the provider using the <code>claim</code> function:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun claim&lt;T: &amp;Any&gt;(_ name: String, provider: Address): Capability&lt;T&gt;?</span></div></div><br></code></div></div>
<p>This looks up the specified name in the provider&#x27;s inbox, returning it to the recipient if it is present,
conforms to the provided type argument, and is intended for the calling recipient.
If the provider has no Capability stored under the provided name,
or if the calling recipient is not the intended recipient of the Capability, the function returns <code>nil</code>.
If the borrow type of the Capability is not a subtype of the provided type argument, the function will error at runtime.</p>
<p>Upon successful completion of the <code>claim</code> function, the claimed Capability is removed from the provider&#x27;s inbox.
Note that this means a given Capability can only be claimed once.</p>
<p>Calling this function emits an event, <code>InboxValueClaimed</code>,
that includes the address of both the provider and the recipient, as well as the name of the claimed Capability.
Refer to the <a href="/docs/cadence/language/core-events#inbox-value-claimed"><code>Core Events</code> section</a> for more details on this event.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unpublishing-a-capability">Unpublishing a Capability<a href="#unpublishing-a-capability" class="hash-link" aria-label="Direct link to Unpublishing a Capability" title="Direct link to Unpublishing a Capability">​</a></h3>
<p>If the provider of a Capability no longer wishes for it to be published for some reason (e.g. they no longer wish to pay for its storage costs),
they can unpublish it using the <code>unpublish</code> function:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun unpublish&lt;T: &amp;Any&gt;(_ name: String): Capability&lt;T&gt;?</span></div></div><br></code></div></div>
<p>This looks up the specified name in the provider&#x27;s inbox, returning it to the provider if it is present and conforms to the provided type argument.
If the provider has no Capability stored under the provided name, the function returns <code>nil</code>.
If the borrow type of the Capability is not a subtype of the provided type argument, the function will error at runtime.</p>
<p>Upon successful completion of the <code>unpublish</code> function, the unpublished Capability is removed from the provider&#x27;s inbox.</p>
<p>Calling this function emits an event, <code>InboxValueUnpublished</code>,
that includes the address of the provider, and the name of the claimed Capability.
Refer to the <a href="/docs/cadence/language/core-events#inbox-value-unpublished"><code>Core Events</code> section</a> for more details on this event.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="account-storage">Account Storage<a href="#account-storage" class="hash-link" aria-label="Direct link to Account Storage" title="Direct link to Account Storage">​</a></h2>
<p>All accounts have storage.
Both resources and structures can be stored in account storage.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="paths">Paths<a href="#paths" class="hash-link" aria-label="Direct link to Paths" title="Direct link to Paths">​</a></h3>
<p>Objects are stored under paths.
Paths consist of a domain and an identifier.</p>
<p>Paths start with the character <code>/</code>, followed by the domain, the path separator <code>/</code>,
and finally the identifier.
For example, the path <code>/storage/test</code> has the domain <code>storage</code> and the identifier <code>test</code>.</p>
<p>There are only three valid domains: <code>storage</code>, <code>private</code>, and <code>public</code>.</p>
<p>Objects in storage are always stored in the <code>storage</code> domain.</p>
<p>Paths in the storage domain have type <code>StoragePath</code>,
in the private domain <code>PrivatePath</code>,
and in the public domain <code>PublicPath</code>.</p>
<p><code>PrivatePath</code> and <code>PublicPath</code> are subtypes of <code>CapabilityPath</code>.</p>
<p>Both <code>StoragePath</code> and <code>CapabilityPath</code> are subtypes of <code>Path</code>.</p>
<table><tr><td colspan="3">Path</td></tr><tr><td colspan="2">CapabilityPath</td><td colspan="2" rowspan="2">StoragePath</td></tr><tr><td>PrivatePath</td><td>PublicPath</td></tr></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="path-functions">Path Functions<a href="#path-functions" class="hash-link" aria-label="Direct link to Path Functions" title="Direct link to Path Functions">​</a></h4>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun toString(): String</span></div></div><br></code></div></div>
<p>Returns the string representation of the path.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>let storagePath = /storage/path</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>storagePath.toString()  // is &quot;/storage/path&quot;</span></div></div><br></code></div></div>
<p>There are also utilities to produce paths from strings:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun PublicPath(identifier: string): PublicPath?</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun PrivatePath(identifier: string): PrivatePath?</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun StoragePath(identifier: string): StoragePath?</span></div></div><br></code></div></div>
<p>Each of these functions take an identifier and produce a path of the appropriate domain:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>let pathID = &quot;foo&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>let path = PublicPath(identifier: pathID) // is /public/foo</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-storage-api">Account Storage API<a href="#account-storage-api" class="hash-link" aria-label="Direct link to Account Storage API" title="Direct link to Account Storage API">​</a></h3>
<p>Account storage is accessed through the following functions of <code>AuthAccount</code>.
This means that any code that has access to the authorized account has access
to all its stored objects.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun save&lt;T&gt;(_ value: T, to: StoragePath)</span></div></div><br></code></div></div>
<p>Saves an object to account storage.
Resources are moved into storage, and structures are copied.</p>
<p><code>T</code> is the type parameter for the object type.
It can be inferred from the argument&#x27;s type.</p>
<p>If there is already an object stored under the given path, the program aborts.</p>
<p>The path must be a storage path, i.e., only the domain <code>storage</code> is allowed.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun type(at: StoragePath): Type?</span></div></div><br></code></div></div>
<p>Reads the type of an object from the account&#x27;s storage which is stored under the given path, or nil if no object is stored under the given path.</p>
<p>If there is an object stored, the type of the object is returned without modifying the stored object.</p>
<p>The path must be a storage path, i.e., only the domain <code>storage</code> is allowed</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun load&lt;T&gt;(from: StoragePath): T?</span></div></div><br></code></div></div>
<p>Loads an object from account storage.
If no object is stored under the given path, the function returns <code>nil</code>.
If there is an object stored, the stored resource or structure is moved
out of storage and returned as an optional.
When the function returns, the storage no longer contains an object
under the given path.</p>
<p><code>T</code> is the type parameter for the object type.
A type argument for the parameter must be provided explicitly.</p>
<p>The type <code>T</code> must be a supertype of the type of the loaded object.
If it is not, execution will abort with an error.
The given type does not necessarily need to be exactly the same as the type of the loaded object.</p>
<p>The path must be a storage path, i.e., only the domain <code>storage</code> is allowed.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun copy&lt;T: AnyStruct&gt;(from: StoragePath): T?</span></div></div><br></code></div></div>
<p>Returns a copy of a structure stored in account storage, without removing it from storage.</p>
<p>If no structure is stored under the given path, the function returns <code>nil</code>.
If there is a structure stored, it is copied.
The structure stays stored in storage after the function returns.</p>
<p><code>T</code> is the type parameter for the structure type.
A type argument for the parameter must be provided explicitly.</p>
<p>The type <code>T</code> must be a supertype of the type of the copied structure.
If it is not, execution will abort with an error.
The given type does not necessarily need to be exactly the same as
the type of the copied structure.</p>
<p>The path must be a storage path, i.e., only the domain <code>storage</code> is allowed.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Declare a resource named `Counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>resource Counter {</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>    pub var count: Int</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>    pub init(count: Int) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>        self.count = count</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// In this example an authorized account is available through the constant `authAccount`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Create a new instance of the resource type `Counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// and save it in the storage of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The path `/storage/counter` is used to refer to the stored value.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Its identifier `counter` was chosen freely and could be something else.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&lt;-create Counter(count: 42), to: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Run-time error: Storage already contains an object under path `/storage/counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&lt;-create Counter(count: 123), to: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Load the `Counter` resource from storage path `/storage/counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The new constant `counter` has the type `Counter?`, i.e., it is an optional,</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// and its value is the counter resource, that was saved at the beginning</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// of the example.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>let counter &lt;- authAccount.load&lt;@Counter&gt;(from: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The storage is now empty, there is no longer an object stored</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// under the path `/storage/counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Load the `Counter` resource again from storage path `/storage/counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The new constant `counter2` has the type `Counter?` and is `nil`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// as nothing is stored under the path `/storage/counter` anymore,</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// because the previous load moved the counter out of storage.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>let counter2 &lt;- authAccount.load&lt;@Counter&gt;(from: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Create another new instance of the resource type `Counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// and save it in the storage of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The path `/storage/otherCounter` is used to refer to the stored value.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&lt;-create Counter(count: 123), to: /storage/otherCounter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Load the `Vault` resource from storage path `/storage/otherCounter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The new constant `vault` has the type `Vault?` and its value is `nil`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// as there is a resource with type `Counter` stored under the path,</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// which is not a subtype of the requested type `Vault`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>let vault &lt;- authAccount.load&lt;@Vault&gt;(from: /storage/otherCounter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// The storage still stores a `Counter` resource under the path `/storage/otherCounter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Save the string &quot;Hello, World&quot; in storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// under the path `/storage/helloWorldMessage`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&quot;Hello, world!&quot;, to: /storage/helloWorldMessage)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Copy the stored message from storage.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// After the copy, the storage still stores the string under the path.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Unlike `load`, `copy` does not remove the object from storage.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>let message = authAccount.copy&lt;String&gt;(from: /storage/helloWorldMessage)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Create a new instance of the resource type `Vault`</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// and save it in the storage of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&lt;-createEmptyVault(), to: /storage/vault)</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>// Invalid: Cannot copy a resource, as this would allow arbitrary duplication.</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->80</span><div style="display:inline-block;margin-left:16px"><span>let vault &lt;- authAccount.copy&lt;@Vault&gt;(from: /storage/vault)</span></div></div><br></code></div></div>
<p>As it is convenient to work with objects in storage
without having to move them out of storage,
as it is necessary for resources,
it is also possible to create references to objects in storage:
This is possible using the <code>borrow</code> function of an <code>AuthAccount</code>:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun borrow&lt;T: &amp;Any&gt;(from: StoragePath): T?</span></div></div><br></code></div></div>
<p>Returns a reference to an object in storage without removing it from storage.
If no object is stored under the given path, the function returns <code>nil</code>.
If there is an object stored, a reference is returned as an optional.</p>
<p><code>T</code> is the type parameter for the object type.
A type argument for the parameter must be provided explicitly.
The type argument must be a reference to any type (<code>&amp;Any</code>; <code>Any</code> is the supertype of all types).
It must be possible to create the given reference type <code>T</code> for the stored /  borrowed object.
If it is not, execution will abort with an error.
The given type does not necessarily need to be exactly the same as the type of the borrowed object.</p>
<p>The path must be a storage path, i.e., only the domain <code>storage</code> is allowed.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Declare a resource interface named `HasCount`, that has a field `count`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>resource interface HasCount {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    count: Int</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Declare a resource named `Counter` that conforms to `HasCount`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>resource Counter: HasCount {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    pub var count: Int</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    pub init(count: Int) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        self.count = count</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// In this example an authorized account is available through the constant `authAccount`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Create a new instance of the resource type `Counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// and save it in the storage of the account.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// The path `/storage/counter` is used to refer to the stored value.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Its identifier `counter` was chosen freely and could be something else.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&lt;-create Counter(count: 42), to: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Create a reference to the object stored under path `/storage/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// typed as `&amp;Counter`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// `counterRef` has type `&amp;Counter?` and is a valid reference, i.e. non-`nil`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// because the borrow succeeded:</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// There is an object stored under path `/storage/counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// and it has type `Counter`, so it can be borrowed as `&amp;Counter`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>let counterRef = authAccount.borrow&lt;&amp;Counter&gt;(from: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>counterRef?.count // is `42`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Create a reference to the object stored under path `/storage/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// typed as `&amp;{HasCount}`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// `hasCountRef` is non-`nil`, as there is an object stored under path `/storage/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// and the stored value of type `Counter` conforms to the requested type `{HasCount}`:</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// the type `Counter` implements the restricted type&#x27;s restriction `HasCount`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>let hasCountRef = authAccount.borrow&lt;&amp;{HasCount}&gt;(from: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Create a reference to the object stored under path `/storage/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// typed as `&amp;{SomethingElse}`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// `otherRef` is `nil`, as there is an object stored under path `/storage/counter`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// but the stored value of type `Counter` does not conform to the requested type `{Other}`:</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// the type `Counter` does not implement the restricted type&#x27;s restriction `Other`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>let otherRef = authAccount.borrow&lt;&amp;{Other}&gt;(from: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// Create a reference to the object stored under path `/storage/nonExistent`,</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// typed as `&amp;{HasCount}`.</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>// `nonExistentRef` is `nil`, as there is nothing stored under path `/storage/nonExistent`</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>//</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>let nonExistentRef = authAccount.borrow&lt;&amp;{HasCount}&gt;(from: /storage/nonExistent)</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storage-iteration">Storage Iteration<a href="#storage-iteration" class="hash-link" aria-label="Direct link to Storage Iteration" title="Direct link to Storage Iteration">​</a></h2>
<p>It is possible to iterate over an account&#x27;s storage using the following iteration functions:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun forEachPublic(_ function: ((PublicPath, Type): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun forEachPrivate(_ function: ((PrivatePath, Type): Bool))</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>fun forEachStored(_ function: ((StoragePath, Type): Bool))</span></div></div><br></code></div></div>
<p>Each of these iterates over every element in the specified domain (public, private, and storage),
applying the function argument to each.
The first argument of the function is the path of the element, and the second is its runtime type.
In the case of the <code>private</code> and <code>public</code> path iteration functions,
this is the runtime type of the capability linked at that path.
The <code>Bool</code> return value determines whether iteration continues;
<code>true</code> will proceed to the next stored element,
while <code>false</code> will terminate iteration.
The specific order in which the objects are iterated over is undefined,
as is the behavior when a path is added or removed from storage.</p>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_vXIg"><p>The order of iteration is undefined. Do not rely on any particular behaviour.</p><p>Saving to or removing from storage during iteration can cause the order in which values are stored to change arbitrarily.</p><p>Continuing to iterate after such an operation will cause Cadence to panic and abort execution.
In order to avoid such errors, we recommend not modifying storage during iteration.
If you do, return <code>false</code> from the iteration callback to cause iteration to end after the mutation like so:</p><div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>account.save(1, to: /storage/foo1)</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>account.save(2, to: /storage/foo2)</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>account.save(3, to: /storage/foo3)</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>account.save(&quot;qux&quot;, to: /storage/foo4)</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>account.forEachStored(fun (path: StoragePath, type: Type): Bool {</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>    if type == Type&lt;String&gt;() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>        account.save(&quot;bar&quot;, to: /storage/foo5)</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>        // returning false here ends iteration after storage is modified, preventing a panic</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>        return false</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>    return true</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>})</span></div></div><br></code></div></div></div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>The iteration will skip any broken elements in the storage.
An element could be broken due to invalid types associated with the stored value.
e.g: A value belongs to type <code>T</code> of a contract with syntax/semantic errors.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storage-limit">Storage limit<a href="#storage-limit" class="hash-link" aria-label="Direct link to Storage limit" title="Direct link to Storage limit">​</a></h2>
<p>An account&#x27;s storage is limited by its storage capacity.</p>
<p>An account&#x27;s storage used is the sum of the size of all the data that is stored in an account (in MB).
An account&#x27;s storage capacity is a value that is calculated from the amount of FLOW
that is stored in the account&#x27;s main FLOW token vault.</p>
<p>At the end of every transaction, the storage used is compared to the storage capacity.
For all accounts involved in the transaction, if the account&#x27;s storage used is greater than its storage capacity, the transaction will fail.</p>
<p>An account&#x27;s storage used and storage capacity can be checked using the <code>storageUsed</code> and <code>storageCapacity</code> fields.
The fields represent current values of storage which means this would be true:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>let storageUsedBefore = authAccount.storageUsed</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>authAccount.save(&lt;-create Counter(count: 123), to: /storage/counter)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>let storageUsedAfter = authAccount.storageUsed</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>let storageUsedChanged = storageUsedBefore != storageUsedAfter // is true</span></div></div><br></code></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/cadence/language/accounts.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-19T14:24:03.000Z">Sep 19, 2023</time></b> by <b>Alex</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cadence/language/imports"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Imports</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cadence/language/capabilities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Capability-based Access Control</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#publicaccount" class="table-of-contents__link toc-highlight"><code>PublicAccount</code></a></li><li><a href="#authaccount" class="table-of-contents__link toc-highlight"><code>AuthAccount</code></a></li><li><a href="#account-creation" class="table-of-contents__link toc-highlight">Account Creation</a></li><li><a href="#account-keys" class="table-of-contents__link toc-highlight">Account Keys</a><ul><li><a href="#account-key-api" class="table-of-contents__link toc-highlight">Account Key API</a></li></ul></li><li><a href="#account-inbox" class="table-of-contents__link toc-highlight">Account Inbox</a><ul><li><a href="#publishing-a-capability" class="table-of-contents__link toc-highlight">Publishing a Capability</a></li><li><a href="#claiming-a-capability" class="table-of-contents__link toc-highlight">Claiming a Capability</a></li><li><a href="#unpublishing-a-capability" class="table-of-contents__link toc-highlight">Unpublishing a Capability</a></li></ul></li><li><a href="#account-storage" class="table-of-contents__link toc-highlight">Account Storage</a><ul><li><a href="#paths" class="table-of-contents__link toc-highlight">Paths</a></li><li><a href="#account-storage-api" class="table-of-contents__link toc-highlight">Account Storage API</a></li></ul></li><li><a href="#storage-iteration" class="table-of-contents__link toc-highlight">Storage Iteration</a></li><li><a href="#storage-limit" class="table-of-contents__link toc-highlight">Storage limit</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/intro">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/build/mobile">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/clients/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community-resources">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial/first-steps">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/build/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/node-ops/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.d60b787c.js"></script>
<script src="/docs/assets/js/main.3438fe16.js"></script>
</body>
</html>