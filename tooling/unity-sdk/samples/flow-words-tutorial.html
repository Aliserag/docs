<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-stable plugin-docs plugin-id-default docs-doc-id-tooling/unity-sdk/samples/flow-words-tutorial">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Tutorial - How to Build FlowWords | Flow Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/tooling/unity-sdk/samples/flow-words-tutorial"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="stable"><meta data-rh="true" name="docusaurus_tag" content="docs-default-stable"><meta data-rh="true" name="docsearch:version" content="stable"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-stable"><meta data-rh="true" property="og:title" content="Tutorial - How to Build FlowWords | Flow Developer Portal"><meta data-rh="true" name="description" content="Outline"><meta data-rh="true" property="og:description" content="Outline"><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/tooling/unity-sdk/samples/flow-words-tutorial"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/tooling/unity-sdk/samples/flow-words-tutorial" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/tooling/unity-sdk/samples/flow-words-tutorial" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Flow Developer Portal" href="/docs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script><link rel="stylesheet" href="/docs/assets/css/styles.115fa643.css">
<link rel="preload" href="/docs/assets/js/runtime~main.133774f2.js" as="script">
<link rel="preload" href="/docs/assets/js/main.46ae4a71.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/concepts/intro">Concepts</a><a class="navbar__item navbar__link" href="/docs/next/guides">Guides</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/next/tools">Tools</a><a class="navbar__item navbar__link" href="/docs/references/Introduction">References</a><a class="navbar__item navbar__link" href="/docs/community-resources/Introduction">Resources</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/concepts/intro">Current</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/concepts/start-here">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/tooling/unity-sdk/samples/flow-words-tutorial">Current</a></li></ul></div><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="GitHub" id="navbar-github" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Github</span></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="Discord" id="navbar-discord" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Discord</span></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tooling/intro">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tooling/emulator">Flow Emulator</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tooling/fcl-js">Flow Client Library (FCL)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Client Library (FCL)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tooling/fcl-dev-wallet/overview">FCL Dev Wallet</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tooling/flow-cadut/api">Flow Cadut</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tooling/flow-cli">Flow CLI Documentation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow CLI Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tooling/flow-go-sdk">Flow Go SDK</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Go SDK&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tooling/flow-js-testing">Flow Javascript Testing Framework Documentation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Javascript Testing Framework Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tooling/nft-catalog/cadence-generation">NFT Catalog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/tooling/unity-sdk">Flow SDK for Unity</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow SDK for Unity&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/api-reference">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/changelog">changelog</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tooling/unity-sdk/guides/convert">guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/license">license</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/tooling/unity-sdk/samples/flow-words-sample">samples</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/samples/flow-words-sample">Flow Unity SDK - FlowWords Sample</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tooling/unity-sdk/samples/flow-words-tutorial">Tutorial - How to Build FlowWords</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/samples/nft-browser">Simple NFT Viewer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/samples/nft-example">Simple NFT demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/samples/quickstart">FlowControl scripting example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tooling/unity-sdk/samples/ui-usage">Sample - FlowSDK Usage Demo</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tooling/vscode-extension">Cadence Visual Studio Code Extension</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/tooling/unity-sdk"><span itemprop="name">Flow SDK for Unity</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">samples</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tutorial - How to Build FlowWords</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Current</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Tutorial - How to Build FlowWords</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="outline">Outline<a href="#outline" class="hash-link" aria-label="Direct link to Outline" title="Direct link to Outline">​</a></h2>
<p>The FlowWords tutorial example project is the complete FlowWords game, with the FlowSDK and any SDK related code removed.</p>
<p>In this tutorial, you will learn how to;</p>
<ol>
<li>Configure the FlowSDK and local emulator for use with Unity</li>
<li>Deploy contracts, create Accounts and run Transactions on the Flow emulator from within Unity.</li>
<li>Incorporate Flow Accounts, Transactions and Scripts into Unity projects using Code</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<p>FlowWords Tutorial has been tested on Unity version 2021.3.6f1</p>
<p>This tutorial assumes you have created a blank project, and installed the FlowSDK package from the Unity Asset Store, and FlowWords Tutorial Sample.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1--configure-the-flowsdk-and-local-emulator">Step 1 – Configure the FlowSDK and local emulator<a href="#step-1--configure-the-flowsdk-and-local-emulator" class="hash-link" aria-label="Direct link to Step 1 – Configure the FlowSDK and local emulator" title="Direct link to Step 1 – Configure the FlowSDK and local emulator">​</a></h2>
<ol>
<li>
<p>Open the scene at Assets\Samples\Flow SDK\&lt;version&gt;\Flow Words Tutorial Assets\Scenes\Game.unity</p>
<p><img loading="lazy" src="/docs/assets/images/bac9d81383b8aeacab6e2f757f6c5f1c-d086b158dabde95c22c54346ccc598f0.png" alt="Open Game scene example" width="664" height="496" class="img_ev3q"></p>
</li>
<li>
<p>Open the Flow Control Manager window, at Window-&gt;Flow-&gt;Flow Control.<br>
<!-- -->This will create a Flow Control GameObject in the Game scene, and a FlowControlData asset in the Resources folder if they do not already exist.</p>
<p><img loading="lazy" src="/docs/assets/images/f8bf765df950289fd3d1b7dc8e73d545-a27934e24736ba4a48204d0c55d198c2.png" alt="Open Flow Control Manager example" width="640" height="327" class="img_ev3q"></p>
</li>
<li>
<p>Go to the Emulator Settings tab. If the manager states the Flow Executable cannot be found, use the Install button provided and follow the instructions to install the Flow CLI.<br>
<!-- -->Note: If Unity still does not detect the emulator after installing the Flow CLI, you may need to restart your computer for the install to take effect.</p>
</li>
<li>
<p>Set a directory for our Emulator data to reside in. This is where the emulator stores the state of the emulated Flow blockchain.<br>
<!-- -->For the purposes of this tutorial, we will create a new folder called FlowEmulator inside our project folder.</p>
<p><img loading="lazy" src="/docs/assets/images/4eaf391ee18bc8b70452e4495b5b317a-420221e1eeb195d0e86b77ff697204db.png" alt="Set Emulator data directory example" width="1138" height="649" class="img_ev3q"></p>
</li>
<li>
<p>Click Start Emulator to start the emulator and create the emulator_service_account, and ensure “Run emulator in play mode” is checked.</p>
<p><img loading="lazy" src="/docs/assets/images/4444607a3effafd2c5bb8430b8fade3f-026ffc9661153492fde65d620f04efe0.png" alt="Start Emulator example" width="653" height="325" class="img_ev3q"></p>
<p>NOTE: If this is the first time you have run the emulator on Windows, you may be presented with a dialog to allow access through your firewall. This is safe to allow.</p>
</li>
<li>
<p>Go to the Accounts tab and verify that the service account has been created.<br>
<!-- -->This is the account we will use to create more accounts, and deploy our game contract on to the emulator.</p>
<p><img loading="lazy" src="/docs/assets/images/6279d33bd3d9eea312ef2f9b05000dbf-fc512afad1baf7cfbc5f6a56493ea426.png" alt="Flow Control Manager Accounts final state" width="968" height="385" class="img_ev3q"></p>
</li>
<li>
<p>Back on the Emulator Settings tab, you can click Show Emulator Log, to view the output.</p>
<p><img loading="lazy" src="/docs/assets/images/d4ef2f464230b54400ff46b92f2eb01e-10b14ec55b5703397dde2377f7981d15.png" alt="Flow Emulator Output example" width="1282" height="580" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2--deploy-contracts-create-accounts-and-run-transactions">Step 2 – Deploy Contracts, create Accounts and run Transactions<a href="#step-2--deploy-contracts-create-accounts-and-run-transactions" class="hash-link" aria-label="Direct link to Step 2 – Deploy Contracts, create Accounts and run Transactions" title="Direct link to Step 2 – Deploy Contracts, create Accounts and run Transactions">​</a></h2>
<p>We have provided you with the FlowWords game contract, but before we can interact with the contract, we have to deploy it to the blockchain.</p>
<p>We also have to set up some text replacements as, once deployed, our scripts will require hardcoded references to the contract name and deployed address.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-text-replacements">Set up Text Replacements<a href="#set-up-text-replacements" class="hash-link" aria-label="Direct link to Set up Text Replacements" title="Direct link to Set up Text Replacements">​</a></h3>
<p>Text replacements allow us to set and update references across all of our local Cadence scripts, without having to update each file individually.</p>
<ol>
<li>
<p>Open the Flow Control Manager window, and navigate to the Text Replacements tab.</p>
</li>
<li>
<p>Set up the text replacements as follows. You can add text replacements by clicking the ‘+’ button at the top of the panel.</p>
<p><img loading="lazy" src="/docs/assets/images/bd9262a67638aa9c519921629e8c9075-a0a8cc9411e01f3a762249d290192fe4.png" alt="Flow Control Manager Text Replacement final state" width="980" height="622" class="img_ev3q"></p>
<p>The anatomy of a text replacement is as follows;<br>
<strong>Description</strong>: A friendly description, has no bearing on functionality.<br>
<strong>Original Text</strong>: The original text, in your script files, which you want to replace.<br>
<strong>Replacement Text</strong>: The text that you wish to replace the original text with. This is what gets submitted to the chain.<br>
<strong>Active</strong>: This checkbox enables or disables the text replacement.<br>
<strong>Apply to Accounts</strong>: Select which, if any, accounts this text replacement should apply to.<br>
<strong>Apply to Gateways</strong>: Select which, if any, gateways (such as Emulator, or TestNet) this replacement should apply to.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-user-accounts">Create User Accounts<a href="#create-user-accounts" class="hash-link" aria-label="Direct link to Create User Accounts" title="Direct link to Create User Accounts">​</a></h3>
<p>While it would be perfectly possible to play our game with the emulator service account, we will often want to test our contracts with multiple different user accounts.</p>
<p>To create a new user account;</p>
<ol>
<li>
<p>Open the Flow Control Manager window, and navigate to the Tools tab.</p>
</li>
<li>
<p>In the Create New Account section;</p>
<p><img loading="lazy" src="/docs/assets/images/aeda525491f7b1b329e57ac7d07fa997-e15450d034236043321b5af0d6fe67b8.png" alt="Flow Control Manager new account creation example" width="621" height="407" class="img_ev3q"></p>
<ol>
<li>Select the paying account. This will usually be the emulator_service_account</li>
<li>Enter a friendly name for the new account. This name is just for your own reference and does not get written to the chain.</li>
<li>Click Create</li>
</ol>
</li>
<li>
<p>If successful, the new account will appear under the Flow Control Manager Accounts tab.</p>
<p><img loading="lazy" src="/docs/assets/images/84ffa7104bc4de009c328960c1c9c6e7-5b94cfd1f59197021f95deec5500e771.png" alt="Flow Control Manager new account example final state" width="977" height="597" class="img_ev3q"></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-contract">Deploy the Contract<a href="#deploy-the-contract" class="hash-link" aria-label="Direct link to Deploy the Contract" title="Direct link to Deploy the Contract">​</a></h3>
<p>Before anyone can interact with a contract, it must be deployed to the blockchain.</p>
<p>We are going to deploy our game contract to the emulator, for local testing. But for deploying to Testnet, or Mainnet follow the same process.</p>
<ol>
<li>
<p>Go to the Emulator Settings tab, in the Flow Control Manager, and Start the Emulator if it is not already running.</p>
</li>
<li>
<p>Go to the Tools tab. In the Manage Contracts section, enter the contract name of ‘FlowWords’ – this should match our CONTRACT_NAME text replacement precisely.</p>
</li>
<li>
<p>Populate the Contract field with game-contract.cdc, which can be found in Resources/contracts</p>
<p><img loading="lazy" src="/docs/assets/images/741a3e12d817f800c2bced3c927912ba-e5ea2df5a3ec91bbdb0088fcc802d289.png" alt="Resources folder example" width="1321" height="483" class="img_ev3q"></p>
</li>
<li>
<p>Finally, ensure that the Account field contains emulator_service_account, and click the Deploy Contract button.</p>
<p><img loading="lazy" src="/docs/assets/images/ed8abd462a98bd71a9abe6a66c04d958-061884738ffa7747b2cb139408c75ee3.png" alt="Flow Control Manager contract deployment example" width="965" height="320" class="img_ev3q"></p>
</li>
<li>
<p>To check if the contract has deployed successfully, open the Flow Emulator Output window. Successful deployment will look as follows;</p>
<p><img loading="lazy" src="/docs/assets/images/0933fe23c63eedcd9ba2c4f3aac2878c-ff257662d96407b80e03de6386b6433f.png" alt="Flow Emulator Output example" width="1540" height="595" class="img_ev3q"></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="submit-transactions">Submit Transactions<a href="#submit-transactions" class="hash-link" aria-label="Direct link to Submit Transactions" title="Direct link to Submit Transactions">​</a></h3>
<p>For administration purposes, it is sometimes useful to be able to directly submit transactions to the chain.</p>
<p>We can use a transaction to check out text replacements are set up correctly, and our game contract has successfully deployed.</p>
<ol>
<li>
<p>In Flow Control Manager, navigate to tools.</p>
</li>
<li>
<p>In the Transactions section;</p>
<p><img loading="lazy" src="/docs/assets/images/2ce641e868905901df937c4dd09de105-fad7da840ff8390bfb347fa1acde7487.png" alt="Flow Control Manager contract deployment example" width="609" height="407" class="img_ev3q"></p>
<ol>
<li>
<p>Populate the Transaction field with check-contract-deployed.cdc, located in Resources/transactions</p>
<p><img loading="lazy" src="/docs/assets/images/0bc22650b47abb1cf606b2c7381a6377-bcb381f5792bdbef809133c7df9538bb.png" alt="Resources folder example" width="1101" height="367" class="img_ev3q"></p>
</li>
<li>
<p>Set the Signer field to the new Account we just created earlier. ‘Player1’</p>
</li>
<li>
<p>Click Execute Transaction</p>
</li>
</ol>
</li>
<li>
<p>If you have successfully configured the SDK and deployed the game contract, you will see the following message;</p>
<p><img loading="lazy" src="/docs/assets/images/bd9b6a0a7261d3c605aad9760a304220-d82402d5b7145f65739ffdc408c6f05a.png" alt="Flow Emulator Output example" width="1477" height="598" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3--incorporate-flow-accounts-transactions-and-scripts-into-code">Step 3 – Incorporate Flow Accounts, Transactions and Scripts into Code<a href="#step-3--incorporate-flow-accounts-transactions-and-scripts-into-code" class="hash-link" aria-label="Direct link to Step 3 – Incorporate Flow Accounts, Transactions and Scripts into Code" title="Direct link to Step 3 – Incorporate Flow Accounts, Transactions and Scripts into Code">​</a></h2>
<p>We have our SDK and emulator configured, and our game contract deployed.<br>
<!-- -->Now we are going to create the code which will allow our game to send and receive data from the blockchain.</p>
<p>Our FlowWords tutorial project contains a script called FlowInterface.cs, which can be found in the Scripts folder. This script contains all of our blockchain interfacing functions, which are called from GameManager.cs and UIManager.cs.</p>
<p>Our game FlowInterface has 5 main functions:</p>
<ul>
<li>Login</li>
<li>Logout</li>
<li>GetGameDataFromChain</li>
<li>SubmitGuess</li>
<li>LoadHighScoresFromChain</li>
</ul>
<p>Our functions are going to need to access a number of cadence scripts and transactions.<br>
<!-- -->These have been provided for you, and can be found in the Resources\scripts folder and Resources\transactions folder.</p>
<p><img loading="lazy" src="/docs/assets/images/e6a3c62a95440af5c38b47c9efa27a72-f160d56ad38953f1c2cf47a17c2e6ee7.png" alt="Resources folder example" width="1313" height="484" class="img_ev3q"></p>
<p>FlowInterface.cs has a number of Serialized TextAsset fields, which can be populated via the Unity inspector. Select the GameFlowInterface gameobject in the Game.unity scene, and populate the fields as follows, using the scripts and transactions in the aforementioned folders; (you may find these have already been populated for you)</p>
<p><img loading="lazy" src="/docs/assets/images/5569416d261ff8e9d05b53c082c8a1b1-cd201248a09bf29eb7958411e785562c.png" alt="GameFlowInterface script assignment final state example" width="854" height="723" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="login">Login<a href="#login" class="hash-link" aria-label="Direct link to Login" title="Direct link to Login">​</a></h3>
<p>Open FlowInterface.cs and find the Login function stub.</p>
<p>The Login function’s role is to take the credentials entered by the user, create a FlowControl.Account object with which we can submit transactions to the chain, and run the login.cdc transaction.</p>
<p>At the top of the file, add the following using statements to grant us easy access to the Flow SDK structures.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.Cadence;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.DataObjects;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.DevWallet;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>using Convert = DapperLabs.Flow.Sdk.Cadence.Convert;</span></div></div><br></code></div></div>
<p>Your file should now look like this:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using System;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using System.Collections;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using System.Collections.Generic;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using System.Linq;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using System.Numerics;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using System.Threading.Tasks;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using UnityEngine;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.Unity;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.Cadence;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.DataObjects;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.DevWallet;</span></div></div><div><span class="ch-code-line-number">_<!-- -->13</span><div style="display:inline-block;margin-left:16px"><span>using Convert = DapperLabs.Flow.Sdk.Cadence.Convert;</span></div></div><br></code></div></div>
<p>Uncomment the following at line 56:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>//private FlowControl.Account FLOW_ACCOUNT = null;</span></div></div><br></code></div></div>
<p>We now have to register a wallet provider with the Flow SDK. We are going to use DevWallet, which comes with the Flow SDK, and is only intended for development purposes on emulator and testnet. Add the following to the <code>Start</code> function:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// Set up SDK to access Emulator</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowConfig flowConfig = new FlowConfig()</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    NetworkUrl = &quot;http://127.0.0.1:8888/v1&quot;,  // emulator</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    Protocol = FlowConfig.NetworkProtocol.HTTP</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>};</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowSDK.Init(flowConfig);</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// Register DevWallet wallet provider with SDK</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowSDK.RegisterWalletProvider(new DevWalletProvider());</span></div></div><br></code></div></div>
<p>Your Start function should now look like this:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>private void Start()</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    if (Instance != this)</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>        Destroy(this);</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    // Set up SDK to access Emulator</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    FlowConfig flowConfig = new FlowConfig()</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>        NetworkUrl = &quot;http://127.0.0.1:8888/v1&quot;,  // emulator</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>        Protocol = FlowConfig.NetworkProtocol.HTTP</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.Init(flowConfig);</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    // Register DevWallet wallet provider with SDK</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.RegisterWalletProvider(new DevWalletProvider());</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<blockquote>
<p><strong>WARNING:</strong> Do not use DevWallet in production builds. It is only intended for development purposes and does NOT securely store keys.<br>
<!-- -->Having the Address and Private Keys to a blockchain account gives your application full access to all of that account’s funds and storage. They should be treated with extreme care.</p>
</blockquote>
<p>Next, we will fill out the body of the Login function.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>/// Attempts to log in by executing a transaction using the provided credentials</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;username&quot;&gt;An arbitrary username the player would like to be known by on the leaderboards&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onSuccessCallback&quot;&gt;Function that should be called when login is successful&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onFailureCallback&quot;&gt;Function that should be called when login fails&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>public void Login(string username, System.Action&lt;string, string&gt; onSuccessCallback, System.Action onFailureCallback)</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>    // Authenticate an account with DevWallet</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>First, we have to invoke the wallet provider to authenticate the user and get their flow address. Add the following code to the Login function;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// Authenticate an account with DevWallet</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowSDK.GetWalletProvider().Authenticate(</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    &quot;&quot;, // blank string will show list of accounts from Accounts tab of Flow Control Window</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    (string address) =&gt; onSuccessCallback(address, username), </span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback);</span></div></div><br></code></div></div>
<p>The Authenticate function takes parameters as follows;</p>
<ul>
<li>The first parameter is a username which corresponds to the name of an account in the Accounts tab. If you leave this string blank (as above), a dialog will be shown to the user to select an account from the Accounts tab.</li>
<li>The second parameter is a success callback for <code>Authenticate()</code>. We pass in a lambda function which starts a coroutine to run our async function <code>OnAuthSuccess</code>. This takes the flow address that we got from <code>Authenticate()</code>, as well as a few other parameters.</li>
<li>The third parameter is a callback for if <code>Authenticate()</code> fails. We pass through the fail callback that was passed to Login.</li>
</ul>
<p>Your completed Login function should look as follows;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>/// Attempts to log in by executing a transaction using the provided credentials</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;username&quot;&gt;An arbitrary username the player would like to be known by on the leaderboards&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onSuccessCallback&quot;&gt;Function that should be called when login is successful&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onFailureCallback&quot;&gt;Function that should be called when login fails&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>public void Login(string username, System.Action&lt;string, string&gt; onSuccessCallback, System.Action onFailureCallback)</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    // Authenticate an account with DevWallet</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    if (FlowSDK.GetWalletProvider().IsAuthenticated() == false)</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>        FlowSDK.GetWalletProvider().Authenticate(</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>            &quot;&quot;, // blank string will show list of accounts from Accounts tab of Flow Control Window</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>            (string address) =&gt; onSuccessCallback(address, username),</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>            onFailureCallback);</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->17</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Now we need to implement the <code>GetGameDataFromChain</code> function for when we successfully authenticate our user and get their flow address.<br>
<!-- -->At this point we have successfully authenticated our user, and all subsequent Scripts and Transactions will be submitted via the authenticated account.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getgamedatafromchain">GetGameDataFromChain<a href="#getgamedatafromchain" class="hash-link" aria-label="Direct link to GetGameDataFromChain" title="Direct link to GetGameDataFromChain">​</a></h3>
<p>This function executes the get-current-gamestate.cdc transaction on the chain, and then processes the emitted events to get the CurrentGameState for the logged in account, and current GameStartTime for the game of the day, which we use to show time remaining.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// Attempts to get the current game state for the user from chain.</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;username&quot;&gt;An arbitrary username the player would like to be known by on the leaderboards&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onSuccessCallback&quot;&gt;Callback on success&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onFailureCallback&quot;&gt;Callback on failure&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>public IEnumerator GetGameDataFromChain(string username, System.Action&lt;Decimal, List&lt;GuessResult&gt;, Dictionary&lt;string, string&gt;&gt; onSuccessCallback, System.Action onFailureCallback)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // get FLOW_ACCOUNT object for text replacements</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // execute getCurrentGameState transaction on chain</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // check for error. if so, break.</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // transaction success, get data from emitted events</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // process currentGameState event</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // process gameStartTime event</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    // call GameManager to set game state</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>As you will recall, we previously configured a number of text replacements.<br>
<!-- -->These are useful, and allow us to easily change some hardcoded data from a contract or transaction, such as the deploy address of the contract, from one central location without having to edit every cadence script in our project.<br>
<!-- -->Our transactions and scripts will need to access the text replacement function, which lives in the FlowControl.Account class, so we need to first create a FlowControl.Account object as follows;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// get FLOW_ACCOUNT object for text replacements</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FLOW_ACCOUNT = new FlowControl.Account</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    GatewayName = &quot;Emulator&quot;,   // the network to match</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    AccountConfig = new Dictionary&lt;string, string&gt; { { &quot;Address&quot;, FlowSDK.GetWalletProvider().GetAuthenticatedAccount().Address } } // the account address to match</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>};</span></div></div><br></code></div></div>
<p>We are about to pull down the user&#x27;s saved game data. To make processing event data easier, we have declared three classes to hold the results of events emitted by transactions:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>public class StatePayload</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    public List&lt;GuessResult&gt; currentState;</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>public class TimePayload</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    public Decimal startTime;</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>public class GuessResultPayload</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    public string result;</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Let&#x27;s compare these to the payloads for each event in the contract:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>pub event CurrentState(currentState: [UserGuess])</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>pub event LastGameStart(startTime: UFix64)</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>pub event GuessResult(result: String)</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>pub struct UserGuess</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    pub let Guess: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    pub let Result: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    init(guess: String, result: String)</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>        self.Guess = guess</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>        self.Result = result</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->14</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>When using Cadence.Convert, cadence arrays are converted into C# Lists, as shown in the StatePayload class and CurrentState event.</p>
<p>In GameManager.cs, the GuessResult class is declared as:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>public class GuessResult</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// the guess that was submitted</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    [Cadence(CadenceType = &quot;String&quot;, Name = &quot;Guess&quot;)]</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    public string word;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// A 5 letter code indicating the result and resulting color a cell should be. </span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &lt;remarks&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &quot;p&quot; = the letter at this position was in the word and in the correct (p)osition, color the cell green.</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &quot;w&quot; = the letter at this position was in the (w)ord, but in the incorrect position, color the cell yellow.</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &quot;n&quot; = the letter at this position was (n)ot in the word.</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    /// &lt;/remarks&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    [Cadence(CadenceType = &quot;String&quot;, Name = &quot;Result&quot;)]</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    public string colorMap;</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>We want the Cadence fields <code>Guess</code> and <code>Result</code> to map to the C# fields <code>word</code> and <code>colorMap</code>.  To do this, we add a Cadence attribute to each field with a <code>Name</code>
parameter that tells it which Cadence fields maps to that class field.</p>
<p>We did not have to do that with the three payload classes we defined earlier because the C# field names exactly match the Cadence field names in the contract.</p>
<p>Now that we have an Account object for text replacement, we can use it with the Transactions class to Submit our login.cdc transaction.</p>
<p>Add the following code to the GetGameDataFromChain function;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>// execute getCurrentGameState transaction on chain</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>Task&lt;FlowTransactionResult&gt; getStateTask = Transactions.SubmitAndWaitUntilExecuted(FLOW_ACCOUNT.DoTextReplacements(loginTxn.text), new CadenceString(username));</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>while (!getStateTask.IsCompleted)</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>    int dots = ((int)(Time.time * 2.0f) % 4);</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>    UIManager.Instance.SetStatus($&quot;Retrieving data from chain&quot; + new string(&#x27;.&#x27;, dots));</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>    yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->11</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Because transactions can take quite some time on chain, we create an asynchronous Task by calling SubmitAndWaitUntilExecuted from the Transactions class, to prevent blocking the main game thread.<br>
<!-- -->Into SubmitAndWaitUntilExecuted, we pass the script that we want to execute, and any parameters.</p>
<p>For our script, we refer to the serialized TextAsset field, loginTxn, to which we will assign login.cdc in the inspector.<br>
<!-- -->We pass our script into SubmitAndWaitUntilExecuted via the DoTextReplacements function on our FLOW_ACCOUNT object, which will parse the cadence script and replace any of our defined text replacements.</p>
<p>For parameters, the login.cdc script is expecting a single String parameter with the player’s display name in it. We pass in a new CadenceString object, which we create inline from the encapsulating function’s username string parameter.</p>
<p>Next, we simply wait until our asynchronous task.IsCompleted.<br>
<!-- -->While we wait, we update the UI with a simple animated ‘Connecting…’ text status, and yield to the Unity engine to prevent blocking the thread.</p>
<p>Once our transaction has completed, we want to check if it was successful on chain. Add the following code beneath the transaction submission code;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// check for error. if so, break.</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>if (getStateTask.Result.Error != null || getStateTask.Result.ErrorMessage != string.Empty || getStateTask.Result.Status == FlowTransactionStatus.EXPIRED)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Here we must check the transaction Result for three conditions:</p>
<ul>
<li>Error: Was there an error submitting the transaction to the blockchain?</li>
<li>ErrorMessage: Was there an error during processing on the blockchain?</li>
<li>Status: A status of EXPIRED means that the transaction did not execute on time and was discarded.</li>
</ul>
<p>Any error here, and we are simply going to fail the login, and call our onFailureCallback.</p>
<p>Next, we process the result of our transaction.<br>
<!-- -->This transaction is designed to return the game state for the user, and the time remaining on the word of the day, via emitted events.<br>
<!-- -->We can access these emitted events via the .Result.Events property on our task.<br>
<!-- -->To do so, add the following code below our submission logic;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// transaction success, get data from emitted events</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>List&lt;FlowEvent&gt; events = getStateTask.Result.Events;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowEvent currentStateEvent = events.Find(x =&gt; x.Type.EndsWith(&quot;.CurrentState&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowEvent startTimeEvent = events.Find(x =&gt; x.Type.EndsWith(&quot;.LastGameStart&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>if (currentStateEvent == null || startTimeEvent == null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>This chunk accesses the returned Events list, and attempts to find events ending with “.CurrentState” and “.LastGameStart”. We use .EndsWith, as the transaction returns fully qualified event names, and the name of the deployed contract may change during development.<br>
<!-- -->Finally, we check that we do indeed have both of our required events, and if not, call the onFailure callback and break.</p>
<p>Next, we will parse the contents of each event. Add the following code to the function;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>// process current game state event</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>Decimal gameStartTime = 0;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>Dictionary&lt;string, string&gt; letterStatuses = new Dictionary&lt;string, string&gt;();</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>List&lt;GuessResult&gt; results = Convert.FromCadence&lt;StatePayload&gt;(currentStateEvent.Payload).currentState;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>foreach (GuessResult newResult in results)</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>    newResult.word = newResult.word.ToUpper();</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>    for (int i = 0; i &lt; 5; i++)</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>        bool letterAlreadyExists = letterStatuses.ContainsKey(newResult.word[i].ToString());</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>        string currentStatus = letterAlreadyExists ? letterStatuses[newResult.word[i].ToString()] : &quot;&quot;;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>        switch (currentStatus)</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>            case &quot;&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                letterStatuses[newResult.word[i].ToString()] = newResult.colorMap[i].ToString();</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>            case &quot;p&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>            case &quot;w&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                if (newResult.colorMap[i] == &#x27;p&#x27;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                {</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                    letterStatuses[newResult.word[i].ToString()] = newResult.colorMap[i].ToString();</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                }</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>            case &quot;n&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                if (newResult.colorMap[i] == &#x27;p&#x27; || newResult.colorMap[i] == &#x27;w&#x27;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                {</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                    letterStatuses[newResult.word[i].ToString()] = newResult.colorMap[i].ToString();</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                }</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>                break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>// get game start time event</span></div></div><div><span class="ch-code-line-number">_<!-- -->36</span><div style="display:inline-block;margin-left:16px"><span>gameStartTime = Convert.FromCadence&lt;TimePayload&gt;(startTimeEvent.Payload).startTime;</span></div></div><br></code></div></div>
<p>From the contract, we know that the CurrentState event returns a list of <code>UserGuess</code> structs.  We want to convert these to a C# <code>List&lt;GuessResult&gt;</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>List&lt;GuessResult&gt; results = Convert.FromCadence&lt;StatePayload&gt;(currentStateEvent.Payload).currentState;</span></div></div><br></code></div></div>
<p>This converts the Payload of the currentStateEvent event into a <code>StatePayload</code> object, then sets results to the <code>currentState</code> field of that object.</p>
<p>Then, we iterate over the results list and update the letterStatuses that we display.</p>
<p>The GameStartTime event is processed similarly:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>gameStartTime = Convert.FromCadence&lt;TimePayload&gt;(startTimeEvent.Payload).startTime;</span></div></div><br></code></div></div>
<p>The startTimeEvent payload is converted into a TimePayload object and the startTime field is extracted from that.  Because the Cadence type is UFix64, we get back a C# Decimal struct.</p>
<p>Finally, we call our onSuccess callback to return our results to our caller.<br>
<!-- -->Add the following lines to the bottom of the function;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// call GameManager to set game state</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>onSuccessCallback(gameStartTime, results, letterStatuses);</span></div></div><br></code></div></div>
<p>You can now remove the <code>yield return null</code> at the base of the function if you wish.</p>
<p>Your completed function should now look like this;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>/// Attempts to get the current game state for the user from chain.</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;username&quot;&gt;An arbitrary username the player would like to be known by on the leaderboards&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onSuccessCallback&quot;&gt;Callback on success&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;param name=&quot;onFailureCallback&quot;&gt;Callback on failure&lt;/param&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>public IEnumerator GetGameDataFromChain(string username, System.Action&lt;Decimal, List&lt;GuessResult&gt;, Dictionary&lt;string, string&gt;&gt; onSuccessCallback, System.Action onFailureCallback)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // get FLOW_ACCOUNT object for text replacements</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    FLOW_ACCOUNT = new FlowControl.Account</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        GatewayName = &quot;Emulator&quot;,   // the network to match</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        AccountConfig = new Dictionary&lt;string, string&gt; { { &quot;Address&quot;, FlowSDK.GetWalletProvider().GetAuthenticatedAccount().Address } } // the account address to match</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // execute getCurrentGameState transaction on chain</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    Task&lt;FlowTransactionResult&gt; getStateTask = Transactions.SubmitAndWaitUntilExecuted(FLOW_ACCOUNT.DoTextReplacements(loginTxn.text), new CadenceString(username));</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    while (!getStateTask.IsCompleted)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        int dots = ((int)(Time.time * 2.0f) % 4);</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        UIManager.Instance.SetStatus($&quot;Retrieving data from chain&quot; + new string(&#x27;.&#x27;, dots));</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // check for error. if so, break.</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    if (getStateTask.Result.Error != null || getStateTask.Result.ErrorMessage != string.Empty || getStateTask.Result.Status == FlowTransactionStatus.EXPIRED)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // transaction success, get data from emitted events</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    List&lt;FlowEvent&gt; events = getStateTask.Result.Events;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    FlowEvent currentStateEvent = events.Find(x =&gt; x.Type.EndsWith(&quot;.CurrentState&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    FlowEvent startTimeEvent = events.Find(x =&gt; x.Type.EndsWith(&quot;.LastGameStart&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    if (currentStateEvent == null || startTimeEvent == null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // process current game state event</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    Decimal gameStartTime = 0;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    Dictionary&lt;string, string&gt; letterStatuses = new Dictionary&lt;string, string&gt;();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    List&lt;GuessResult&gt; results = Convert.FromCadence&lt;StatePayload&gt;(currentStateEvent.Payload).currentState;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    foreach (GuessResult newResult in results)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        newResult.word = newResult.word.ToUpper();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        for (int i = 0; i &lt; 5; i++)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>            bool letterAlreadyExists = letterStatuses.ContainsKey(newResult.word[i].ToString());</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>            string currentStatus = letterAlreadyExists ? letterStatuses[newResult.word[i].ToString()] : &quot;&quot;;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>            switch (currentStatus)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                case &quot;&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    letterStatuses[newResult.word[i].ToString()] = newResult.colorMap[i].ToString();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                case &quot;p&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                case &quot;w&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    if (newResult.colorMap[i] == &#x27;p&#x27;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                        letterStatuses[newResult.word[i].ToString()] = newResult.colorMap[i].ToString();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                case &quot;n&quot;:</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    if (newResult.colorMap[i] == &#x27;p&#x27; || newResult.colorMap[i] == &#x27;w&#x27;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                        letterStatuses[newResult.word[i].ToString()] = newResult.colorMap[i].ToString();</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>                    break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // get game start time event</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    gameStartTime = Convert.FromCadence&lt;TimePayload&gt;(startTimeEvent.Payload).startTime;</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    // call GameManager to set game state</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>    onSuccessCallback(gameStartTime, results, letterStatuses);</span></div></div><div><span class="ch-code-line-number">_<!-- -->85</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="logout">Logout<a href="#logout" class="hash-link" aria-label="Direct link to Logout" title="Direct link to Logout">​</a></h3>
<p>The Logout function’s role is to disconnect the authenticated wallet from your app, and to clear the FlowControl.Account object, to prevent any more transactions from being executed with those account credentials.</p>
<p>The Logout function is very simple. Simply add the following line;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FLOW_ACCOUNT = null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FlowSDK.GetWalletProvider().Unauthenticate();</span></div></div><br></code></div></div>
<p>This clears the FlowAccount object, preventing any more transactions from being submitted with it, and unauthenticates the user from the wallet provider.</p>
<p>Your completed Logout function should now look like this;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// Clear the FLOW account object</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// &lt;/summary&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>public void Logout()</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    FLOW_ACCOUNT = null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.GetWalletProvider().Unauthenticate();</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="submitguess">SubmitGuess<a href="#submitguess" class="hash-link" aria-label="Direct link to SubmitGuess" title="Direct link to SubmitGuess">​</a></h3>
<p>This function has two phases. First, it checks that the entered word is valid by submitting the check-word.cdc script to chain, and processing the returned value.</p>
<p>If the word is deemed valid, it then submits the word guess to the game contract using the currently logged in user’s credentials, by executing the submit-guess.cdc transaction script on chain, and then processing the emitted events.</p>
<p>For phase one, enter the following code at the top of the SubmitGuess function;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>// submit word via checkWord script to FLOW chain to check if word is valid</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>Task&lt;FlowScriptResponse&gt; checkWordTask = Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(checkWordScript.text), new CadenceString(word.ToLower()));</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>while (!checkWordTask.IsCompleted)</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    int dots = ((int)(Time.time * 2.0f) % 4);</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    UIManager.Instance.SetStatus(&quot;Waiting for server&quot; + new string(&#x27;.&#x27;, dots));</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>if (checkWordTask.Result.Error != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    UIManager.Instance.SetStatus(&quot;Error checking word validity.&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>bool wordValid = ((checkWordTask.Result.Value as CadenceString).Value == &quot;OK&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>if (wordValid == false)</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>    yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->23</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>This code starts by calling ExecuteAtLatestBlock, passing in the checkWordScript and our guess word as a CadenceString object, to create an async Task using our Flow Account object.</p>
<p>Scripts on Cadence can be thought of as read-only transactions, which are performed very quickly.<br>
<!-- -->Since scripts are read only, they do not require signing, and are best to use when you need to quickly get publicly available data from chain.</p>
<p>As with our previous transactions, we then wait until our task.IsCompleted, and then check for any errors in the result. With scripts we only have to check the Result.Error, as this catches all possible failure modes.</p>
<p>We then process the return value of the script, which can be found in the Result.Value property on our completed task object. Scripts do not emit events like transactions, but have return values like a regular function.<br>
<!-- -->The return value is of the generic base type CadenceBase, which we cast to CadenceString, as we are expecting a string type return value.</p>
<p>If the word guess is deemed to be invalid we call the onFailure callback and break, otherwise we proceed onto the guess submission phase.</p>
<p>For the second phase of the function, add the following code below phase one;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>// if word is valid, submit guess via transaction to FLOW chain</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>Task&lt;FlowTransactionResult&gt; submitGuessTask = Transactions.SubmitAndWaitUntilExecuted(FLOW_ACCOUNT.DoTextReplacements(submitGuessTxn.text), new CadenceString(word.ToLower()));</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>while (!submitGuessTask.IsCompleted)</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    int dots = ((int)(Time.time * 2.0f) % 4);</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    UIManager.Instance.SetStatus(&quot;Waiting for server&quot; + new string(&#x27;.&#x27;, dots));</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>if (submitGuessTask.Result.Error != null || submitGuessTask.Result.ErrorMessage != string.Empty || submitGuessTask.Result.Status == FlowTransactionStatus.EXPIRED)</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>// get wordscore</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>string wordScore = &quot;&quot;;</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>FlowEvent ourEvent = submitGuessTask.Result.Events.Find(x =&gt; x.Type.EndsWith(&quot;.GuessResult&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>if (ourEvent != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    wordScore = Convert.FromCadence&lt;GuessResultPayload&gt;(ourEvent.Payload).result;</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    // check if we are out of guesses</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    if (wordScore == &quot;OutOfGuesses&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>        UIManager.Instance.SetStatus(&quot;Out Of Guesses. Try again tomorrow.&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    // process result</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    onSuccessCallback(word, wordScore);</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>else</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->37</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>This phase begins by submitting the submit-guess.cdc transaction, passing in our guess word as a new CadenceString parameter. We then wait for the task to complete as usual, and check for any errors.<br>
<!-- -->As this is a transaction, we once again check the three possible failure modes, and call the onFailure callback if the transaction failed.</p>
<p>Next we parse our transaction’s emitted events.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>pub event GuessResult(result: String)</span></div></div><br></code></div></div>
<p>We are expecting an event called GuessResult, with a single string parameter called result.  We created a C# version of that event: <code>GuessResultPayload</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>// get wordscore</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>string wordScore = &quot;&quot;;</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>FlowEvent ourEvent = submitGuessTask.Result.Events.Find(x =&gt; x.Type.EndsWith(&quot;.GuessResult&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>if (ourEvent != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    wordScore = Convert.FromCadence&lt;GuessResultPayload&gt;(ourEvent.Payload).result;</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    // check if we are out of guesses</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    if (wordScore == &quot;OutOfGuesses&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>        UIManager.Instance.SetStatus(&quot;Out Of Guesses. Try again tomorrow.&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    // process result</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    onSuccessCallback(word, wordScore);</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>else</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>    onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->22</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>We first find our event in the Result.Events list on our task object.</p>
<p>If our event is found, we then convert the payload to a <code>GuessResultPayload</code> and store the <code>result</code> field as <code>wordScore</code>.  We then pass the guess word, and the result back to our caller via the onSuccess callback.</p>
<p>If the GuessResult event cannot be found in the Result.Events list, we call the onFailure callback.</p>
<p>Once complete, your SubmitGuess function should look like this:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>public IEnumerator SubmitGuess(string word, System.Action&lt;string, string&gt; onSuccessCallback, System.Action onFailureCallback)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    // submit word via checkWord script to FLOW chain to check if word is valid</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    Task&lt;FlowScriptResponse&gt; checkWordTask = Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(checkWordScript.text), new CadenceString(word.ToLower()));</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    while (!checkWordTask.IsCompleted)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        int dots = ((int)(Time.time * 2.0f) % 4);</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        UIManager.Instance.SetStatus(&quot;Waiting for server&quot; + new string(&#x27;.&#x27;, dots));</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    if (checkWordTask.Result.Error != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        UIManager.Instance.SetStatus(&quot;Error checking word validity.&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    bool wordValid = ((checkWordTask.Result.Value as CadenceString).Value == &quot;OK&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    if (wordValid == false)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    </span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    // if word is valid, submit guess via transaction to FLOW chain</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    Task&lt;FlowTransactionResult&gt; submitGuessTask = Transactions.SubmitAndWaitUntilExecuted(FLOW_ACCOUNT.DoTextReplacements(submitGuessTxn.text), new CadenceString(word.ToLower()));</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    while (!submitGuessTask.IsCompleted)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        int dots = ((int)(Time.time * 2.0f) % 4);</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        UIManager.Instance.SetStatus(&quot;Waiting for server&quot; + new string(&#x27;.&#x27;, dots));</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    if (submitGuessTask.Result.Error != null || submitGuessTask.Result.ErrorMessage != string.Empty || submitGuessTask.Result.Status == FlowTransactionStatus.EXPIRED)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    // get wordscore</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    string wordScore = &quot;&quot;;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    FlowEvent ourEvent = submitGuessTask.Result.Events.Find(x =&gt; x.Type.EndsWith(&quot;.GuessResult&quot;));</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    if (ourEvent != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        wordScore = Convert.FromCadence&lt;GuessResultPayload&gt;(ourEvent.Payload).result;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        // check if we are out of guesses</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        if (wordScore == &quot;OutOfGuesses&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>            onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>            UIManager.Instance.SetStatus(&quot;Out Of Guesses. Try again tomorrow.&quot;);</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>            yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        // process result</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        onSuccessCallback(word, wordScore);</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    else</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->63</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loadhighscoresfromchain">LoadHighScoresFromChain<a href="#loadhighscoresfromchain" class="hash-link" aria-label="Direct link to LoadHighScoresFromChain" title="Direct link to LoadHighScoresFromChain">​</a></h3>
<p>This function fires off a number of small scripts simultaneously, which pull publicly available high score data from the game contract on chain using;</p>
<ul>
<li>get-highscores.cdc</li>
<li>get-player-cumulativescore.cdc</li>
<li>get-player-guess-distribution.cdc</li>
<li>get-player-maxstreak.cdc</li>
<li>get-player-scores.cdc</li>
<li>get-player-streak.cdc.</li>
</ul>
<p>It then processes their returned values, and passes them out to the onSuccess call for the high scores UI to render.</p>
<p>For this function, we are going to first fire off a number of simultaneous scripts on the blockchain. This is something you want to avoid with transactions, as transaction order of execution cannot be guaranteed due to the distributed nature of blockchain, however as scripts are read-only, and do not mutate the chain, order of execution is far less likely to matter.</p>
<p>To execute the scripts, add the following code to the top of the function;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>// get player&#x27;s wallet public address</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>string playerWalletAddress = FlowSDK.GetWalletProvider().GetAuthenticatedAccount().Address;</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>// execute scripts to get highscore data</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>Dictionary&lt;string, Task&lt;FlowScriptResponse&gt;&gt; tasks = new Dictionary&lt;string, Task&lt;FlowScriptResponse&gt;&gt;();</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>tasks.Add(&quot;GetHighScores&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetHighScores.text)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>tasks.Add(&quot;GetPlayerCumulativeScore&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetPlayerCumulativeScore.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>tasks.Add(&quot;GetPlayerWinningStreak&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetPlayerWinningStreak.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>tasks.Add(&quot;GetPlayerMaxWinningStreak&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetPlayerMaxWinningStreak.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>tasks.Add(&quot;GetGuessDistribution&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetGuessDistribution.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>// wait for completion</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>bool complete = false;</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>while (!complete)</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    complete = true;</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    foreach (KeyValuePair&lt;string, Task&lt;FlowScriptResponse&gt;&gt; task in tasks)</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>        complete = complete &amp;&amp; task.Value.IsCompleted;</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>// check for errors</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>foreach (KeyValuePair&lt;string, Task&lt;FlowScriptResponse&gt;&gt; task in tasks)</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    if (task.Value.Result.Error != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>        onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>        yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->32</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>This block of code first obtains the public address of the current authenticated player and creates a <code>Dictionary&lt;string, Task&gt;</code> to store our concurrent script tasks.<br>
<!-- -->We then sequentially create async Tasks for each script that we want to execute, using ExecuteAtLatestBlock, and add them to the Task dictionary.</p>
<p>In our use case, we want all of the tasks to complete before we display any results, so our wait for completion code block iterates over every Task in the dictionary, and only moves on once every task.IsComplete.</p>
<p>Checking for errors is similarly done using a foreach loop, where every task is checked to ensure the Error field is null. If even one task has an Error, we call the onFailure callback and break.</p>
<p>Next we need to process the returned values. Add the following code beneath the previous;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>// load global highscores</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>List&lt;ScoreStruct&gt; GlobalScores = Convert.FromCadence&lt;List&lt;ScoreStruct&gt;&gt;(tasks[&quot;GetHighScores&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>GlobalScores = GlobalScores.OrderByDescending(score =&gt; score.Score).Take(10).ToList();</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>// load player scores</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>BigInteger PlayerCumulativeScore = Convert.FromCadence&lt;BigInteger&gt;(tasks[&quot;GetPlayerCumulativeScore&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>BigInteger PlayerWinningStreak = Convert.FromCadence&lt;BigInteger&gt;(tasks[&quot;GetPlayerWinningStreak&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>BigInteger PlayerMaximumWinningStreak = Convert.FromCadence&lt;BigInteger&gt;(tasks[&quot;GetPlayerMaxWinningStreak&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>List&lt;BigInteger&gt; PlayerGuessDistribution = Convert.FromCadence&lt;List&lt;BigInteger&gt;&gt;(tasks[&quot;GetGuessDistribution&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>// callback</span></div></div><div><span class="ch-code-line-number">_<!-- -->12</span><div style="display:inline-block;margin-left:16px"><span>onSuccessCallback(GlobalScores, PlayerCumulativeScore, PlayerWinningStreak, PlayerMaximumWinningStreak, PlayerGuessDistribution);</span></div></div><br></code></div></div>
<p>Our global highscores are an array of Scores objects in the contract.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(contract) let TopScores : [Scores]</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>pub struct Scores</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pub let AccId : Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pub let Name : String</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    pub let Score : UInt</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>We have a ScoreStruct defined HighScoresPanel.cs as:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>public struct ScoreStruct</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    public string Name;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    public BigInteger Score;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>List&lt;ScoreStruct&gt; GlobalScores = Convert.FromCadence&lt;List&lt;ScoreStruct&gt;&gt;(tasks[&quot;GetHighScores&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>GlobalScores = GlobalScores.OrderByDescending(score =&gt; score.Score).Take(10).ToList();</span></div></div><br></code></div></div>
<p>Here we get the result of the GetHighScores task and convert it into a <code>List&lt;ScoreStruct&gt;</code>.  Then we reorder the list and keep only the highest ten values.</p>
<p>Next, we parse the detailed statistics for the current player, using <code>Convert.FromCadence</code> to convert from the Cadence values into the C# types we want.</p>
<p>Finally, we call the onSuccess callback, passing in all of our parsed results.</p>
<p>Once complete, your function should look as follows;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>public IEnumerator LoadHighScoresFromChain(System.Action&lt;List&lt;ScoreStruct&gt;, BigInteger, BigInteger, BigInteger, List&lt;BigInteger&gt;&gt; onSuccessCallback, System.Action onFailureCallback)</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // get player&#x27;s wallet public address</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    string playerWalletAddress = FlowSDK.GetWalletProvider().GetAuthenticatedAccount().Address;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // execute scripts to get highscore data</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    Dictionary&lt;string, Task&lt;FlowScriptResponse&gt;&gt; tasks = new Dictionary&lt;string, Task&lt;FlowScriptResponse&gt;&gt;();</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    tasks.Add(&quot;GetHighScores&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetHighScores.text)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    tasks.Add(&quot;GetPlayerCumulativeScore&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetPlayerCumulativeScore.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    tasks.Add(&quot;GetPlayerWinningStreak&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetPlayerWinningStreak.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    tasks.Add(&quot;GetPlayerMaxWinningStreak&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetPlayerMaxWinningStreak.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    tasks.Add(&quot;GetGuessDistribution&quot;, Scripts.ExecuteAtLatestBlock(FLOW_ACCOUNT.DoTextReplacements(GetGuessDistribution.text), new CadenceAddress(playerWalletAddress)));</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // wait for completion</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    bool complete = false;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    while (!complete)</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        complete = true;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        foreach (KeyValuePair&lt;string, Task&lt;FlowScriptResponse&gt;&gt; task in tasks)</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>            complete = complete &amp;&amp; task.Value.IsCompleted;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // check for errors</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    foreach (KeyValuePair&lt;string, Task&lt;FlowScriptResponse&gt;&gt; task in tasks)</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        if (task.Value.Result.Error != null)</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>            onFailureCallback();</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>            yield break;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // load global highscores</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    List&lt;ScoreStruct&gt; GlobalScores = Convert.FromCadence&lt;List&lt;ScoreStruct&gt;&gt;(tasks[&quot;GetHighScores&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    GlobalScores = GlobalScores.OrderByDescending(score =&gt; score.Score).Take(10).ToList();</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // load player scores</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    BigInteger PlayerCumulativeScore = Convert.FromCadence&lt;BigInteger&gt;(tasks[&quot;GetPlayerCumulativeScore&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    BigInteger PlayerWinningStreak = Convert.FromCadence&lt;BigInteger&gt;(tasks[&quot;GetPlayerWinningStreak&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    BigInteger PlayerMaximumWinningStreak = Convert.FromCadence&lt;BigInteger&gt;(tasks[&quot;GetPlayerMaxWinningStreak&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    List&lt;BigInteger&gt; PlayerGuessDistribution = Convert.FromCadence&lt;List&lt;BigInteger&gt;&gt;(tasks[&quot;GetGuessDistribution&quot;].Result.Value);</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    // callback</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    onSuccessCallback(GlobalScores, PlayerCumulativeScore, PlayerWinningStreak, PlayerMaximumWinningStreak, PlayerGuessDistribution);</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>    yield return null;</span></div></div><div><span class="ch-code-line-number">_<!-- -->50</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-5--play-flowwords">Step 5 – Play FlowWords!<a href="#step-5--play-flowwords" class="hash-link" aria-label="Direct link to Step 5 – Play FlowWords!" title="Direct link to Step 5 – Play FlowWords!">​</a></h2>
<p>If you have correctly followed all of the steps above, you will now have a working project.</p>
<ol>
<li>Return to the Unity editor, and press the Play button.</li>
<li>Enter a friendly name - this will appear on the leaderboard.</li>
<li>Click Log In.</li>
<li>Select an account from the dialog that appears to authenticate with.</li>
</ol>
<p>You should see the login screen, say Connecting…, and then Loading…</p>
<p><img loading="lazy" src="data:image/png;base64,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" alt="Login Panel User Interface" width="830" height="506" class="img_ev3q"></p>
<p>Followed shortly thereafter by the game screen;</p>
<p><img loading="lazy" src="/docs/assets/images/8cd5f4e2d4ac66693e0c2a6f796d1b38-5fa05c51d81943caa7270e254340a21a.png" alt="Game User Interface" width="1476" height="957" class="img_ev3q"></p>
<p>And the High Scores screen (if you click the button);</p>
<p><img loading="lazy" src="/docs/assets/images/eb0fba4dbd9a040424afb3182e5ce345-41d584a20b8dc93cd4b34ccfededf874.png" alt="HighScores User Interface" width="1068" height="694" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-6--further-experimentation">Step 6 – Further Experimentation<a href="#step-6--further-experimentation" class="hash-link" aria-label="Direct link to Step 6 – Further Experimentation" title="Direct link to Step 6 – Further Experimentation">​</a></h2>
<p>For an extra challenge, try some of the following;</p>
<ul>
<li>Add more accounts and play with some friends, hot seat style</li>
<li>Modify the game-contract.cdc to make a new game every 5 minutes instead of every 24 hours.</li>
<li>Try to remove and redeploy the contract<br>
<!-- -->(hint: on testnet and mainnet, once removed, a contract’s name can never be used again on the same account)<br>
<!-- -->(extra hint: delete-game-resources.cdc)</li>
<li>Poke about in the game contracts, scripts and transactions to see what they do!</li>
</ul>
<p>If you ever get the emulator into a messy state, you can always hit the Clear Persistent Data button, which will wipe the emulator back to its blank state. This will of course lose all deployed contracts and high score and game history.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix--how-to-convert-flowwords-to-run-on-testnet">Appendix – How to convert FlowWords to run on TestNet<a href="#appendix--how-to-convert-flowwords-to-run-on-testnet" class="hash-link" aria-label="Direct link to Appendix – How to convert FlowWords to run on TestNet" title="Direct link to Appendix – How to convert FlowWords to run on TestNet">​</a></h2>
<p>To modify the tutorial project to run on TestNet, only minor modifications are required.</p>
<ol>
<li>Change the network configuration to point to TestNet</li>
<li>Replace the DevWallet provider with a more secure solution. e.g. WalletConnect</li>
<li>Configure Account and update Text Replacements</li>
<li>Deploy the contract to TestNet</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-the-network-configuration-to-testnet">Change the network configuration to TestNet<a href="#change-the-network-configuration-to-testnet" class="hash-link" aria-label="Direct link to Change the network configuration to TestNet" title="Direct link to Change the network configuration to TestNet">​</a></h3>
<p>To change the network configuration, simply modify the start function as follows;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>private void Start()</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    if (Instance != this)</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>        Destroy(this);</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    // Set up SDK to access TestNet</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    FlowConfig flowConfig = new FlowConfig()</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>        NetworkUrl = &quot;https://rest-testnet.onflow.org/v1&quot;,  // testnet</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>        Protocol = FlowConfig.NetworkProtocol.HTTP</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.Init(flowConfig);</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    // Register DevWallet wallet provider with SDK</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.RegisterWalletProvider(new DevWalletProvider());</span></div></div><div><span class="ch-code-line-number">_<!-- -->18</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>We have now replaced the emulator address with the address for the TestNet access point, and all subsequent transactions and scripts will be directed to TestNet.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="replace-devwallet-with-walletconnect">Replace DevWallet with WalletConnect<a href="#replace-devwallet-with-walletconnect" class="hash-link" aria-label="Direct link to Replace DevWallet with WalletConnect" title="Direct link to Replace DevWallet with WalletConnect">​</a></h3>
<p>To now change the wallet provider, simply modify the start function as follows;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>private void Start()</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    if (Instance != this)</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        Destroy(this);</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    // Set up SDK to access TestNet</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    FlowConfig flowConfig = new FlowConfig()</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        NetworkUrl = &quot;https://rest-testnet.onflow.org/v1&quot;,  // testnet</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        Protocol = FlowConfig.NetworkProtocol.HTTP</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    };</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.Init(flowConfig);</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    // Create WalletConnect wallet provider</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    IWallet walletProvider = new WalletConnectProvider();</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    walletProvider.Init(new WalletConnectConfig</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        ProjectId = &quot;&lt;YOUR PROJECT ID&gt;&quot;, // insert Project ID from Wallet Connect dashboard</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        ProjectDescription = &quot;A simple word guessing game built on FLOW!&quot;,</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        ProjectIconUrl = &quot;https://walletconnect.com/meta/favicon.ico&quot;,</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        ProjectName = &quot;FlowWords&quot;,</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>        ProjectUrl = &quot;https://dapperlabs.com&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    });</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    // Register WalletConnect wallet provider with SDK</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>    FlowSDK.RegisterWalletProvider(walletProvider);</span></div></div><div><span class="ch-code-line-number">_<!-- -->29</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>You will also need to add the following using declarations to the top of the file;</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.WalletConnect;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>using DapperLabs.Flow.Sdk.Crypto;</span></div></div><br></code></div></div>
<p>For this modification we have created a new WalletConnectProvider, and initialized it, and then registered our new WalletConnectProvider.</p>
<p>The only thing missing is a Project Id.<br>
<!-- -->Each WalletConnect application requires its own project id. You can get one by going to <a href="https://cloud.walletconnect.com" target="_blank" rel="noopener noreferrer">https://cloud.walletconnect.com</a> and signing up for an account.<br>
<!-- -->You can then create a new project on the website, give it a name (we suggest FlowWords), and enter the project id provided into your code.</p>
<p>Finally, we need one more change to make sure our text replacement still functions correctly.</p>
<p>At the beginning of the OnAuthSuccess function, change the FLOW_ACCOUNT GatewayName from &quot;Emulator&quot; to &quot;Flow Testnet&quot;.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>// get FLOW account - we are only going to use this for text replacements</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>FLOW_ACCOUNT = new FlowControl.Account</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    GatewayName = &quot;Flow Testnet&quot;,</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    AccountConfig = new Dictionary&lt;string, string&gt; { { &quot;Address&quot;, FlowSDK.GetWalletProvider().GetAuthenticatedAccount().Address } }</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>};</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-account-and-update-text-replacements">Configure Account and update Text Replacements<a href="#configure-account-and-update-text-replacements" class="hash-link" aria-label="Direct link to Configure Account and update Text Replacements" title="Direct link to Configure Account and update Text Replacements">​</a></h3>
<p>To deploy the contract to TestNet, the only current way to do so via the FlowSDK, is to use a TestNet account to which you know the private key.</p>
<p>First, in the Accounts tab of the Flow Control window, create a new account by clicking the plus &#x27;+&#x27; icon at the top of the window.<br>
<!-- -->Create the new account as follows, replacing the Address and Private Key with your own valid TestNet address / private key pair.</p>
<p><img loading="lazy" src="/docs/assets/images/AppendixNewAccount-16fd6abad1df5f32519ca7909621b0a7.png" alt="New Account Example" width="855" height="229" class="img_ev3q"></p>
<p>Switch to the Text Replacements tab of the Flow Control window now, and create a new text replacement definition as follows, replacing the given replacement text with the address to your TestNet account.</p>
<p><img loading="lazy" src="/docs/assets/images/AppendixTextReplacement-5b428d16fd271cd99d290e4cfa1cdd9f.png" alt="New Text Replacement Example" width="850" height="249" class="img_ev3q"></p>
<p>Now modify the existing CONTRACT_NAME text replacement, by changing the Apply to Gateways field from Emulator, to All. This will make sure this replacement also applies to TestNet transactions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-contract-to-testnet">Deploy the Contract to TestNet<a href="#deploy-the-contract-to-testnet" class="hash-link" aria-label="Direct link to Deploy the Contract to TestNet" title="Direct link to Deploy the Contract to TestNet">​</a></h3>
<p>Now that all of the configuration is done, you can deploy the contract.</p>
<p>On the Tools tab of the Flow Control window, set up the Manage Contracts section as follows;</p>
<p><img loading="lazy" src="/docs/assets/images/AppendixDeployContract-12743431f634534c6daa2ffd01702d6d.png" alt="New Account Example" width="943" height="276" class="img_ev3q"></p>
<p>Where;</p>
<ul>
<li>Contract Name is the name of the contract on the blockchain. This should match the text replacement configured for CONTRACT_NAME</li>
<li>Contract is the game-contract.cdc asset included with the project sample in the Assets\Samples\Flow SDK\&lt;version&gt;\Flow Words Tutorial Assets\Resources directory.</li>
<li>Account is the new Deploy Account that you created in the previous step.</li>
</ul>
<p>Once you have the Manage Contracts section filled in as per the example, click Deploy Contract.</p>
<p>If all goes well, you will see the text &#x27;Executing Transaction&#x27; appear below the Deploy Contract button, followed by a clickable link to the transaction result on flowscan.</p>
<p>Congratulations! You can now run FlowWords, and play the game with a WalletConnect compatible wallet!</p>
<blockquote>
<p><strong>NOTE:</strong> TestNet requires that all contracts deployed to an account have a unique name, does not allow contract removal without authorisation, and only allows contract updates that do not break interfaces or data structures or introduce undefined data to existing resources.<br>
<br>
<!-- -->Due to these limitations, iterative development should always be done on Emulator before attempting to push anything to a live network.</p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/tooling/unity-sdk/samples/flow-words-tutorial.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-30T19:10:09.000Z">Aug 30, 2023</time></b> by <b>darkdrag00nv2</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tooling/unity-sdk/samples/flow-words-sample"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Flow Unity SDK - FlowWords Sample</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tooling/unity-sdk/samples/nft-browser"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simple NFT Viewer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#outline" class="table-of-contents__link toc-highlight">Outline</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#step-1--configure-the-flowsdk-and-local-emulator" class="table-of-contents__link toc-highlight">Step 1 – Configure the FlowSDK and local emulator</a></li><li><a href="#step-2--deploy-contracts-create-accounts-and-run-transactions" class="table-of-contents__link toc-highlight">Step 2 – Deploy Contracts, create Accounts and run Transactions</a><ul><li><a href="#set-up-text-replacements" class="table-of-contents__link toc-highlight">Set up Text Replacements</a></li><li><a href="#create-user-accounts" class="table-of-contents__link toc-highlight">Create User Accounts</a></li><li><a href="#deploy-the-contract" class="table-of-contents__link toc-highlight">Deploy the Contract</a></li><li><a href="#submit-transactions" class="table-of-contents__link toc-highlight">Submit Transactions</a></li></ul></li><li><a href="#step-3--incorporate-flow-accounts-transactions-and-scripts-into-code" class="table-of-contents__link toc-highlight">Step 3 – Incorporate Flow Accounts, Transactions and Scripts into Code</a><ul><li><a href="#login" class="table-of-contents__link toc-highlight">Login</a></li><li><a href="#getgamedatafromchain" class="table-of-contents__link toc-highlight">GetGameDataFromChain</a></li><li><a href="#logout" class="table-of-contents__link toc-highlight">Logout</a></li><li><a href="#submitguess" class="table-of-contents__link toc-highlight">SubmitGuess</a></li><li><a href="#loadhighscoresfromchain" class="table-of-contents__link toc-highlight">LoadHighScoresFromChain</a></li></ul></li><li><a href="#step-5--play-flowwords" class="table-of-contents__link toc-highlight">Step 5 – Play FlowWords!</a></li><li><a href="#step-6--further-experimentation" class="table-of-contents__link toc-highlight">Step 6 – Further Experimentation</a></li><li><a href="#appendix--how-to-convert-flowwords-to-run-on-testnet" class="table-of-contents__link toc-highlight">Appendix – How to convert FlowWords to run on TestNet</a><ul><li><a href="#change-the-network-configuration-to-testnet" class="table-of-contents__link toc-highlight">Change the network configuration to TestNet</a></li><li><a href="#replace-devwallet-with-walletconnect" class="table-of-contents__link toc-highlight">Replace DevWallet with WalletConnect</a></li><li><a href="#configure-account-and-update-text-replacements" class="table-of-contents__link toc-highlight">Configure Account and update Text Replacements</a></li><li><a href="#deploy-the-contract-to-testnet" class="table-of-contents__link toc-highlight">Deploy the Contract to TestNet</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn">Learning Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/intro">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/mobile">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/clients/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/kitty-items">Kitty Items</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial/first-steps">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.133774f2.js"></script>
<script src="/docs/assets/js/main.46ae4a71.js"></script>
</body>
</html>