"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3528],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>g});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var i=n.createContext({}),p=function(t){var e=n.useContext(i),a=e;return t&&(a="function"==typeof t?t(e):s(s({},e),t)),a},d=function(t){var e=p(t.components);return n.createElement(i.Provider,{value:e},t.children)},m="mdxType",c={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,i=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),m=p(a),u=r,g=m["".concat(i,".").concat(u)]||m[u]||c[u]||l;return a?n.createElement(g,s(s({ref:e},d),{},{components:a})):n.createElement(g,s({ref:e},d))}));function g(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,s=new Array(l);s[0]=u;var o={};for(var i in e)hasOwnProperty.call(e,i)&&(o[i]=e[i]);o.originalType=t,o[m]="string"==typeof t?t:r,s[1]=o;for(var p=2;p<l;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},60249:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>i,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const l={title:"Template Code",sidebar_title:"Templates",description:"How to manage load Cadence template code"},s=void 0,o={unversionedId:"tools/flow-js-testing/templates",id:"tools/flow-js-testing/templates",title:"Template Code",description:"How to manage load Cadence template code",source:"@site/docs/tools/flow-js-testing/templates.md",sourceDirName:"tools/flow-js-testing",slug:"/tools/flow-js-testing/templates",permalink:"/tools/flow-js-testing/templates",draft:!1,tags:[],version:"current",lastUpdatedBy:"Tom Haile",lastUpdatedAt:1682618171,formattedLastUpdatedAt:"Apr 27, 2023",frontMatter:{title:"Template Code",sidebar_title:"Templates",description:"How to manage load Cadence template code"},sidebar:"tutorialSidebar",previous:{title:"Folder Structure",permalink:"/tools/flow-js-testing/structure"},next:{title:"types",permalink:"/tools/flow-js-testing/types"}},i={},p=[{value:"<code>getTemplate(file, addressMap, byAddress)</code>",id:"gettemplatefile-addressmap-byaddress",level:2},{value:"Returns",id:"returns",level:4},{value:"Usage",id:"usage",level:4},{value:"<code>getContractCode(name, addressMap)</code>",id:"getcontractcodename-addressmap",level:2},{value:"Arguments",id:"arguments",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Usage",id:"usage-1",level:4},{value:"<code>getTransactionCode(name, addressMap)</code>",id:"gettransactioncodename-addressmap",level:2},{value:"Arguments",id:"arguments-1",level:4},{value:"Returns",id:"returns-2",level:4},{value:"Usage",id:"usage-2",level:4},{value:"<code>getScriptCode(name, addressMap)</code>",id:"getscriptcodename-addressmap",level:2},{value:"Arguments",id:"arguments-2",level:4},{value:"Returns",id:"returns-3",level:4},{value:"Usage",id:"usage-3",level:4},{value:"Examples",id:"examples",level:2}],d={toc:p},m="wrapper";function c(t){let{components:e,...a}=t;return(0,r.kt)(m,(0,n.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Flow JS Testing Framework is essentially a set of helper methods. They can be used in an\nopinionated way, envisioned by Flow Team. Or they can work as building blocks, allowing developers to build their own\ntesting solution as they see fit. Following methods used inside other framework methods, but we feel encouraged to list\nthem here as well."),(0,r.kt)("h2",{id:"gettemplatefile-addressmap-byaddress"},(0,r.kt)("inlineCode",{parentName:"h2"},"getTemplate(file, addressMap, byAddress)")),(0,r.kt)("p",null,"Returns Cadence template as string with addresses replaced using addressMap"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Optional"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"file")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"relative (to the place from where the script was called) or absolute path to the file containing the code")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"addressMap")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/tools/flow-js-testing/api#addressmap"},"AddressMap")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"object to use for address mapping of existing deployed contracts. Default: ",(0,r.kt)("inlineCode",{parentName:"td"},"{}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"byAddress")),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"whether addressMap is ",(0,r.kt)("inlineCode",{parentName:"td"},"{name:address}")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"{address:address}")," type. Default: ",(0,r.kt)("inlineCode",{parentName:"td"},"false"))))),(0,r.kt)("h4",{id:"returns"},"Returns"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"content of a specified file")))),(0,r.kt)("h4",{id:"usage"},"Usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import path from "path"\nimport {init, getTemplate} from "@onflow/flow-js-testing"\n\nconst main = async () => {\n  const basePath = path.resolve(__dirname, "../cadence")\n  init(basePath)\n\n  const template = await getTemplate("../cadence/scripts/get-name.cdc")\n  console.log({template})\n}\n\nmain()\n')),(0,r.kt)("h2",{id:"getcontractcodename-addressmap"},(0,r.kt)("inlineCode",{parentName:"h2"},"getContractCode(name, addressMap)")),(0,r.kt)("p",null,"Returns Cadence template from file with ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"_basepath_/contracts")," folder"),(0,r.kt)("h4",{id:"arguments"},"Arguments"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Optional"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"name of the contract template")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"addressMap")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/tools/flow-js-testing/api#addressmap"},"AddressMap")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"object to use for address mapping of existing deployed contracts")))),(0,r.kt)("h4",{id:"returns-1"},"Returns"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Cadence template code for specified contract")))),(0,r.kt)("h4",{id:"usage-1"},"Usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import path from "path"\nimport {init, emulator, getContractCode} from "@onflow/flow-js-testing"\n\nconst main = async () => {\n  const basePath = path.resolve(__dirname, "../cadence")\n\n  await init(basePath)\n  await emulator.start()\n\n  // Let\'s assume we need to import MessageContract\n  await deployContractByName({name: "MessageContract"})\n  const MessageContract = await getContractAddress("MessageContract")\n  const addressMap = {MessageContract}\n\n  const contractTemplate = await getContractCode("HelloWorld", {\n    MessageContract,\n  })\n  console.log({contractTemplate})\n\n  await emulator.stop()\n}\n\nmain()\n')),(0,r.kt)("h2",{id:"gettransactioncodename-addressmap"},(0,r.kt)("inlineCode",{parentName:"h2"},"getTransactionCode(name, addressMap)")),(0,r.kt)("p",null,"Returns Cadence template from file with ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"_basepath_/transactions")," folder"),(0,r.kt)("h4",{id:"arguments-1"},"Arguments"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Optional"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"name of the transaction template")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"addressMap")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/tools/flow-js-testing/api#addressmap"},"AddressMap")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"object to use for address mapping of existing deployed contracts")))),(0,r.kt)("h4",{id:"returns-2"},"Returns"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Cadence template code for specified transaction")))),(0,r.kt)("h4",{id:"usage-2"},"Usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import path from "path"\nimport {init, emulator, getTransactionCode} from "@onflow/flow-js-testing"\n\nconst main = async () => {\n  const basePath = path.resolve(__dirname, "../cadence")\n\n  await init(basePath)\n  await emulator.start()\n\n  // Let\'s assume we need to import MessageContract\n  await deployContractByName({name: "MessageContract"})\n  const MessageContract = await getContractAddress("MessageContract")\n  const addressMap = {MessageContract}\n\n  const txTemplate = await getTransactionCode({\n    name: "set-message",\n    addressMap,\n  })\n  console.log({txTemplate})\n\n  await emulator.stop()\n}\n\nmain()\n')),(0,r.kt)("h2",{id:"getscriptcodename-addressmap"},(0,r.kt)("inlineCode",{parentName:"h2"},"getScriptCode(name, addressMap)")),(0,r.kt)("p",null,"Returns Cadence template from file with ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"_basepath_/scripts")," folder"),(0,r.kt)("h4",{id:"arguments-2"},"Arguments"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Optional"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"name of the script template")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"addressMap")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/tools/flow-js-testing/api#addressmap"},"AddressMap")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"object to use for address mapping of existing deployed contracts")))),(0,r.kt)("h4",{id:"returns-3"},"Returns"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Cadence template code for specified script")))),(0,r.kt)("h4",{id:"usage-3"},"Usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import path from "path"\nimport {init, emulator, getScriptCode} from "@onflow/flow-js-testing"\n\nconst main = async () => {\n  const basePath = path.resolve(__dirname, "../cadence")\n\n  await init(basePath)\n  await emulator.start()\n\n  // Let\'s assume we need to import MessageContract\n  await deployContractByName({name: "MessageContract"})\n  const MessageContract = await getContractAddress("MessageContract")\n  const addressMap = {MessageContract}\n\n  const scriptTemplate = await getScriptCode({\n    name: "get-message",\n    addressMap,\n  })\n\n  console.log({scriptTemplate})\n  await emulator.stop()\n}\n\nmain()\n')),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"If you don't have any contract dependencies, you can use those methods without specifying address map as second parameter."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import path from "path"\nimport {\n  init,\n  getContractCode,\n  getTransactionCode,\n  getScriptCode,\n} from "@onflow/flow-js-testing"\n\nconst main = async () => {\n  const basePath = path.resolve(__dirname, "../cadence")\n  await init(basePath)\n\n  const contractWallet = await getContractCode({name: "Wallet"})\n  const txGetCapability = await getTransactionCode({name: "get-capability"})\n  const scriptGetBalance = await getScriptCode({name: "get-balance"})\n\n  console.log({contractWallet, txGetCapability, scriptGetBalance})\n}\nmain()\n')))}c.isMDXComponent=!0}}]);