"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[88584],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),k=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=k(e.components);return a.createElement(d.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=k(n),u=r,c=p["".concat(d,".").concat(u)]||p[u]||h[u]||o;return n?a.createElement(c,i(i({ref:t},s),{},{components:n})):a.createElement(c,i({ref:t},s))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var k=2;k<o;k++)i[k]=n[k];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},47813:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>k});var a=n(87462),r=(n(67294),n(3905));const o={title:"How to Stake Locked FLOW with a Third-Party Node Operator",sidebar_title:"Stake with a Third-Party Operator"},i=void 0,l={unversionedId:"nodes/staking/locked-third-party-operator",id:"version-legacy/nodes/staking/locked-third-party-operator",title:"How to Stake Locked FLOW with a Third-Party Node Operator",description:"Introduction",source:"@site/versioned_docs/version-legacy/nodes/staking/locked-third-party-operator.mdx",sourceDirName:"nodes/staking",slug:"/nodes/staking/locked-third-party-operator",permalink:"/docs/nodes/staking/locked-third-party-operator",draft:!1,tags:[],version:"legacy",lastUpdatedBy:"Alex",lastUpdatedAt:1683049658,formattedLastUpdatedAt:"May 2, 2023",frontMatter:{title:"How to Stake Locked FLOW with a Third-Party Node Operator",sidebar_title:"Stake with a Third-Party Operator"},sidebar:"tutorialSidebar",previous:{title:"How to Stake with Locked FLOW",permalink:"/docs/nodes/staking/locked-staking-guide"},next:{title:"Machine Account",permalink:"/docs/nodes/staking/machine-account"}},d={},k=[{value:"Introduction",id:"introduction",level:2},{value:"Direct Staking",id:"direct-staking",level:2},{value:"Indirect Staking",id:"indirect-staking",level:2},{value:"Operator Setup",id:"operator-setup",level:3},{value:"1. Configure a node operator account",id:"1-configure-a-node-operator-account",level:3},{value:"2. Create a new <code>NodeInfo</code> entry",id:"2-create-a-new-nodeinfo-entry",level:3},{value:"3. Send the new node ID to the token holder",id:"3-send-the-new-node-id-to-the-token-holder",level:3},{value:"4. Confirm staking access with token holder",id:"4-confirm-staking-access-with-token-holder",level:3},{value:"Token Holder Setup",id:"token-holder-setup",level:2},{value:"1. Fetch node operator information",id:"1-fetch-node-operator-information",level:3},{value:"2. Register node &amp; grant staking access to the node operator",id:"2-register-node--grant-staking-access-to-the-node-operator",level:3},{value:"Staking Actions",id:"staking-actions",level:2},{value:"Stake New Tokens",id:"stake-new-tokens",level:3},{value:"Re-Stake Unstaked Tokens",id:"re-stake-unstaked-tokens",level:3},{value:"Unstake Tokens",id:"unstake-tokens",level:3},{value:"Withdraw Unstaked Tokens",id:"withdraw-unstaked-tokens",level:3},{value:"Withdraw Rewarded Tokens",id:"withdraw-rewarded-tokens",level:3},{value:"Teardown",id:"teardown",level:2},{value:"Remove <code>NodeInfo</code> Entry",id:"remove-nodeinfo-entry",level:3}],s={toc:k},p="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Whether it is through a friend or a hosted node provider,\nsome Flow token holders may wish to stake a node that is being operated by another party.\nThis document outlines two methods for staking locked FLOW with a third-party operator,\nthe main difference being the level of control given to the operator."),(0,r.kt)("h2",{id:"direct-staking"},"Direct Staking"),(0,r.kt)("p",null,"The direct staking method is the simplest to implement and allows the token holder\nto retain full control of their tokens. In this method, the node operator is responsible\nfor creating and managing the node infrastructure, but does not control any tokens\nor initiate any staking actions."),(0,r.kt)("p",null,"This form of staking relationship can be implemented in several ways. The steps below\nprovide an outline for one possible approach, but it is not the only approach."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The node operator ",(0,r.kt)("a",{parentName:"li",href:"/nodes/node-operation/node-bootstrap/"},"bootstraps a new node record"),"\nand sends the node information to the token holder."),(0,r.kt)("li",{parentName:"ol"},"The token holder uses this node information to register the node with the central staking contract.\nThis can be done in one of two ways:")),(0,r.kt)("p",null,"a) The token holder manually ",(0,r.kt)("a",{parentName:"p",href:"../locked-staking-guide/#setup"},"submits a transaction to register a new node"),"."),(0,r.kt)("p",null,"b) The token holder registers the node using the Flow Port."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The node operator should then ensure that the node is live and running before the epoch starts."),(0,r.kt)("li",{parentName:"ol"},"Once the epoch starts, the token holder is free to manage their stake through the Flow Port or\nmanually by following the ",(0,r.kt)("a",{parentName:"li",href:"../locked-staking-guide/#staking-actions"},"staking guide"),".")),(0,r.kt)("h2",{id:"indirect-staking"},"Indirect Staking"),(0,r.kt)("p",null,"This section covers the technical integration required for a ",(0,r.kt)("strong",{parentName:"p"},"node operator (NO)")," to operate\na staked Flow node using locked FLOW provided by a ",(0,r.kt)("strong",{parentName:"p"},"token holder (TH)"),". This relationship\nis facilitated by the ",(0,r.kt)("inlineCode",{parentName:"p"},"StakingProxy")," contract."),(0,r.kt)("p",null,"Both parties have separate roles in this relationship:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Node Operator:")," Manages the node infrastructure but ",(0,r.kt)("em",{parentName:"li"},"does not hold")," any FLOW tokens."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Token Holder:")," Provides restricted, indirect access to their FLOW tokens for the sole purpose of staking.")),(0,r.kt)("p",null,"This guide assumes that the node operator and token holder have already\nestablished a trusted off-chain relationship."),(0,r.kt)("h3",{id:"operator-setup"},"Operator Setup"),(0,r.kt)("p",null,"These are the steps that a ",(0,r.kt)("strong",{parentName:"p"},"node operator")," must take in order to accept\nstaking access granted by a token holder."),(0,r.kt)("h3",{id:"1-configure-a-node-operator-account"},"1. Configure a node operator account"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note: this step can be skipped if the node operator has already configured their account.")),(0,r.kt)("p",null,"Before the node operator can begin running nodes on behalf of token holders,\nthey must configure their account. This account is referred to as the operator account."),(0,r.kt)("p",null,"The operator account will hold the staking capabilities for all token holders."),(0,r.kt)("p",null,"The node operator can configure their account with the ",(0,r.kt)("strong",{parentName:"p"},"Set Up Operator Account"),"\n(",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.01"),") transaction.\nThis transaction must be authorized by an existing account that the token holder wishes\nto use as its operator account."),(0,r.kt)("h3",{id:"2-create-a-new-nodeinfo-entry"},"2. Create a new ",(0,r.kt)("inlineCode",{parentName:"h3"},"NodeInfo")," entry"),(0,r.kt)("p",null,"When a token holder asks a node operator to run a node for them,\nthe first step is for the node operator to provision a new node\nand create the staking and networking key-pairs."),(0,r.kt)("p",null,"After this is done, the node operator creates a ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," entry and adds it to the\noperator account with the ",(0,r.kt)("strong",{parentName:"p"},"Add Node Info"),"\n(",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.02"),") transaction."),(0,r.kt)("p",null,"This transaction takes the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The ID of the new node. It must be a 32 byte ",(0,r.kt)("inlineCode",{parentName:"td"},"String"),". The operator is free to choose this value, but it must be unique across all nodes. A recommended process to generate this is to hash the staking public key.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"role")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UInt8")),(0,r.kt)("td",{parentName:"tr",align:null},"The role of the new node. (1: collection, 2: consensus, 3: execution, 4: verification, 5: access)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"networkingAddress")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The IP address of the new node.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"networkingKey")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The networking public key as a hex-encoded string.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"stakingKey")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The staking public key as a hex-encoded string.")))),(0,r.kt)("h3",{id:"3-send-the-new-node-id-to-the-token-holder"},"3. Send the new node ID to the token holder"),(0,r.kt)("p",null,"After the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," object has been created,\nthe token holder must provide the following information to the token holder:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nodeID")," - The ID of the new node."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"operatorAddress")," - The Flow address of the operator account.")),(0,r.kt)("p",null,"The token holder will use this information to grant staking access to the node operator."),(0,r.kt)("h3",{id:"4-confirm-staking-access-with-token-holder"},"4. Confirm staking access with token holder"),(0,r.kt)("p",null,"After the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," object has been created and published,\nthe token holder uses it to initiate a staking registration.\nAfter this, the token holder passes a ",(0,r.kt)("inlineCode",{parentName:"p"},"StakingProxy.NodeStakerProxy"),"\ncapability to the node operator that allows them to perform staking operations."),(0,r.kt)("p",null,"The node operator should confirm that they have access to this capability."),(0,r.kt)("h2",{id:"token-holder-setup"},"Token Holder Setup"),(0,r.kt)("p",null,"These are the steps that a token holder must take in order to grant staking access\nto a node operator via the ",(0,r.kt)("inlineCode",{parentName:"p"},"StakingProxy")," contract."),(0,r.kt)("h3",{id:"1-fetch-node-operator-information"},"1. Fetch node operator information"),(0,r.kt)("p",null,"After a node operator has agreed to run a node for you,\nthey will create a ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," object holding the IP address and public keys for your new node.\nThis ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," object will be stored in an account owned by the node operator (operator account)."),(0,r.kt)("p",null,"The node operator should provide you with their operator account ",(0,r.kt)("inlineCode",{parentName:"p"},"address")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeID")," for your new node.\nThese values can be passed into the ",(0,r.kt)("strong",{parentName:"p"},"Get Operator Node Info")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#token-holder"},"TH.15"),")\nscript to confirm your node information:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"account")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Address")),(0,r.kt)("td",{parentName:"tr",align:null},"The address of the node operator's account.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique ID of the node.")))),(0,r.kt)("p",null,"This script returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"StakingProxy.NodeInfo")," struct containing the details for the node.\nIf no ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," is available, the script will fail."),(0,r.kt)("p",null,"If this node information is correct, continue to step 2."),(0,r.kt)("h3",{id:"2-register-node--grant-staking-access-to-the-node-operator"},"2. Register node & grant staking access to the node operator"),(0,r.kt)("p",null,"After confirming that the node information is correct, the token holder can register the\nnode with the central staking contract by using the using the ",(0,r.kt)("strong",{parentName:"p"},"Register Node")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#token-holder"},"TH.16"),") transaction\nwith the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Address")),(0,r.kt)("td",{parentName:"tr",align:null},"The node operator address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique ID of the node (from ",(0,r.kt)("inlineCode",{parentName:"td"},"NodeInfo"),").")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UFix64")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of FLOW tokens to stake.")))),(0,r.kt)("p",null,"This transaction fetches the node info from the operator account, registers the node\nin the central staking contract, and creates a ",(0,r.kt)("inlineCode",{parentName:"p"},"StakingProxy.NodeStakerProxy"),"\ncapability to pass to the node operator, who will be able to use it to perform\nstaking actions on behalf of the token holder. The token holder retains control\nof the main staking capability and still has full control to manage their own staking\nactions as well."),(0,r.kt)("h2",{id:"staking-actions"},"Staking Actions"),(0,r.kt)("h3",{id:"stake-new-tokens"},"Stake New Tokens"),(0,r.kt)("p",null,"The node operator can stake additional tokens on behalf of the token holder at any time."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note: This transaction stakes additional tokens to the same node that was registered in the setup phase.\nIt is currently not possible to stake to multiple nodes from the same account.")),(0,r.kt)("p",null,"To stake new tokens via the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeStakerProxy"),",\nthe node operator can use the ",(0,r.kt)("strong",{parentName:"p"},"Stake New Locked FLOW")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.05"),")\ntransaction with the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the node.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UFix64")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of FLOW tokens to stake.")))),(0,r.kt)("h3",{id:"re-stake-unstaked-tokens"},"Re-Stake Unstaked Tokens"),(0,r.kt)("p",null,"After tokens become unstaked, the node operator can choose to re-stake the unstaked tokens to the same node."),(0,r.kt)("p",null,"To staked unstaked tokens via the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeStakerProxy"),",\nthe node operator can use the ",(0,r.kt)("strong",{parentName:"p"},"Re-stake Unstaked FLOW")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.06"),")\ntransaction with the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the node.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UFix64")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of FLOW tokens to stake.")))),(0,r.kt)("h3",{id:"unstake-tokens"},"Unstake Tokens"),(0,r.kt)("p",null,"The node operator can submit a request to unstake the token holder's staked tokens at any time."),(0,r.kt)("p",null,"To unstake staked tokens via the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeStakerProxy"),",\nthe node operator can use the ",(0,r.kt)("strong",{parentName:"p"},"Unstake FLOW")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.07"),")\ntransaction with the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the node.")))),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note: Unstaked tokens will be held by the central staking contract for a period of time before they are\nreleased to the token holder. Once the tokens are released (unstaked),\nthey can be claimed via the ",(0,r.kt)("a",{parentName:"em",href:"#withdraw-unstaked-tokens"},"Withdraw Unstaked Tokens")," action below.")),(0,r.kt)("h3",{id:"withdraw-unstaked-tokens"},"Withdraw Unstaked Tokens"),(0,r.kt)("p",null,"After tokens become unstaked, the node operator can withdraw them from the central staking contract\non behalf of the token holder."),(0,r.kt)("p",null,"To withdraw unstaked tokens via the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeStakerProxy"),",\nthe node operator can use the ",(0,r.kt)("strong",{parentName:"p"},"Withdraw Unstaked FLOW")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.08"),")\ntransaction with the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the node.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UFix64")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of unstaked FLOW tokens to withdraw.")))),(0,r.kt)("p",null,"This transaction moves the unstaked tokens back into the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockedTokens.Lockbox")," owned by the ",(0,r.kt)("strong",{parentName:"p"},"token holder"),"."),(0,r.kt)("h3",{id:"withdraw-rewarded-tokens"},"Withdraw Rewarded Tokens"),(0,r.kt)("p",null,"After earning rewards from staking, the node operator can withdraw them from the central staking contract\non behalf of the token holder."),(0,r.kt)("p",null,"To withdraw rewarded tokens via the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeStakerProxy"),",\nthe node operator can use the ",(0,r.kt)("strong",{parentName:"p"},"Withdraw Rewarded FLOW")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.09"),")\ntransaction with the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the node.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UFix64")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of rewarded FLOW tokens to withdraw.")))),(0,r.kt)("p",null,"This transaction moves the rewarded tokens back into the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockedTokens.Lockbox")," owned by the token holder.\nHowever, unlike unstaked tokens, rewards are unlocked FLOW and can be immediately withdrawn from the lockbox."),(0,r.kt)("h2",{id:"teardown"},"Teardown"),(0,r.kt)("h3",{id:"remove-nodeinfo-entry"},"Remove ",(0,r.kt)("inlineCode",{parentName:"h3"},"NodeInfo")," Entry"),(0,r.kt)("p",null,"The node operator can destroy the ",(0,r.kt)("inlineCode",{parentName:"p"},"NodeInfo")," entry after\nthe staking relationship has concluded."),(0,r.kt)("p",null,"This is done using the ",(0,r.kt)("strong",{parentName:"p"},"Remove Node Info")," (",(0,r.kt)("a",{parentName:"p",href:"/core-contracts/locked-tokens/#node-operator"},"NO.03"),")\ntransaction with the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"nodeID")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the node.")))))}h.isMDXComponent=!0}}]);