"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9890],{53466:(o,t,e)=>{e.r(t),e.d(t,{CH:()=>E,assets:()=>a,chCodeConfig:()=>d,contentTitle:()=>l,default:()=>D,frontMatter:()=>c,metadata:()=>p,toc:()=>i});e(67294);var n=e(85893),r=e(11151),s=e(59794);const c={title:"Account Model & Implementation"},l=void 0,p={unversionedId:"concepts/hybrid-custody/guides/account-model",id:"concepts/hybrid-custody/guides/account-model",title:"Account Model & Implementation",description:"This doc serves as developer guidance to support Hybrid Custody apps by leveraging Account Linking. While account linking as a feature is a language level API, supporting linked accounts such that users achieve Hybrid Custody has a bit more nuance, namely apps should build on the LinkedAccounts standard FLIP. Implementing this standard will allow dapps to facilitate a user experience based not on a single authenticated account, but on the global context of all accounts linked to the authenticated user.",source:"@site/docs/concepts/hybrid-custody/guides/account-model.md",sourceDirName:"concepts/hybrid-custody/guides",slug:"/concepts/hybrid-custody/guides/account-model",permalink:"/docs/concepts/hybrid-custody/guides/account-model",draft:!1,editUrl:"https://github.com/onflow/docs/tree/main/docs/concepts/hybrid-custody/guides/account-model.md",tags:[],version:"current",lastUpdatedBy:"Alex",lastUpdatedAt:1684339489,formattedLastUpdatedAt:"May 17, 2023",frontMatter:{title:"Account Model & Implementation"},sidebar:"tutorialSidebar",previous:{title:"Account Abstraction on Flow",permalink:"/docs/concepts/hybrid-custody/guides/account-abstraction"},next:{title:"Linking Accounts",permalink:"/docs/concepts/hybrid-custody/guides/linking-accounts"}},a={},i=[{value:"Identifying Account Hierarchy",id:"identifying-account-hierarchy",level:2},{value:"Consideration",id:"consideration",level:2},{value:"Examples",id:"examples",level:2},{value:"Query Whether an Address Has Associated Accounts",id:"query-whether-an-address-has-associated-accounts",level:3},{value:"Query All Accounts Associated with Address",id:"query-all-accounts-associated-with-address",level:3},{value:"Query All Owned NFT Metadata",id:"query-all-owned-nft-metadata",level:3},{value:"Query All Account FungibleToken Balances",id:"query-all-account-fungibletoken-balances",level:3},{value:"Use Child Account FungibleTokens Signing As Parent",id:"use-child-account-fungibletokens-signing-as-parent",level:3},{value:"Revoking Secondary Access on a Linked Account",id:"revoking-secondary-access-on-a-linked-account",level:3},{value:"Remove a Child Account",id:"remove-a-child-account",level:3}],E={annotations:s.ds,Code:s.EK},d={staticMediaQuery:"not screen, (max-width: 768px)",theme:{name:"nord",type:"dark",semanticHighlighting:!0,colors:{focusBorder:"#3b4252",foreground:"#d8dee9","activityBar.background":"#2e3440","activityBar.dropBackground":"#3b4252","activityBar.foreground":"#d8dee9","activityBar.activeBorder":"#88c0d0","activityBar.activeBackground":"#3b4252","activityBarBadge.background":"#88c0d0","activityBarBadge.foreground":"#2e3440","badge.foreground":"#2e3440","badge.background":"#88c0d0","button.background":"#88c0d0ee","button.foreground":"#2e3440","button.hoverBackground":"#88c0d0","button.secondaryBackground":"#434c5e","button.secondaryForeground":"#d8dee9","button.secondaryHoverBackground":"#4c566a","charts.red":"#bf616a","charts.blue":"#81a1c1","charts.yellow":"#ebcb8b","charts.orange":"#d08770","charts.green":"#a3be8c","charts.purple":"#b48ead","charts.foreground":"#d8dee9","charts.lines":"#88c0d0","debugConsole.infoForeground":"#88c0d0","debugConsole.warningForeground":"#ebcb8b","debugConsole.errorForeground":"#bf616a","debugConsole.sourceForeground":"#616e88","debugConsoleInputIcon.foreground":"#81a1c1","debugExceptionWidget.background":"#4c566a","debugExceptionWidget.border":"#2e3440","debugToolBar.background":"#3b4252",descriptionForeground:"#d8dee9e6","diffEditor.insertedTextBackground":"#81a1c133","diffEditor.removedTextBackground":"#bf616a4d","dropdown.background":"#3b4252","dropdown.border":"#3b4252","dropdown.foreground":"#d8dee9","editorActiveLineNumber.foreground":"#d8dee9cc","editorCursor.foreground":"#d8dee9","editorHint.border":"#ebcb8b00","editorHint.foreground":"#ebcb8b","editorIndentGuide.background":"#434c5eb3","editorIndentGuide.activeBackground":"#4c566a","editorInlayHint.background":"#434c5e","editorInlayHint.foreground":"#d8dee9","editorLineNumber.foreground":"#4c566a","editorLineNumber.activeForeground":"#d8dee9","editorWhitespace.foreground":"#4c566ab3","editorWidget.background":"#2e3440","editorWidget.border":"#3b4252","editor.background":"#2e3440","editor.foreground":"#d8dee9","editor.hoverHighlightBackground":"#3b4252","editor.findMatchBackground":"#88c0d066","editor.findMatchHighlightBackground":"#88c0d033","editor.findRangeHighlightBackground":"#88c0d033","editor.lineHighlightBackground":"#3b4252","editor.lineHighlightBorder":"#3b4252","editor.inactiveSelectionBackground":"#434c5ecc","editor.inlineValuesBackground":"#4c566a","editor.inlineValuesForeground":"#eceff4","editor.selectionBackground":"#434c5ecc","editor.selectionHighlightBackground":"#434c5ecc","editor.rangeHighlightBackground":"#434c5e52","editor.wordHighlightBackground":"#81a1c166","editor.wordHighlightStrongBackground":"#81a1c199","editor.stackFrameHighlightBackground":"#5e81ac","editor.focusedStackFrameHighlightBackground":"#5e81ac","editorError.foreground":"#bf616a","editorError.border":"#bf616a00","editorWarning.foreground":"#ebcb8b","editorWarning.border":"#ebcb8b00","editorBracketMatch.background":"#2e344000","editorBracketMatch.border":"#88c0d0","editorBracketHighlight.foreground1":"#8fbcbb","editorBracketHighlight.foreground2":"#88c0d0","editorBracketHighlight.foreground3":"#81a1c1","editorBracketHighlight.foreground4":"#5e81ac","editorBracketHighlight.foreground5":"#8fbcbb","editorBracketHighlight.foreground6":"#88c0d0","editorBracketHighlight.unexpectedBracket.foreground":"#bf616a","editorCodeLens.foreground":"#4c566a","editorGroup.background":"#2e3440","editorGroup.border":"#3b425201","editorGroup.dropBackground":"#3b425299","editorGroupHeader.border":"#3b425200","editorGroupHeader.noTabsBackground":"#2e3440","editorGroupHeader.tabsBackground":"#2e3440","editorGroupHeader.tabsBorder":"#3b425200","editorGutter.background":"#2e3440","editorGutter.modifiedBackground":"#ebcb8b","editorGutter.addedBackground":"#a3be8c","editorGutter.deletedBackground":"#bf616a","editorHoverWidget.background":"#3b4252","editorHoverWidget.border":"#3b4252","editorLink.activeForeground":"#88c0d0","editorMarkerNavigation.background":"#5e81acc0","editorMarkerNavigationError.background":"#bf616ac0","editorMarkerNavigationWarning.background":"#ebcb8bc0","editorOverviewRuler.border":"#3b4252","editorOverviewRuler.currentContentForeground":"#3b4252","editorOverviewRuler.incomingContentForeground":"#3b4252","editorOverviewRuler.findMatchForeground":"#88c0d066","editorOverviewRuler.rangeHighlightForeground":"#88c0d066","editorOverviewRuler.selectionHighlightForeground":"#88c0d066","editorOverviewRuler.wordHighlightForeground":"#88c0d066","editorOverviewRuler.wordHighlightStrongForeground":"#88c0d066","editorOverviewRuler.modifiedForeground":"#ebcb8b","editorOverviewRuler.addedForeground":"#a3be8c","editorOverviewRuler.deletedForeground":"#bf616a","editorOverviewRuler.errorForeground":"#bf616a","editorOverviewRuler.warningForeground":"#ebcb8b","editorOverviewRuler.infoForeground":"#81a1c1","editorRuler.foreground":"#434c5e","editorSuggestWidget.background":"#2e3440","editorSuggestWidget.border":"#3b4252","editorSuggestWidget.foreground":"#d8dee9","editorSuggestWidget.focusHighlightForeground":"#88c0d0","editorSuggestWidget.highlightForeground":"#88c0d0","editorSuggestWidget.selectedBackground":"#434c5e","editorSuggestWidget.selectedForeground":"#d8dee9","extensionButton.prominentForeground":"#d8dee9","extensionButton.prominentBackground":"#434c5e","extensionButton.prominentHoverBackground":"#4c566a",errorForeground:"#bf616a","gitDecoration.modifiedResourceForeground":"#ebcb8b","gitDecoration.deletedResourceForeground":"#bf616a","gitDecoration.untrackedResourceForeground":"#a3be8c","gitDecoration.ignoredResourceForeground":"#d8dee966","gitDecoration.conflictingResourceForeground":"#5e81ac","gitDecoration.submoduleResourceForeground":"#8fbcbb","gitDecoration.stageDeletedResourceForeground":"#bf616a","gitDecoration.stageModifiedResourceForeground":"#ebcb8b","input.background":"#3b4252","input.foreground":"#d8dee9","input.placeholderForeground":"#d8dee999","input.border":"#3b4252","inputOption.activeBackground":"#5e81ac","inputOption.activeBorder":"#5e81ac","inputOption.activeForeground":"#eceff4","inputValidation.errorBackground":"#bf616a","inputValidation.errorBorder":"#bf616a","inputValidation.infoBackground":"#81a1c1","inputValidation.infoBorder":"#81a1c1","inputValidation.warningBackground":"#d08770","inputValidation.warningBorder":"#d08770","keybindingLabel.background":"#4c566a","keybindingLabel.border":"#4c566a","keybindingLabel.bottomBorder":"#4c566a","keybindingLabel.foreground":"#d8dee9","list.activeSelectionBackground":"#88c0d0","list.activeSelectionForeground":"#2e3440","list.inactiveSelectionBackground":"#434c5e","list.inactiveSelectionForeground":"#d8dee9","list.inactiveFocusBackground":"#434c5ecc","list.hoverForeground":"#eceff4","list.focusForeground":"#d8dee9","list.focusBackground":"#88c0d099","list.focusHighlightForeground":"#eceff4","list.hoverBackground":"#3b4252","list.dropBackground":"#88c0d099","list.highlightForeground":"#88c0d0","list.errorForeground":"#bf616a","list.warningForeground":"#ebcb8b","merge.currentHeaderBackground":"#81a1c166","merge.currentContentBackground":"#81a1c14d","merge.incomingHeaderBackground":"#8fbcbb66","merge.incomingContentBackground":"#8fbcbb4d","merge.border":"#3b425200","minimap.background":"#2e3440","minimap.errorHighlight":"#bf616acc","minimap.findMatchHighlight":"#88c0d0","minimap.selectionHighlight":"#88c0d0cc","minimap.warningHighlight":"#ebcb8bcc","minimapGutter.addedBackground":"#a3be8c","minimapGutter.deletedBackground":"#bf616a","minimapGutter.modifiedBackground":"#ebcb8b","minimapSlider.activeBackground":"#434c5eaa","minimapSlider.background":"#434c5e99","minimapSlider.hoverBackground":"#434c5eaa","notification.background":"#3b4252","notification.buttonBackground":"#434c5e","notification.buttonForeground":"#d8dee9","notification.buttonHoverBackground":"#4c566a","notification.errorBackground":"#bf616a","notification.errorForeground":"#2e3440","notification.foreground":"#d8dee9","notification.infoBackground":"#88c0d0","notification.infoForeground":"#2e3440","notification.warningBackground":"#ebcb8b","notification.warningForeground":"#2e3440","notificationCenter.border":"#3b425200","notificationCenterHeader.background":"#2e3440","notificationCenterHeader.foreground":"#88c0d0","notificationLink.foreground":"#88c0d0","notifications.background":"#3b4252","notifications.border":"#2e3440","notifications.foreground":"#d8dee9","notificationToast.border":"#3b425200","panel.background":"#2e3440","panel.border":"#3b4252","panelTitle.activeBorder":"#88c0d000","panelTitle.activeForeground":"#88c0d0","panelTitle.inactiveForeground":"#d8dee9","peekView.border":"#4c566a","peekViewEditor.background":"#2e3440","peekViewEditorGutter.background":"#2e3440","peekViewEditor.matchHighlightBackground":"#88c0d04d","peekViewResult.background":"#2e3440","peekViewResult.fileForeground":"#88c0d0","peekViewResult.lineForeground":"#d8dee966","peekViewResult.matchHighlightBackground":"#88c0d0cc","peekViewResult.selectionBackground":"#434c5e","peekViewResult.selectionForeground":"#d8dee9","peekViewTitle.background":"#3b4252","peekViewTitleDescription.foreground":"#d8dee9","peekViewTitleLabel.foreground":"#88c0d0","pickerGroup.border":"#3b4252","pickerGroup.foreground":"#88c0d0","progressBar.background":"#88c0d0","quickInputList.focusBackground":"#88c0d0","quickInputList.focusForeground":"#2e3440","sash.hoverBorder":"#88c0d0","scrollbar.shadow":"#00000066","scrollbarSlider.activeBackground":"#434c5eaa","scrollbarSlider.background":"#434c5e99","scrollbarSlider.hoverBackground":"#434c5eaa","selection.background":"#88c0d099","sideBar.background":"#2e3440","sideBar.foreground":"#d8dee9","sideBar.border":"#3b4252","sideBarSectionHeader.background":"#3b4252","sideBarSectionHeader.foreground":"#d8dee9","sideBarTitle.foreground":"#d8dee9","statusBar.background":"#3b4252","statusBar.debuggingBackground":"#5e81ac","statusBar.debuggingForeground":"#d8dee9","statusBar.noFolderForeground":"#d8dee9","statusBar.noFolderBackground":"#3b4252","statusBar.foreground":"#d8dee9","statusBarItem.activeBackground":"#4c566a","statusBarItem.hoverBackground":"#434c5e","statusBarItem.prominentBackground":"#3b4252","statusBarItem.prominentHoverBackground":"#434c5e","statusBarItem.errorBackground":"#3b4252","statusBarItem.errorForeground":"#bf616a","statusBarItem.warningBackground":"#ebcb8b","statusBarItem.warningForeground":"#2e3440","statusBar.border":"#3b425200","tab.activeBackground":"#3b4252","tab.activeForeground":"#d8dee9","tab.border":"#3b425200","tab.activeBorder":"#88c0d000","tab.unfocusedActiveBorder":"#88c0d000","tab.inactiveBackground":"#2e3440","tab.inactiveForeground":"#d8dee966","tab.unfocusedActiveForeground":"#d8dee999","tab.unfocusedInactiveForeground":"#d8dee966","tab.hoverBackground":"#3b4252cc","tab.unfocusedHoverBackground":"#3b4252b3","tab.hoverBorder":"#88c0d000","tab.unfocusedHoverBorder":"#88c0d000","tab.activeBorderTop":"#88c0d000","tab.unfocusedActiveBorderTop":"#88c0d000","tab.lastPinnedBorder":"#4c566a","terminal.background":"#2e3440","terminal.foreground":"#d8dee9","terminal.ansiBlack":"#3b4252","terminal.ansiRed":"#bf616a","terminal.ansiGreen":"#a3be8c","terminal.ansiYellow":"#ebcb8b","terminal.ansiBlue":"#81a1c1","terminal.ansiMagenta":"#b48ead","terminal.ansiCyan":"#88c0d0","terminal.ansiWhite":"#e5e9f0","terminal.ansiBrightBlack":"#4c566a","terminal.ansiBrightRed":"#bf616a","terminal.ansiBrightGreen":"#a3be8c","terminal.ansiBrightYellow":"#ebcb8b","terminal.ansiBrightBlue":"#81a1c1","terminal.ansiBrightMagenta":"#b48ead","terminal.ansiBrightCyan":"#8fbcbb","terminal.ansiBrightWhite":"#eceff4","terminal.tab.activeBorder":"#88c0d0","textBlockQuote.background":"#3b4252","textBlockQuote.border":"#81a1c1","textCodeBlock.background":"#4c566a","textLink.activeForeground":"#88c0d0","textLink.foreground":"#88c0d0","textPreformat.foreground":"#8fbcbb","textSeparator.foreground":"#eceff4","titleBar.activeBackground":"#2e3440","titleBar.activeForeground":"#d8dee9","titleBar.border":"#2e344000","titleBar.inactiveBackground":"#2e3440","titleBar.inactiveForeground":"#d8dee966","tree.indentGuidesStroke":"#616e88","walkThrough.embeddedEditorBackground":"#2e3440","welcomePage.buttonBackground":"#434c5e","welcomePage.buttonHoverBackground":"#4c566a","widget.shadow":"#00000066"},tokenColors:[{settings:{foreground:"#d8dee9ff",background:"#2e3440ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{name:"Comment",scope:"comment",settings:{foreground:"#616E88"}},{name:"Constant Character",scope:"constant.character",settings:{foreground:"#EBCB8B"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#EBCB8B"}},{name:"Constant Language",scope:"constant.language",settings:{foreground:"#81A1C1"}},{name:"Constant Numeric",scope:"constant.numeric",settings:{foreground:"#B48EAD"}},{name:"Constant Regexp",scope:"constant.regexp",settings:{foreground:"#EBCB8B"}},{name:"Entity Name Class/Type",scope:["entity.name.class","entity.name.type.class"],settings:{foreground:"#8FBCBB"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#88C0D0"}},{name:"Entity Name Tag",scope:"entity.name.tag",settings:{foreground:"#81A1C1"}},{name:"Entity Other Attribute Name",scope:"entity.other.attribute-name",settings:{foreground:"#8FBCBB"}},{name:"Entity Other Inherited Class",scope:"entity.other.inherited-class",settings:{fontStyle:"bold",foreground:"#8FBCBB"}},{name:"Invalid Deprecated",scope:"invalid.deprecated",settings:{foreground:"#D8DEE9",background:"#EBCB8B"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#D8DEE9",background:"#BF616A"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#81A1C1"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#81A1C1"}},{name:"Keyword Other New",scope:"keyword.other.new",settings:{foreground:"#81A1C1"}},{name:"Markup Bold",scope:"markup.bold",settings:{fontStyle:"bold"}},{name:"Markup Changed",scope:"markup.changed",settings:{foreground:"#EBCB8B"}},{name:"Markup Deleted",scope:"markup.deleted",settings:{foreground:"#BF616A"}},{name:"Markup Inserted",scope:"markup.inserted",settings:{foreground:"#A3BE8C"}},{name:"Meta Preprocessor",scope:"meta.preprocessor",settings:{foreground:"#5E81AC"}},{name:"Punctuation",scope:"punctuation",settings:{foreground:"#ECEFF4"}},{name:"Punctuation Definition Parameters",scope:["punctuation.definition.method-parameters","punctuation.definition.function-parameters","punctuation.definition.parameters"],settings:{foreground:"#ECEFF4"}},{name:"Punctuation Definition Tag",scope:"punctuation.definition.tag",settings:{foreground:"#81A1C1"}},{name:"Punctuation Definition Comment",scope:["punctuation.definition.comment","punctuation.end.definition.comment","punctuation.start.definition.comment"],settings:{foreground:"#616E88"}},{name:"Punctuation Section",scope:"punctuation.section",settings:{foreground:"#ECEFF4"}},{name:"Punctuation Section Embedded",scope:["punctuation.section.embedded.begin","punctuation.section.embedded.end"],settings:{foreground:"#81A1C1"}},{name:"Punctuation Terminator",scope:"punctuation.terminator",settings:{foreground:"#81A1C1"}},{name:"Punctuation Variable",scope:"punctuation.definition.variable",settings:{foreground:"#81A1C1"}},{name:"Storage",scope:"storage",settings:{foreground:"#81A1C1"}},{name:"String",scope:"string",settings:{foreground:"#A3BE8C"}},{name:"String Regexp",scope:"string.regexp",settings:{foreground:"#EBCB8B"}},{name:"Support Class",scope:"support.class",settings:{foreground:"#8FBCBB"}},{name:"Support Constant",scope:"support.constant",settings:{foreground:"#81A1C1"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#88C0D0"}},{name:"Support Function Construct",scope:"support.function.construct",settings:{foreground:"#81A1C1"}},{name:"Support Type",scope:"support.type",settings:{foreground:"#8FBCBB"}},{name:"Support Type Exception",scope:"support.type.exception",settings:{foreground:"#8FBCBB"}},{name:"Token Debug",scope:"token.debug-token",settings:{foreground:"#b48ead"}},{name:"Token Error",scope:"token.error-token",settings:{foreground:"#bf616a"}},{name:"Token Info",scope:"token.info-token",settings:{foreground:"#88c0d0"}},{name:"Token Warning",scope:"token.warn-token",settings:{foreground:"#ebcb8b"}},{name:"Variable",scope:"variable.other",settings:{foreground:"#D8DEE9"}},{name:"Variable Language",scope:"variable.language",settings:{foreground:"#81A1C1"}},{name:"Variable Parameter",scope:"variable.parameter",settings:{foreground:"#D8DEE9"}},{name:"[C/CPP] Punctuation Separator Pointer-Access",scope:"punctuation.separator.pointer-access.c",settings:{foreground:"#81A1C1"}},{name:"[C/CPP] Meta Preprocessor Include",scope:["source.c meta.preprocessor.include","source.c string.quoted.other.lt-gt.include"],settings:{foreground:"#8FBCBB"}},{name:"[C/CPP] Conditional Directive",scope:["source.cpp keyword.control.directive.conditional","source.cpp punctuation.definition.directive","source.c keyword.control.directive.conditional","source.c punctuation.definition.directive"],settings:{foreground:"#5E81AC",fontStyle:"bold"}},{name:"[CSS] Constant Other Color RGB Value",scope:"source.css constant.other.color.rgb-value",settings:{foreground:"#B48EAD"}},{name:"[CSS](Function) Meta Property-Value",scope:"source.css meta.property-value",settings:{foreground:"#88C0D0"}},{name:"[CSS] Media Queries",scope:["source.css keyword.control.at-rule.media","source.css keyword.control.at-rule.media punctuation.definition.keyword"],settings:{foreground:"#D08770"}},{name:"[CSS] Punctuation Definition Keyword",scope:"source.css punctuation.definition.keyword",settings:{foreground:"#81A1C1"}},{name:"[CSS] Support Type Property Name",scope:"source.css support.type.property-name",settings:{foreground:"#D8DEE9"}},{name:"[diff] Meta Range Context",scope:"source.diff meta.diff.range.context",settings:{foreground:"#8FBCBB"}},{name:"[diff] Meta Header From-File",scope:"source.diff meta.diff.header.from-file",settings:{foreground:"#8FBCBB"}},{name:"[diff] Punctuation Definition From-File",scope:"source.diff punctuation.definition.from-file",settings:{foreground:"#8FBCBB"}},{name:"[diff] Punctuation Definition Range",scope:"source.diff punctuation.definition.range",settings:{foreground:"#8FBCBB"}},{name:"[diff] Punctuation Definition Separator",scope:"source.diff punctuation.definition.separator",settings:{foreground:"#81A1C1"}},{name:"[Elixir](JakeBecker.elixir-ls) module names",scope:"entity.name.type.module.elixir",settings:{foreground:"#8FBCBB"}},{name:"[Elixir](JakeBecker.elixir-ls) module attributes",scope:"variable.other.readwrite.module.elixir",settings:{foreground:"#D8DEE9",fontStyle:"bold"}},{name:"[Elixir](JakeBecker.elixir-ls) atoms",scope:"constant.other.symbol.elixir",settings:{foreground:"#D8DEE9",fontStyle:"bold"}},{name:"[Elixir](JakeBecker.elixir-ls) modules",scope:"variable.other.constant.elixir",settings:{foreground:"#8FBCBB"}},{name:"[Go] String Format Placeholder",scope:"source.go constant.other.placeholder.go",settings:{foreground:"#EBCB8B"}},{name:"[Java](JavaDoc) Comment Block Documentation HTML Entities",scope:"source.java comment.block.documentation.javadoc punctuation.definition.entity.html",settings:{foreground:"#81A1C1"}},{name:"[Java](JavaDoc) Constant Other",scope:"source.java constant.other",settings:{foreground:"#D8DEE9"}},{name:"[Java](JavaDoc) Keyword Other Documentation",scope:"source.java keyword.other.documentation",settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Keyword Other Documentation Author",scope:"source.java keyword.other.documentation.author.javadoc",settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Keyword Other Documentation Directive/Custom",scope:["source.java keyword.other.documentation.directive","source.java keyword.other.documentation.custom"],settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Keyword Other Documentation See",scope:"source.java keyword.other.documentation.see.javadoc",settings:{foreground:"#8FBCBB"}},{name:"[Java] Meta Method-Call",scope:"source.java meta.method-call meta.method",settings:{foreground:"#88C0D0"}},{name:"[Java](JavaDoc) Meta Tag Template Link",scope:["source.java meta.tag.template.link.javadoc","source.java string.other.link.title.javadoc"],settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Meta Tag Template Value",scope:"source.java meta.tag.template.value.javadoc",settings:{foreground:"#88C0D0"}},{name:"[Java](JavaDoc) Punctuation Definition Keyword",scope:"source.java punctuation.definition.keyword.javadoc",settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Punctuation Definition Tag",scope:["source.java punctuation.definition.tag.begin.javadoc","source.java punctuation.definition.tag.end.javadoc"],settings:{foreground:"#616E88"}},{name:"[Java] Storage Modifier Import",scope:"source.java storage.modifier.import",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Modifier Package",scope:"source.java storage.modifier.package",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Type",scope:"source.java storage.type",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Type Annotation",scope:"source.java storage.type.annotation",settings:{foreground:"#D08770"}},{name:"[Java] Storage Type Generic",scope:"source.java storage.type.generic",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Type Primitive",scope:"source.java storage.type.primitive",settings:{foreground:"#81A1C1"}},{name:"[JavaScript] Decorator",scope:["source.js punctuation.decorator","source.js meta.decorator variable.other.readwrite","source.js meta.decorator entity.name.function"],settings:{foreground:"#D08770"}},{name:"[JavaScript] Meta Object-Literal Key",scope:"source.js meta.object-literal.key",settings:{foreground:"#88C0D0"}},{name:"[JavaScript](JSDoc) Storage Type Class",scope:"source.js storage.type.class.jsdoc",settings:{foreground:"#8FBCBB"}},{name:"[JavaScript] String Template Literals Punctuation",scope:["source.js string.quoted.template punctuation.quasi.element.begin","source.js string.quoted.template punctuation.quasi.element.end","source.js string.template punctuation.definition.template-expression"],settings:{foreground:"#81A1C1"}},{name:"[JavaScript] Interpolated String Template Punctuation Functions",scope:"source.js string.quoted.template meta.method-call.with-arguments",settings:{foreground:"#ECEFF4"}},{name:"[JavaScript] String Template Literal Variable",scope:["source.js string.template meta.template.expression support.variable.property","source.js string.template meta.template.expression variable.other.object"],settings:{foreground:"#D8DEE9"}},{name:"[JavaScript] Support Type Primitive",scope:"source.js support.type.primitive",settings:{foreground:"#81A1C1"}},{name:"[JavaScript] Variable Other Object",scope:"source.js variable.other.object",settings:{foreground:"#D8DEE9"}},{name:"[JavaScript] Variable Other Read-Write Alias",scope:"source.js variable.other.readwrite.alias",settings:{foreground:"#8FBCBB"}},{name:"[JavaScript] Parentheses in Template Strings",scope:["source.js meta.embedded.line meta.brace.square","source.js meta.embedded.line meta.brace.round","source.js string.quoted.template meta.brace.square","source.js string.quoted.template meta.brace.round"],settings:{foreground:"#ECEFF4"}},{name:"[HTML] Constant Character Entity",scope:"text.html.basic constant.character.entity.html",settings:{foreground:"#EBCB8B"}},{name:"[HTML] Constant Other Inline-Data",scope:"text.html.basic constant.other.inline-data",settings:{foreground:"#D08770",fontStyle:"italic"}},{name:"[HTML] Meta Tag SGML Doctype",scope:"text.html.basic meta.tag.sgml.doctype",settings:{foreground:"#5E81AC"}},{name:"[HTML] Punctuation Definition Entity",scope:"text.html.basic punctuation.definition.entity",settings:{foreground:"#81A1C1"}},{name:"[INI] Entity Name Section Group-Title",scope:"source.properties entity.name.section.group-title.ini",settings:{foreground:"#88C0D0"}},{name:"[INI] Punctuation Separator Key-Value",scope:"source.properties punctuation.separator.key-value.ini",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Markup Fenced Code Block",scope:["text.html.markdown markup.fenced_code.block","text.html.markdown markup.fenced_code.block punctuation.definition"],settings:{foreground:"#8FBCBB"}},{name:"[Markdown] Markup Heading",scope:"markup.heading",settings:{foreground:"#88C0D0"}},{name:"[Markdown] Markup Inline",scope:["text.html.markdown markup.inline.raw","text.html.markdown markup.inline.raw punctuation.definition.raw"],settings:{foreground:"#8FBCBB"}},{name:"[Markdown] Markup Italic",scope:"text.html.markdown markup.italic",settings:{fontStyle:"italic"}},{name:"[Markdown] Markup Link",scope:"text.html.markdown markup.underline.link",settings:{fontStyle:"underline"}},{name:"[Markdown] Markup List Numbered/Unnumbered",scope:"text.html.markdown beginning.punctuation.definition.list",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Markup Quote Punctuation Definition",scope:"text.html.markdown beginning.punctuation.definition.quote",settings:{foreground:"#8FBCBB"}},{name:"[Markdown] Markup Quote Punctuation Definition",scope:"text.html.markdown markup.quote",settings:{foreground:"#616E88"}},{name:"[Markdown] Markup Math Constant",scope:"text.html.markdown constant.character.math.tex",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Markup Math Definition Marker",scope:["text.html.markdown punctuation.definition.math.begin","text.html.markdown punctuation.definition.math.end"],settings:{foreground:"#5E81AC"}},{name:"[Markdown] Markup Math Function Definition Marker",scope:"text.html.markdown punctuation.definition.function.math.tex",settings:{foreground:"#88C0D0"}},{name:"[Markdown] Markup Math Operator",scope:"text.html.markdown punctuation.math.operator.latex",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Punctuation Definition Heading",scope:"text.html.markdown punctuation.definition.heading",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Punctuation Definition Constant/String",scope:["text.html.markdown punctuation.definition.constant","text.html.markdown punctuation.definition.string"],settings:{foreground:"#81A1C1"}},{name:"[Markdown] String Other Link Description/Title",scope:["text.html.markdown constant.other.reference.link","text.html.markdown string.other.link.description","text.html.markdown string.other.link.title"],settings:{foreground:"#88C0D0"}},{name:"[Perl] Perl Sigils",scope:"source.perl punctuation.definition.variable",settings:{foreground:"#D8DEE9"}},{name:"[PHP] Meta Function-Call Object",scope:["source.php meta.function-call","source.php meta.function-call.object"],settings:{foreground:"#88C0D0"}},{name:"[Python] Decorator",scope:["source.python entity.name.function.decorator","source.python meta.function.decorator support.type"],settings:{foreground:"#D08770"}},{name:"[Python] Function Call",scope:"source.python meta.function-call.generic",settings:{foreground:"#88C0D0"}},{name:"[Python] Support Type",scope:"source.python support.type",settings:{foreground:"#88C0D0"}},{name:"[Python] Function Parameter",scope:["source.python variable.parameter.function.language"],settings:{foreground:"#D8DEE9"}},{name:"[Python] Function Parameter Special",scope:["source.python meta.function.parameters variable.parameter.function.language.special.self"],settings:{foreground:"#81A1C1"}},{name:"[Rust] Entity types",scope:"source.rust entity.name.type",settings:{foreground:"#8FBCBB"}},{name:"[Rust] Macro",scope:"source.rust meta.macro entity.name.function",settings:{fontStyle:"bold",foreground:"#88C0D0"}},{name:"[Rust] Attributes",scope:["source.rust meta.attribute","source.rust meta.attribute punctuation","source.rust meta.attribute keyword.operator"],settings:{foreground:"#5E81AC"}},{name:"[Rust] Traits",scope:"source.rust entity.name.type.trait",settings:{fontStyle:"bold"}},{name:"[Rust] Interpolation Bracket Curly",scope:"source.rust punctuation.definition.interpolation",settings:{foreground:"#EBCB8B"}},{name:"[SCSS] Punctuation Definition Interpolation Bracket Curly",scope:["source.css.scss punctuation.definition.interpolation.begin.bracket.curly","source.css.scss punctuation.definition.interpolation.end.bracket.curly"],settings:{foreground:"#81A1C1"}},{name:"[SCSS] Variable Interpolation",scope:"source.css.scss variable.interpolation",settings:{foreground:"#D8DEE9",fontStyle:"italic"}},{name:"[TypeScript] Decorators",scope:["source.ts punctuation.decorator","source.ts meta.decorator variable.other.readwrite","source.ts meta.decorator entity.name.function","source.tsx punctuation.decorator","source.tsx meta.decorator variable.other.readwrite","source.tsx meta.decorator entity.name.function"],settings:{foreground:"#D08770"}},{name:"[TypeScript] Object-literal keys",scope:["source.ts meta.object-literal.key","source.tsx meta.object-literal.key"],settings:{foreground:"#D8DEE9"}},{name:"[TypeScript] Object-literal functions",scope:["source.ts meta.object-literal.key entity.name.function","source.tsx meta.object-literal.key entity.name.function"],settings:{foreground:"#88C0D0"}},{name:"[TypeScript] Type/Class",scope:["source.ts support.class","source.ts support.type","source.ts entity.name.type","source.ts entity.name.class","source.tsx support.class","source.tsx support.type","source.tsx entity.name.type","source.tsx entity.name.class"],settings:{foreground:"#8FBCBB"}},{name:"[TypeScript] Static Class Support",scope:["source.ts support.constant.math","source.ts support.constant.dom","source.ts support.constant.json","source.tsx support.constant.math","source.tsx support.constant.dom","source.tsx support.constant.json"],settings:{foreground:"#8FBCBB"}},{name:"[TypeScript] Variables",scope:["source.ts support.variable","source.tsx support.variable"],settings:{foreground:"#D8DEE9"}},{name:"[TypeScript] Parentheses in Template Strings",scope:["source.ts meta.embedded.line meta.brace.square","source.ts meta.embedded.line meta.brace.round","source.tsx meta.embedded.line meta.brace.square","source.tsx meta.embedded.line meta.brace.round"],settings:{foreground:"#ECEFF4"}},{name:"[XML] Entity Name Tag Namespace",scope:"text.xml entity.name.tag.namespace",settings:{foreground:"#8FBCBB"}},{name:"[XML] Keyword Other Doctype",scope:"text.xml keyword.other.doctype",settings:{foreground:"#5E81AC"}},{name:"[XML] Meta Tag Preprocessor",scope:"text.xml meta.tag.preprocessor entity.name.tag",settings:{foreground:"#5E81AC"}},{name:"[XML] Entity Name Tag Namespace",scope:["text.xml string.unquoted.cdata","text.xml string.unquoted.cdata punctuation.definition.string"],settings:{foreground:"#D08770",fontStyle:"italic"}},{name:"[YAML] Entity Name Tag",scope:"source.yaml entity.name.tag",settings:{foreground:"#8FBCBB"}}]},lineNumbers:!0,showCopyButton:!0,autoImport:!0,skipLanguages:[],filepath:"/home/runner/work/docs/docs/docs/concepts/hybrid-custody/guides/account-model.md"};function y(o){const t=Object.assign({p:"p",a:"a",blockquote:"blockquote",h1:"h1",ul:"ul",li:"li",code:"code",img:"img",h2:"h2",h3:"h3",ol:"ol"},(0,r.ah)(),o.components);return E||u("CH",!1),E.Code||u("CH.Code",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["This doc serves as developer guidance to support Hybrid Custody apps by leveraging Account Linking. While account linking as a feature is a language level API, supporting linked accounts such that users achieve Hybrid Custody has a bit more nuance, namely apps should build on the ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flips/pull/72",children:"LinkedAccounts standard FLIP"}),". Implementing this standard will allow dapps to facilitate a user experience based not on a single authenticated account, but on the global context of all accounts linked to the authenticated user."]}),"\n",(0,n.jsxs)(t.p,{children:["We believe multi-account linking and management, technical initiatives in support of ",(0,n.jsx)(t.a,{href:"https://forum.onflow.org/t/hybrid-custody/4016",children:"Walletless"})," ",(0,n.jsx)(t.a,{href:"https://flow.com/post/flow-blockchain-mainstream-adoption-easy-onboarding-wallets",children:"Onboarding"}),", will enable in-dapp experiences far superior to the current Web3 status quo and allow for industry UX to finally reach parity with traditional Web2 authentication and onboarding flows, most notably on mobile."]}),"\n",(0,n.jsx)(t.p,{children:"A new user will no longer need a preconfigured wallet to interact with Flow. When they do decide to create a wallet and link with a dapp; however, the associated accounts and assets within them will need to be accessible the same as if they were in a single account."}),"\n",(0,n.jsx)(t.p,{children:"In order to realize a multi-account world that makes sense to users - one where they don\u2019t have to concern themselves with managing assets across their network of accounts - we\u2019re relying on Flow builders to cast their abstractive magic. Consider this your grimoire, fellow builder, where we\u2019ll continue from the perspective of a wallet or marketplace dapp seeking to facilitate a unified account experience, abstracting away the partitioned access between accounts into a single dashboard for user interactions on all their owned assets."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["\u26a0\ufe0f Note that the documentation on Hybrid Custody covers the current state and will likely differ from the final implementation. Builders should be aware that breaking changes will deploy between current state and the stable version. Interested in shaping the conversation? ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flips/pull/72",children:"Join in!"})]}),"\n"]}),"\n",(0,n.jsx)(t.h1,{id:"objective",children:"Objective"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Understand the linked account model"}),"\n",(0,n.jsx)(t.li,{children:"Create a blockchain-native onboarding flow"}),"\n",(0,n.jsx)(t.li,{children:"Link an existing app account as a child to a newly authenticated parent account"}),"\n",(0,n.jsx)(t.li,{children:"Get your dapp to recognize \u201cparent\u201d accounts along with any associated \u201cchild\u201d accounts"}),"\n",(0,n.jsx)(t.li,{children:"View Fungible and NonFungible Token metadata relating to assets across all of a user\u2019s associated accounts - their wallet-mediated \u201cparent\u201d account and any hybrid custody model \u201cchild\u201d accounts"}),"\n",(0,n.jsx)(t.li,{children:"Facilitate transactions acting on assets in child accounts"}),"\n"]}),"\n",(0,n.jsx)(t.h1,{id:"design-overview",children:"Design Overview"}),"\n",(0,n.jsxs)(t.p,{children:["The basic idea in the ",(0,n.jsx)(t.a,{href:"https://forum.onflow.org/t/account-linking-authaccount-capabilities-management/4314",children:"(currently proposed) standard"})," is relatively simple. A parent account is one that has delegated authority on another account. The account which has delegated authority over itself to the parent account is the child account."]}),"\n",(0,n.jsxs)(t.p,{children:["In the ",(0,n.jsx)(t.a,{href:"https://forum.onflow.org/t/hybrid-custody/4016",children:"Hybrid Custody Model"}),", this child account would have shared access between the dapp which created the account and the linked parent account."]}),"\n",(0,n.jsxs)(t.p,{children:["How does this delegation occur? Typically when we think of shared account access in crypto, we think keys. However, Cadence recently enabled an ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/cadence/issues/2151",children:"experimental feature"})," whereby an account can link a Capability to its AuthAccount."]}),"\n",(0,n.jsxs)(t.p,{children:["We\u2019ve leveraged this feature in a (proposed) standard so that dapps can implement a hybrid custody model whereby the dapp creates an account it controls, then later delegates authority over that account to the user once they\u2019ve authenticate with their wallet. All related constructs are defined in the ",(0,n.jsx)(t.code,{children:"LinkedAccounts"})," contract. The delegation of that account authority is mediated by the parent account's ",(0,n.jsx)(t.code,{children:"Collection"}),", and ",(0,n.jsx)(t.code,{children:"Handler"}),", residing in the linked child account."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:e(25630).Z+"",loading:"lazy",alt:"resources/child-account-manager.jpg",width:"2877",height:"2455"})}),"\n",(0,n.jsxs)(t.p,{children:["Therefore, the presence of a ",(0,n.jsx)(t.code,{children:"Collection"})," in an account implies there are potentially associated accounts for which the owning account has delegated authority. This resource is intended to be configured with a pubic Capability enabling querying of an accounts child account addresses via ",(0,n.jsx)(t.code,{children:"getLinkedAccountAddresses()"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["A wallet or marketplace wishing to discover all of a user\u2019s accounts and assets within them can do so by first looking to the user\u2019s ",(0,n.jsx)(t.code,{children:"Collection"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"identifying-account-hierarchy",children:"Identifying Account Hierarchy"}),"\n",(0,n.jsxs)(t.p,{children:["To clarify, insofar as the standard is concerned, an account is a parent account if it contains a ",(0,n.jsx)(t.code,{children:"Collection"})," resource, and an account is a child account if it contains a ",(0,n.jsx)(t.code,{children:"Handler"})," resource."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:e(56239).Z+"",loading:"lazy",alt:"resources/account-hierarchy.jpg",width:"3140",height:"2058"})}),"\n",(0,n.jsxs)(t.p,{children:["We can see that the user\u2019s ",(0,n.jsx)(t.code,{children:"Collection.linkedAccounts"})," point to the address of its child account. Likewise, the child account\u2019s ",(0,n.jsx)(t.code,{children:"Handler.parentAddress"})," point to the user\u2019s account as its parent address. This makes it easy to both identify whether an account is a parent, child, or both, and its associated parent/child account(s)."]}),"\n",(0,n.jsx)(t.h2,{id:"consideration",children:"Consideration"}),"\n",(0,n.jsx)(t.p,{children:"Do note that this construction does not prevent an account from having multiple parent accounts or a child account from being the parent to other accounts. While initial intuition might lead one to believe that account associations are a tree with the user at the root, the graph of associated accounts among child accounts may lead to cycles of association."}),"\n",(0,n.jsx)(t.p,{children:"We believe it would be unlikely for a use case to demand a user delegates authority over their main account (in fact we\u2019d discourage such constructions), but delegating access between child accounts could be useful. As an example, consider a set of local game clients across mobile and web platforms, each with self-custodied app accounts having delegated authority to each other while both are child accounts of the user\u2019s main account."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:e(79180).Z+"",loading:"lazy",alt:"resources/user-account.jpg",width:"2175",height:"1664"})}),"\n",(0,n.jsx)(t.p,{children:"The user\u2019s account is the root parent account while both child accounts have delegated access to each other. This allows assets to be easily transferable between dapp accounts without the need of a user signature to facilitate transfer."}),"\n",(0,n.jsx)(t.p,{children:"Ultimately, it\u2019ll be up to the implementing wallet/marketplace how far down the graph of account associations they\u2019d want to traverse and display to the user."}),"\n",(0,n.jsx)(t.h1,{id:"implementation",children:"Implementation"}),"\n",(0,n.jsx)(t.p,{children:"From the perspective of a wallet or marketplace dapp, some relevant things to know about the user are:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Does this account have associated linked accounts?"}),"\n",(0,n.jsx)(t.li,{children:"What are those associated linked accounts, if any?"}),"\n",(0,n.jsx)(t.li,{children:"What NFTs are owned by this user across all associated accounts?"}),"\n",(0,n.jsx)(t.li,{children:"What are the balances of all FungibleTokens across all associated accounts?"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"And with respect to acting on the assets of child accounts and managing child accounts themselves:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Spending FungibleTokens from a linked account\u2019s Vault"}),"\n",(0,n.jsx)(t.li,{children:"Creating a user-funded linked account"}),"\n",(0,n.jsx)(t.li,{children:"Removing a linked account"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(t.h3,{id:"query-whether-an-address-has-associated-accounts",children:"Query Whether an Address Has Associated Accounts"}),"\n",(0,n.jsxs)(t.p,{children:["This script will return ",(0,n.jsx)(t.code,{children:"true"})," if a ",(0,n.jsx)(t.code,{children:"LinkedAccounts.Collection"})," is stored and ",(0,n.jsx)(t.code,{children:"false"})," otherwise"]}),"\n",(0,n.jsx)(E.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/MetadataViews.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"NonFungibleToken ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/NonFungibleToken.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/LinkedAccounts.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// This script allows one to determine if a given account has a LinkedAccounts.Collection configured as expected",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// @param address: The address to query against",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// @return True if the account has a LinkedAccounts.Collection configured at the canonical path, false otherwise",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"main",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:"): ",props:{style:{color:"#D8DEE9FF"}}},{content:"Bool ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    // Get the account",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#81A1C1"}}},{content:"account ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAuthAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Get the Collection's Metadata",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#81A1C1"}}},{content:"collectionView",props:{style:{color:"#88C0D0"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionData ",props:{style:{color:"#D8DEE9FF"}}},{content:"=",props:{style:{color:"#81A1C1"}}},{content:" (",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"resolveView",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:"<",props:{style:{color:"#ECEFF4"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionData",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#ECEFF4"}}},{content:"()) ",props:{style:{color:"#D8DEE9FF"}}},{content:"as",props:{style:{color:"#D8DEE9"}}},{content:"! ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionData",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D8DEE9FF"}}},{content:"!",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    // Assign public & private capabilities from expected paths",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let collectionPublicCap ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getCapability",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"            &",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"LinkedAccounts.",props:{style:{color:"#D8DEE9FF"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" MetadataViews.",props:{style:{color:"#D8DEE9FF"}}},{content:"ResolverCollection",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        >",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"publicPath",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let collectionPrivateCap ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getCapability",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"            &",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"LinkedAccounts.",props:{style:{color:"#D8DEE9FF"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" NonFungibleToken.",props:{style:{color:"#D8DEE9FF"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" NonFungibleToken.",props:{style:{color:"#D8DEE9FF"}}},{content:"Receiver",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" NonFungibleToken.",props:{style:{color:"#D8DEE9FF"}}},{content:"Provider",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" MetadataViews.",props:{style:{color:"#D8DEE9FF"}}},{content:"ResolverCollection",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        >",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"providerPath",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    ",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Return whether account is configured as expected",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    return account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"type",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"at",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"storagePath",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"== ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}},{content:"@",props:{style:{color:"#D8DEE9FF"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"() ",props:{style:{color:"#D8DEE9FF"}}},{content:"&&",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"        collectionPublicCap",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"check",props:{style:{color:"#88C0D0"}}},{content:"() ",props:{style:{color:"#D8DEE9FF"}}},{content:"&& ",props:{style:{color:"#81A1C1"}}},{content:"collectionPrivateCap",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"check",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"}",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"js"},annotations:[]}]}),"\n",(0,n.jsx)(t.h3,{id:"query-all-accounts-associated-with-address",children:"Query All Accounts Associated with Address"}),"\n",(0,n.jsx)(t.p,{children:"The following script will return an array addresses associated with a given account\u2019s address, inclusive of the provided address."}),"\n",(0,n.jsx)(E.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/LinkedAccounts.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"main",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:"): [",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:"] ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"\t// Init return variable",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"\tlet ",props:{style:{color:"#81A1C1"}}},{content:"addresses",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [Address] ",props:{style:{color:"#D8DEE9FF"}}},{content:"=",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"\t// Get the AuthAccount of the specified Address",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"\tlet ",props:{style:{color:"#81A1C1"}}},{content:"account",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" AuthAccount ",props:{style:{color:"#D8DEE9FF"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAuthAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"\t// Get a reference to the account's Collection if it exists at the standard path",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"\tif let ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#D8DEE9"}}},{content:"<&",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    from",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionStoragePath",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"  ) ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"\t\t// Append any child account addresses to the return value",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"\t\taddresses.appendAll(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"\t\t collectionRef.getLinkedAccountAddresses()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"\t\t)",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"\t}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"\t// Return the final array, inclusive of specified Address",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"\treturn ",props:{style:{color:"#81A1C1"}}},{content:"addresses",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]}],lang:"js"},annotations:[]}]}),"\n",(0,n.jsx)(t.h3,{id:"query-all-owned-nft-metadata",children:"Query All Owned NFT Metadata"}),"\n",(0,n.jsx)(t.p,{children:"While it is possible to iterate over the storage of all associated accounts in a single script, memory limits prevent this approach from scaling well. Since some accounts hold thousands of NFTs, we recommend breaking up iteration, utilizing several queries to iterate over accounts and the storage of each account. Batching queries on individual accounts may even be required based on the number of NFTs held."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Get all associated account addresses (see above)"}),"\n",(0,n.jsx)(t.li,{children:"Looping over each associated account address client-side, get each address\u2019s owned NFT metadata"}),"\n"]}),"\n",(0,n.jsx)(E.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"NonFungibleToken ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/NonFungibleToken.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/MetadataViews.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/LinkedAccounts.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Custom struct to make interpretation of NFT & Collection data easy client side",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub struct NFTData ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#D8DEE9"}}},{content:"let ",props:{style:{color:"#81A1C1"}}},{content:"name",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let description",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let thumbnail",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let resourceID",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" UInt64",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let ownerAddress",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" Address",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let collectionName",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let collectionDescription",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let collectionURL",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let collectionStoragePathIdentifier",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let collectionPublicPathIdentifier",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    init",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        name",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        description",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        thumbnail",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        resourceID",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        ownerAddress",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        collectionName",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        collectionDescription",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        collectionURL",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        collectionStoragePathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        collectionPublicPathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    ) ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"name ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"name",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"description ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"description",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"thumbnail ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"thumbnail",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"resourceID ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"resourceID",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"ownerAddress ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"ownerAddress",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionName ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionName",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDescription ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionDescription",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionURL ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionURL",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionStoragePathIdentifier ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionStoragePathIdentifier",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionPublicPathIdentifier ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionPublicPathIdentifier",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Helper function that retrieves data about all publicly accessible NFTs in an account",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"getAllViewsFromAddress",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"_ address",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"NFTData",props:{style:{color:"#D8DEE9"}}},{content:"] ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    // Get the account",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#D8DEE9FF"}}},{content:"account",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"AuthAccount ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAuthAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Init for return value",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let data",props:{style:{color:"#D8DEE9"}}},{content:": [",props:{style:{color:"#D8DEE9FF"}}},{content:"NFTData",props:{style:{color:"#D8DEE9"}}},{content:"] ",props:{style:{color:"#D8DEE9FF"}}},{content:"=",props:{style:{color:"#81A1C1"}}},{content:" []",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Assign the types we'll need",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let collectionType",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}},{content:"@",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"NonFungibleToken.",props:{style:{color:"#D8DEE9FF"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" MetadataViews.",props:{style:{color:"#D8DEE9FF"}}},{content:"ResolverCollection",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let displayType",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:"<",props:{style:{color:"#ECEFF4"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Display",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#ECEFF4"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let collectionDisplayType",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:"<",props:{style:{color:"#ECEFF4"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionDisplay",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#ECEFF4"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let collectionDataType",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:"<",props:{style:{color:"#ECEFF4"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionData",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#ECEFF4"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Iterate over each public path",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"forEachStored",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"fun",props:{style:{color:"#88C0D0"}}},{content:" (",props:{style:{color:"#D8DEE9FF"}}},{content:"path",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"StoragePath",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#D8DEE9"}}},{content:"): ",props:{style:{color:"#D8DEE9FF"}}},{content:"Bool ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        // Check if it's a Collection we're interested in, if so, get a reference",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        if type.isSubtype(",props:{style:{color:"#D8DEE9FF"}}},{content:"of",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"collectionType",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            if let ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionRef ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"                &",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"NonFungibleToken",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ResolverCollection",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            >(",props:{style:{color:"#D8DEE9FF"}}},{content:"from",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"path",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                // Iterate over the Collection's NFTs, continuing if the NFT resolves the views we want",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                for id in collectionRef.getIDs() ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#81A1C1"}}},{content:"resolverRef",props:{style:{color:"#D8DEE9"}}},{content:": &",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Resolver",props:{style:{color:"#D8DEE9FF"}}},{content:"} ",props:{style:{color:"#ECEFF4"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrowViewResolver",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"id",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"id",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                    if let ",props:{style:{color:"#81A1C1"}}},{content:"display ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"resolverRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"resolveView",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"displayType",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"as",props:{style:{color:"#D8DEE9"}}},{content:"! ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Display",props:{style:{color:"#D8DEE9"}}},{content:"? ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                        let ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDisplay ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"resolverRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"resolveView",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDisplayType",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"as",props:{style:{color:"#D8DEE9"}}},{content:"! ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"                        let collectionData ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"resolverRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"resolveView",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDataType",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"as",props:{style:{color:"#D8DEE9"}}},{content:"! ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"NFTCollectionData",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"                        // Build our NFTData struct from the metadata",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                        let nftData ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"NFTData",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                            name",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"display",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"name",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            description",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"display",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"description",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            thumbnail",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"display",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"thumbnail",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"uri",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            resourceID",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"resolverRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"uuid",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            ownerAddress",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"resolverRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"owner",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            collectionName",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"name",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            collectionDescription",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"description",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            collectionURL",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"externalURL",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"url",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            collectionStoragePathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"path",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"toString",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            collectionPublicPathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"collectionData",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"publicPath",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"toString",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                        )",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                        // Add it to our data",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                        data",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"append",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"nftData",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                    }",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                }",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            }",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        return ",props:{style:{color:"#D8DEE9"}}},{content:"true",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    })",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    return data",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"}",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Script that retrieve data about all publicly accessible NFTs in an account and any of its",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// child accounts",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// Note that this script does not consider accounts with exceptionally large collections ",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// which would result in memory errors. To compose a script that does cover accounts with",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// a large number of sub-accounts and/or NFTs within those accounts, see example 5 in",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// the NFT Catalog's README: https://github.com/dapperlabs/nft-catalog and adapt for use",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// with LinkedAccounts.Collection",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"main",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Address",props:{style:{color:"#88C0D0"}}},{content:":",props:{style:{color:"#ECEFF4"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"NFTData",props:{style:{color:"#D8DEE9"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"} {",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#D8DEE9FF"}}},{content:"allNFTData",props:{style:{color:"#88C0D0"}}},{content:": {",props:{style:{color:"#ECEFF4"}}},{content:"Address",props:{style:{color:"#88C0D0"}}},{content:":",props:{style:{color:"#ECEFF4"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"NFTData",props:{style:{color:"#D8DEE9"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"} ",props:{style:{color:"#ECEFF4"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"{}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    ",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Add all retrieved views to the running mapping indexed on address",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    allNFTData",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"insert",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"key",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"getAllViewsFromAddress",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:"))",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    ",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    /* Iterate over any child accounts */ ",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    //",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    // Get reference to LinkedAccounts.Collection if it exists",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    if let collectionRef ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getCapability",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"            &",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"LinkedAccounts.",props:{style:{color:"#D8DEE9FF"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        >",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionPublicPath",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#88C0D0"}}},{content:"() ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        // Iterate over each linked account in LinkedAccounts.Collection",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        for childAddress in collectionRef.getLinkedAccountAddresses() ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            if !",props:{style:{color:"#81A1C1"}}},{content:"allNFTData",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"containsKey",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"childAddress",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                // Insert the NFT metadata for those NFTs in each child account",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                // indexing on the account's address",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                allNFTData",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"insert",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"key",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"childAddress",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"getAllViewsFromAddress",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"childAddress",props:{style:{color:"#D8DEE9"}}},{content:"))",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    return allNFTData ",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"js"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["After iterating over all associated accounts, the client will have an array of ",(0,n.jsx)(t.code,{children:"NFTData"})," structs containing relevant information about each owned NFT including the address where the NFT resides. Note that this script does not take batching into consideration and assumes that each NFT resolves at minimum the ",(0,n.jsx)(t.code,{children:"MetadataViews.Display"})," view type."]}),"\n",(0,n.jsx)(t.h3,{id:"query-all-account-fungibletoken-balances",children:"Query All Account FungibleToken Balances"}),"\n",(0,n.jsx)(t.p,{children:"Similar to the previous example, we recommend breaking up this task due to memory limits."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Get all linked account addresses (see above)"}),"\n",(0,n.jsx)(t.li,{children:"Looping over each associated account address client-side, get each address\u2019s owned FungibleToken Vault metadata"}),"\n"]}),"\n",(0,n.jsx)(E.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"FungibleToken ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/FungibleToken.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"FungibleTokenMetadataViews ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/FungibleTokenMetadataViews.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/utility/MetadataViews.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../contracts/LinkedAccounts.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Custom struct to easily communicate vault data to a client",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub struct VaultInfo ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#D8DEE9"}}},{content:"let ",props:{style:{color:"#81A1C1"}}},{content:"name",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let symbol",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" var balance",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" UFix64",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let description",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let externalURL",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let logos",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" MetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Medias",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let storagePathIdentifier",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let receiverPathIdentifier",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub",props:{style:{color:"#D8DEE9"}}},{content:" let providerPathIdentifier",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" String",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    init",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        name",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        symbol",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        balance",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"UFix64",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        description",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        externalURL",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        logos",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Medias",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        storagePathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        receiverPathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        providerPathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"String",props:{style:{color:"#D8DEE9"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    ) ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"name ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"name",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"symbol ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"symbol",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"balance ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"balance",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"description ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"description",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"externalURL ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"externalURL",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"logos ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"logos",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"storagePathIdentifier ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"storagePathIdentifier",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"receiverPathIdentifier ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"receiverPathIdentifier",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"providerPathIdentifier ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"providerPathIdentifier",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"addBalance",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"_ addition",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        self.",props:{style:{color:"#D8DEE9FF"}}},{content:"balance ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"self",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"balance ",props:{style:{color:"#D8DEE9"}}},{content:"+ ",props:{style:{color:"#81A1C1"}}},{content:"addition",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Returns a dictionary of VaultInfo indexed on the Type of Vault",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"getAllVaultInfoInAddressStorage",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"_ address",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"VaultInfo",props:{style:{color:"#D8DEE9"}}},{content:"} {",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    // Get the account",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#D8DEE9FF"}}},{content:"account",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"AuthAccount ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAuthAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Init for return value",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let balances",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"VaultInfo",props:{style:{color:"#D8DEE9"}}},{content:"} ",props:{style:{color:"#ECEFF4"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"{}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    // Assign the type we'll need",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let vaultType",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}},{content:"@",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"FungibleToken.",props:{style:{color:"#D8DEE9FF"}}},{content:"Balance",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" MetadataViews.",props:{style:{color:"#D8DEE9FF"}}},{content:"Resolver",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let ftViewType",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:"<",props:{style:{color:"#ECEFF4"}}},{content:"FungibleTokenMetadataViews",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"FTView",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#ECEFF4"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    // Iterate over all stored items & get the path if the type is what we're looking for",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"forEachStored",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"fun",props:{style:{color:"#88C0D0"}}},{content:" (",props:{style:{color:"#D8DEE9FF"}}},{content:"path",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"StoragePath",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#D8DEE9"}}},{content:"): ",props:{style:{color:"#D8DEE9FF"}}},{content:"Bool ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        if type.isSubtype(",props:{style:{color:"#D8DEE9FF"}}},{content:"of",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"vaultType",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            // Get a reference to the vault & its balance",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"            if let ",props:{style:{color:"#D8DEE9FF"}}},{content:"vaultRef ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"account",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#D8DEE9"}}},{content:"<&",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"FungibleToken.",props:{style:{color:"#D8DEE9FF"}}},{content:"Balance",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}},{content:" MetadataViews.",props:{style:{color:"#D8DEE9FF"}}},{content:"Resolver",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"from",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" path",props:{style:{color:"#D8DEE9FF"}}},{content:") {",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                let ",props:{style:{color:"#D8DEE9FF"}}},{content:"balance ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"vaultRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"balance",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"                // Attempt to resolve metadata on the vault",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                if let ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"vaultRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"resolveView",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"ftViewType",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"as",props:{style:{color:"#D8DEE9"}}},{content:"! ",props:{style:{color:"#81A1C1"}}},{content:"FungibleTokenMetadataViews",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"FTView",props:{style:{color:"#D8DEE9"}}},{content:"? ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                    // Insert a new info struct if it's the first time we've seen the vault type",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                    if !balances.containsKey(type) ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                        let ",props:{style:{color:"#81A1C1"}}},{content:"vaultInfo ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"VaultInfo",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                            name",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"name ",props:{style:{color:"#D8DEE9"}}},{content:"?? ",props:{style:{color:"#81A1C1"}}},{content:"vaultRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getType",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"identifier",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            symbol",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"symbol",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            balance",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"balance",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            description",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"description",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            externalURL",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"externalURL",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"url",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            logos",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftDisplay",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"logos",props:{style:{color:"#D8DEE9"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            storagePathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"path",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"toString",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            receiverPathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftVaultData",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"receiverPath",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"toString",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}},{content:",",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                            providerPathIdentifier",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"ftView",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"ftVaultData",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"providerPath",props:{style:{color:"#D8DEE9"}}},{content:"?.",props:{style:{color:"#ECEFF4"}}},{content:"toString",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                        )",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                        balances",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"insert",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"key",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"vaultInfo",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                    }",props:{style:{color:"#ECEFF4"}}},{content:" else ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                        // Otherwise just update the balance of the vault (unlikely we'll see the same type twice in",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                        // the same account, but we want to cover the case)",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"                        balances",props:{style:{color:"#D8DEE9"}}},{content:"[",props:{style:{color:"#D8DEE9FF"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"!",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"addBalance",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"balance",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"                }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            }",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        return ",props:{style:{color:"#D8DEE9"}}},{content:"true",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    })",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    return balances",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"}",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Takes two dictionaries containing VaultInfo structs indexed on the type of vault they represent &",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// returns a single dictionary containg the summed balance of each respective vault type",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9"}}},{content:"merge",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"_ d1",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"VaultInfo",props:{style:{color:"#D8DEE9"}}},{content:"}, ",props:{style:{color:"#ECEFF4"}}},{content:"_ d2",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"VaultInfo",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#ECEFF4"}}},{content:"VaultInfo",props:{style:{color:"#D8DEE9"}}},{content:"} {",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    for type in d1.keys ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        if ",props:{style:{color:"#81A1C1"}}},{content:"d2",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"containsKey",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            d1",props:{style:{color:"#D8DEE9"}}},{content:"[",props:{style:{color:"#D8DEE9FF"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"!",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"addBalance",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"d2",props:{style:{color:"#D8DEE9"}}},{content:"[",props:{style:{color:"#D8DEE9FF"}}},{content:"type",props:{style:{color:"#D8DEE9"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"!",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"balance",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    return ",props:{style:{color:"#D8DEE9FF"}}},{content:"d1",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// Queries for FT.Vault info of all FT.Vaults in the specified account and all of its linked accounts",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// @param address: Address of the account to query FT.Vault data",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// @return A mapping of VaultInfo struct indexed on the Type of Vault",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"pub fun ",props:{style:{color:"#D8DEE9FF"}}},{content:"main",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" Address",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" VaultInfo",props:{style:{color:"#D8DEE9FF"}}},{content:"} {",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    // Get the balance info for the given address",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    var ",props:{style:{color:"#81A1C1"}}},{content:"balances",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"Type",props:{style:{color:"#D8DEE9FF"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" VaultInfo",props:{style:{color:"#D8DEE9FF"}}},{content:"} ",props:{style:{color:"#ECEFF4"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAllVaultInfoInAddressStorage",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    ",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    /* Iterate over any linked accounts */ ",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    //",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    // Get reference to LinkedAccounts.Collection if it exists",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    if let ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"getAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getCapability",props:{style:{color:"#D8DEE9"}}},{content:"<",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"            &",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionPublic",props:{style:{color:"#D8DEE9"}}},{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        >",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionPublicPath",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#88C0D0"}}},{content:"() ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        // Iterate over each linked account in Collection",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        for linkedAccount ",props:{style:{color:"#D8DEE9"}}},{content:"in ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getLinkedAccountAddresses",props:{style:{color:"#88C0D0"}}},{content:"() ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            // Ensure all vault type balances are pooled across all addresses",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"            balances ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"merge",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"balances",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"getAllVaultInfoInAddressStorage",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"linkedAccount",props:{style:{color:"#D8DEE9"}}},{content:"))",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    return ",props:{style:{color:"#81A1C1"}}},{content:"balances ",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"js"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["The above script returns a dictionary of ",(0,n.jsx)(t.code,{children:"VaultInfo"})," structs indexed on the Vault Type and containing relevant Vault metadata. If the Vault doesn\u2019t resolve ",(0,n.jsx)(t.code,{children:"FungibleTokenMetadataViews"}),", your client will at least be guaranteed to receive the Type, storagePathIdentifier and balance of each Vault in storage."]}),"\n",(0,n.jsx)(t.p,{children:"The returned data at the end of address iteration should be sufficient to achieve a unified balance of all Vaults of similar types across all of a user\u2019s associated account as well as a more granular per account view."}),"\n",(0,n.jsx)(t.h3,{id:"use-child-account-fungibletokens-signing-as-parent",children:"Use Child Account FungibleTokens Signing As Parent"}),"\n",(0,n.jsx)(t.p,{children:"A user with tokens in one of their linked accounts will likely want to utilize said tokens. In this example, the user will sign a transaction a transaction with their authenticated account that retrieves a reference to a linked account\u2019s Flow Provider, enabling withdrawal from the linked account having signed with the main account."}),"\n",(0,n.jsx)(E.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"FungibleToken ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../../contracts/utility/FungibleToken.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"FlowToken ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../../contracts/FlowToken.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../../contracts/LinkedAccounts.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"transaction",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"fundingChildAddress",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:", ",props:{style:{color:"#ECEFF4"}}},{content:"withdrawAmount",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#81A1C1"}}},{content:"paymentVault",props:{style:{color:"#D8DEE9"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" @FungibleToken",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Vault",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    prepare",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"signer",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"AuthAccount",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        // Get a reference to the signer's LinkedAccounts.Collection from storage",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        let ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef",props:{style:{color:"#D8DEE9"}}},{content:": &",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection ",props:{style:{color:"#D8DEE9FF"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"signer",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#D8DEE9"}}},{content:"<&",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                from",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionStoragePath",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"            ) ",props:{style:{color:"#D8DEE9FF"}}},{content:"?? ",props:{style:{color:"#81A1C1"}}},{content:"panic",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"Could not borrow reference to LinkedAccounts.Collection in signer's account at expected path!",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        // Borrow a reference to the signer's specified child account",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        let ",props:{style:{color:"#81A1C1"}}},{content:"childAccount",props:{style:{color:"#D8DEE9"}}},{content:": &",props:{style:{color:"#81A1C1"}}},{content:"AuthAccount ",props:{style:{color:"#D8DEE9FF"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"getChildAccountRef",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"address",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"fundingChildAddress",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            ?? ",props:{style:{color:"#81A1C1"}}},{content:"panic",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"Signer does not have access to specified account",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        // Get a reference to the child account's FlowToken Vault",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        let ",props:{style:{color:"#81A1C1"}}},{content:"vaultRef",props:{style:{color:"#D8DEE9"}}},{content:": &",props:{style:{color:"#81A1C1"}}},{content:"TicketToken",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Vault ",props:{style:{color:"#D8DEE9FF"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"childAccount",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#D8DEE9"}}},{content:"<&",props:{style:{color:"#81A1C1"}}},{content:"FlowToken",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Vault",props:{style:{color:"#D8DEE9"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                from",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"/",props:{style:{color:"#81A1C1"}}},{content:"storage",props:{style:{color:"#D8DEE9"}}},{content:"/",props:{style:{color:"#81A1C1"}}},{content:"flowToken",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"            ) ",props:{style:{color:"#D8DEE9FF"}}},{content:"?? ",props:{style:{color:"#81A1C1"}}},{content:"panic",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"Could not borrow a reference to the child account's TicketToken Vault at expected path!",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"        self",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"paymentVault ",props:{style:{color:"#D8DEE9"}}},{content:"<-",props:{style:{color:"#81A1C1"}}},{content:"vaultRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"withdraw",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"amount",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"withdrawAmount",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    execute ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"      // Do stuff with the vault...(e.g. mint NFT)",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"js"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["At the end of this transaction, you\u2019ve gotten a reference to the specified account\u2019s Flow Provider. You could continue for a number of use cases - minting or purchasing an NFT with funds from the linked account, transfer between accounts, etc. A similar approach could get you reference to the linked account\u2019s ",(0,n.jsx)(t.code,{children:"NonFungibleToken.Provider"}),", enabling NFT transfer, etc."]}),"\n",(0,n.jsx)(t.h3,{id:"revoking-secondary-access-on-a-linked-account",children:"Revoking Secondary Access on a Linked Account"}),"\n",(0,n.jsx)(t.p,{children:"The expected uses of child accounts for progressive onboarding implies that they will be accounts with shared access. A user may decide that they no longer want secondary parties to have access to the child account."}),"\n",(0,n.jsx)(t.p,{children:"There are two ways a party can have delegated access to an account - keys and AuthAccount Capability. To revoke access via keys, a user would iterate over account keys and revoke any that the user does not custody."}),"\n",(0,n.jsxs)(t.p,{children:["Things are not as straightforward respect to AuthAccount Capabilities, at least not until Capability Controllers enter the picture. This is discussed in more detail in ",(0,n.jsx)(t.a,{href:"https://forum.onflow.org/t/account-linking-authaccount-capabilities-management/4314",children:"the Flip"}),". For now, we recommend that if users want to revoke secondary access, they transfer any assets from the relevant child account and remove it altogether."]}),"\n",(0,n.jsx)(t.h3,{id:"remove-a-child-account",children:"Remove a Child Account"}),"\n",(0,n.jsxs)(t.p,{children:["As mentioned above, if a user no longer wishes to share access with another party, it\u2019s recommended that desired assets be transferred from that account to either their main account or other linked accounts and the linked account be removed from their ",(0,n.jsx)(t.code,{children:"LinkedAccounts.Collection"}),". Let\u2019s see how to complete that removal."]}),"\n",(0,n.jsx)(E.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts ",props:{style:{color:"#8FBCBB"}}},{content:"from ",props:{style:{color:"#81A1C1"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"../../contracts/LinkedAccounts.cdc",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"/// This transaction removes access to a linked account from the signer's LinkedAccounts Collection.",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// **NOTE:** The signer will no longer have access to the removed child account via AuthAccount Capability, so care",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// should be taken to ensure any assets in the child account have been first transferred as well as checking active",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"/// keys that need to be revoked have been done so (a detail that will largely depend on you dApps custodial model)",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"///",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"transaction",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"childAddress",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#81A1C1"}}},{content:"collectionRef",props:{style:{color:"#D8DEE9"}}},{content:": &",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9FF"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    ",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    prepare",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"signer",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"AuthAccount",props:{style:{color:"#D8DEE9"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        // Assign a reference to signer's LinkedAccounts.Collection",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        self",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"collectionRef ",props:{style:{color:"#D8DEE9"}}},{content:"= ",props:{style:{color:"#81A1C1"}}},{content:"signer",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"borrow",props:{style:{color:"#D8DEE9"}}},{content:"<&",props:{style:{color:"#81A1C1"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"Collection",props:{style:{color:"#D8DEE9"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"                from",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"LinkedAccounts",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"CollectionStoragePath",props:{style:{color:"#D8DEE9"}}}]},{tokens:[{content:"            ) ",props:{style:{color:"#D8DEE9FF"}}},{content:"?? ",props:{style:{color:"#81A1C1"}}},{content:"panic",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"Signer does not have a LinkedAccounts Collection configured!",props:{style:{color:"#A3BE8C"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    execute ",props:{style:{color:"#D8DEE9"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        // Remove child account, revoking any granted Capabilities",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"        self",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"collectionRef",props:{style:{color:"#D8DEE9"}}},{content:".",props:{style:{color:"#ECEFF4"}}},{content:"removeLinkedAccount",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"withAddress",props:{style:{color:"#D8DEE9"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"childAddress",props:{style:{color:"#D8DEE9"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:" ",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"js"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["After removal, the signer no longer has delegated access to the removed account via their ",(0,n.jsx)(t.code,{children:"Collection"}),". Also note that currently a user can grant their linked accounts generic Capabilities. During removal, those Capabilities are revoked, removing the linked account\u2019s access via their ",(0,n.jsx)(t.code,{children:"Handler"}),"."]})]})}const D=function(o){void 0===o&&(o={});const{wrapper:t}=Object.assign({},(0,r.ah)(),o.components);return t?(0,n.jsx)(t,Object.assign({},o,{children:(0,n.jsx)(y,o)})):y(o)};function u(o,t){throw new Error("Expected "+(t?"component":"object")+" `"+o+"` to be defined: you likely forgot to import, pass, or provide it.")}},56239:(o,t,e)=>{e.d(t,{Z:()=>n});const n=e.p+"assets/images/account-hierarchy-d05004d08b74e506eb412feec0b39760.jpg"},25630:(o,t,e)=>{e.d(t,{Z:()=>n});const n=e.p+"assets/images/child-account-manager-73162b0711fa24a31b7a03bc4fb65577.jpg"},79180:(o,t,e)=>{e.d(t,{Z:()=>n});const n=e.p+"assets/images/user-account-97072a21a0127ed63107c62265c083f7.jpg"}}]);