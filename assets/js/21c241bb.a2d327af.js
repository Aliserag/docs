"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3997],{52720:(e,t,o)=>{o.r(t),o.d(t,{CH:()=>d,assets:()=>l,chCodeConfig:()=>u,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>p});o(67294);var n=o(85893),r=o(11151),s=o(59794);const c={title:"NFT Storefront Smart Contract"},i=void 0,a={unversionedId:"cadence/core-contracts/nft-storefront",id:"cadence/core-contracts/nft-storefront",title:"NFT Storefront Smart Contract",description:"Primer",source:"@site/docs/cadence/core-contracts/nft-storefront.md",sourceDirName:"cadence/core-contracts",slug:"/cadence/core-contracts/nft-storefront",permalink:"/docs/cadence/core-contracts/nft-storefront",draft:!1,editUrl:"https://github.com/onflow/docs/tree/main/docs/cadence/core-contracts/nft-storefront.md",tags:[],version:"current",lastUpdatedBy:"Bastian M\xfcller",lastUpdatedAt:1683839438,formattedLastUpdatedAt:"May 11, 2023",frontMatter:{title:"NFT Storefront Smart Contract"},sidebar:"tutorialSidebar",previous:{title:"NFT Metadata Contract",permalink:"/docs/cadence/core-contracts/nft-metadata"},next:{title:"Non-Fungible Token Contract",permalink:"/docs/cadence/core-contracts/non-fungible-token"}},l={},p=[{value:"Primer",id:"primer",level:2},{value:"Functional Overview",id:"functional-overview",level:2},{value:"Selling NFTs",id:"selling-nfts",level:2},{value:"Creating a successful listing using the NFTStorefrontV2 contract.",id:"creating-a-successful-listing-using-the-nftstorefrontv2-contract",level:2},{value:"<strong>Scenario 1:</strong> Selling NFTs corresponds to more than one cryptocurrency, i.e. FLOW, FUSD etc.",id:"scenario-1-selling-nfts-corresponds-to-more-than-one-cryptocurrency-ie-flow-fusd-etc",level:3},{value:"<strong>Scenario 2:</strong>  Peer-to-Peer (p2p) listing of NFT: A listing anyone can fulfil.",id:"scenario-2--peer-to-peer-p2p-listing-of-nft-a-listing-anyone-can-fulfil",level:3},{value:"<strong>Scenario 3:</strong> The seller wants to list its NFT in different marketplaces.",id:"scenario-3-the-seller-wants-to-list-its-nft-in-different-marketplaces",level:3},{value:"Considerations",id:"considerations",level:3},{value:"Purchasing NFTs",id:"purchasing-nfts",level:2},{value:"Considerations",id:"considerations-1",level:3},{value:"Enabling creator royalties for NFTs",id:"enabling-creator-royalties-for-nfts",level:2},{value:"Enabling marketplace commissions for NFT sales",id:"enabling-marketplace-commissions-for-nft-sales",level:2},{value:"APIs &amp; Events offered by NFTStorefrontV2",id:"apis--events-offered-by-nftstorefrontv2",level:2},{value:"Resource Interface <code>ListingPublic</code>",id:"resource-interface-listingpublic",level:2},{value:"Functions",id:"functions",level:3},{value:"Resource <code>Storefront</code>",id:"resource-storefront",level:2},{value:"Initializer",id:"initializer",level:3},{value:"Functions",id:"functions-1",level:3},{value:"Resource Interface <code>StorefrontPublic</code>",id:"resource-interface-storefrontpublic",level:2},{value:"Functions",id:"functions-2",level:3},{value:"Events",id:"events",level:2},{value:"Glossary",id:"glossary",level:2}],d={annotations:s.ds,Code:s.EK},u={staticMediaQuery:"not screen, (max-width: 768px)",theme:{name:"nord",type:"dark",semanticHighlighting:!0,colors:{focusBorder:"#3b4252",foreground:"#d8dee9","activityBar.background":"#2e3440","activityBar.dropBackground":"#3b4252","activityBar.foreground":"#d8dee9","activityBar.activeBorder":"#88c0d0","activityBar.activeBackground":"#3b4252","activityBarBadge.background":"#88c0d0","activityBarBadge.foreground":"#2e3440","badge.foreground":"#2e3440","badge.background":"#88c0d0","button.background":"#88c0d0ee","button.foreground":"#2e3440","button.hoverBackground":"#88c0d0","button.secondaryBackground":"#434c5e","button.secondaryForeground":"#d8dee9","button.secondaryHoverBackground":"#4c566a","charts.red":"#bf616a","charts.blue":"#81a1c1","charts.yellow":"#ebcb8b","charts.orange":"#d08770","charts.green":"#a3be8c","charts.purple":"#b48ead","charts.foreground":"#d8dee9","charts.lines":"#88c0d0","debugConsole.infoForeground":"#88c0d0","debugConsole.warningForeground":"#ebcb8b","debugConsole.errorForeground":"#bf616a","debugConsole.sourceForeground":"#616e88","debugConsoleInputIcon.foreground":"#81a1c1","debugExceptionWidget.background":"#4c566a","debugExceptionWidget.border":"#2e3440","debugToolBar.background":"#3b4252",descriptionForeground:"#d8dee9e6","diffEditor.insertedTextBackground":"#81a1c133","diffEditor.removedTextBackground":"#bf616a4d","dropdown.background":"#3b4252","dropdown.border":"#3b4252","dropdown.foreground":"#d8dee9","editorActiveLineNumber.foreground":"#d8dee9cc","editorCursor.foreground":"#d8dee9","editorHint.border":"#ebcb8b00","editorHint.foreground":"#ebcb8b","editorIndentGuide.background":"#434c5eb3","editorIndentGuide.activeBackground":"#4c566a","editorInlayHint.background":"#434c5e","editorInlayHint.foreground":"#d8dee9","editorLineNumber.foreground":"#4c566a","editorLineNumber.activeForeground":"#d8dee9","editorWhitespace.foreground":"#4c566ab3","editorWidget.background":"#2e3440","editorWidget.border":"#3b4252","editor.background":"#2e3440","editor.foreground":"#d8dee9","editor.hoverHighlightBackground":"#3b4252","editor.findMatchBackground":"#88c0d066","editor.findMatchHighlightBackground":"#88c0d033","editor.findRangeHighlightBackground":"#88c0d033","editor.lineHighlightBackground":"#3b4252","editor.lineHighlightBorder":"#3b4252","editor.inactiveSelectionBackground":"#434c5ecc","editor.inlineValuesBackground":"#4c566a","editor.inlineValuesForeground":"#eceff4","editor.selectionBackground":"#434c5ecc","editor.selectionHighlightBackground":"#434c5ecc","editor.rangeHighlightBackground":"#434c5e52","editor.wordHighlightBackground":"#81a1c166","editor.wordHighlightStrongBackground":"#81a1c199","editor.stackFrameHighlightBackground":"#5e81ac","editor.focusedStackFrameHighlightBackground":"#5e81ac","editorError.foreground":"#bf616a","editorError.border":"#bf616a00","editorWarning.foreground":"#ebcb8b","editorWarning.border":"#ebcb8b00","editorBracketMatch.background":"#2e344000","editorBracketMatch.border":"#88c0d0","editorBracketHighlight.foreground1":"#8fbcbb","editorBracketHighlight.foreground2":"#88c0d0","editorBracketHighlight.foreground3":"#81a1c1","editorBracketHighlight.foreground4":"#5e81ac","editorBracketHighlight.foreground5":"#8fbcbb","editorBracketHighlight.foreground6":"#88c0d0","editorBracketHighlight.unexpectedBracket.foreground":"#bf616a","editorCodeLens.foreground":"#4c566a","editorGroup.background":"#2e3440","editorGroup.border":"#3b425201","editorGroup.dropBackground":"#3b425299","editorGroupHeader.border":"#3b425200","editorGroupHeader.noTabsBackground":"#2e3440","editorGroupHeader.tabsBackground":"#2e3440","editorGroupHeader.tabsBorder":"#3b425200","editorGutter.background":"#2e3440","editorGutter.modifiedBackground":"#ebcb8b","editorGutter.addedBackground":"#a3be8c","editorGutter.deletedBackground":"#bf616a","editorHoverWidget.background":"#3b4252","editorHoverWidget.border":"#3b4252","editorLink.activeForeground":"#88c0d0","editorMarkerNavigation.background":"#5e81acc0","editorMarkerNavigationError.background":"#bf616ac0","editorMarkerNavigationWarning.background":"#ebcb8bc0","editorOverviewRuler.border":"#3b4252","editorOverviewRuler.currentContentForeground":"#3b4252","editorOverviewRuler.incomingContentForeground":"#3b4252","editorOverviewRuler.findMatchForeground":"#88c0d066","editorOverviewRuler.rangeHighlightForeground":"#88c0d066","editorOverviewRuler.selectionHighlightForeground":"#88c0d066","editorOverviewRuler.wordHighlightForeground":"#88c0d066","editorOverviewRuler.wordHighlightStrongForeground":"#88c0d066","editorOverviewRuler.modifiedForeground":"#ebcb8b","editorOverviewRuler.addedForeground":"#a3be8c","editorOverviewRuler.deletedForeground":"#bf616a","editorOverviewRuler.errorForeground":"#bf616a","editorOverviewRuler.warningForeground":"#ebcb8b","editorOverviewRuler.infoForeground":"#81a1c1","editorRuler.foreground":"#434c5e","editorSuggestWidget.background":"#2e3440","editorSuggestWidget.border":"#3b4252","editorSuggestWidget.foreground":"#d8dee9","editorSuggestWidget.focusHighlightForeground":"#88c0d0","editorSuggestWidget.highlightForeground":"#88c0d0","editorSuggestWidget.selectedBackground":"#434c5e","editorSuggestWidget.selectedForeground":"#d8dee9","extensionButton.prominentForeground":"#d8dee9","extensionButton.prominentBackground":"#434c5e","extensionButton.prominentHoverBackground":"#4c566a",errorForeground:"#bf616a","gitDecoration.modifiedResourceForeground":"#ebcb8b","gitDecoration.deletedResourceForeground":"#bf616a","gitDecoration.untrackedResourceForeground":"#a3be8c","gitDecoration.ignoredResourceForeground":"#d8dee966","gitDecoration.conflictingResourceForeground":"#5e81ac","gitDecoration.submoduleResourceForeground":"#8fbcbb","gitDecoration.stageDeletedResourceForeground":"#bf616a","gitDecoration.stageModifiedResourceForeground":"#ebcb8b","input.background":"#3b4252","input.foreground":"#d8dee9","input.placeholderForeground":"#d8dee999","input.border":"#3b4252","inputOption.activeBackground":"#5e81ac","inputOption.activeBorder":"#5e81ac","inputOption.activeForeground":"#eceff4","inputValidation.errorBackground":"#bf616a","inputValidation.errorBorder":"#bf616a","inputValidation.infoBackground":"#81a1c1","inputValidation.infoBorder":"#81a1c1","inputValidation.warningBackground":"#d08770","inputValidation.warningBorder":"#d08770","keybindingLabel.background":"#4c566a","keybindingLabel.border":"#4c566a","keybindingLabel.bottomBorder":"#4c566a","keybindingLabel.foreground":"#d8dee9","list.activeSelectionBackground":"#88c0d0","list.activeSelectionForeground":"#2e3440","list.inactiveSelectionBackground":"#434c5e","list.inactiveSelectionForeground":"#d8dee9","list.inactiveFocusBackground":"#434c5ecc","list.hoverForeground":"#eceff4","list.focusForeground":"#d8dee9","list.focusBackground":"#88c0d099","list.focusHighlightForeground":"#eceff4","list.hoverBackground":"#3b4252","list.dropBackground":"#88c0d099","list.highlightForeground":"#88c0d0","list.errorForeground":"#bf616a","list.warningForeground":"#ebcb8b","merge.currentHeaderBackground":"#81a1c166","merge.currentContentBackground":"#81a1c14d","merge.incomingHeaderBackground":"#8fbcbb66","merge.incomingContentBackground":"#8fbcbb4d","merge.border":"#3b425200","minimap.background":"#2e3440","minimap.errorHighlight":"#bf616acc","minimap.findMatchHighlight":"#88c0d0","minimap.selectionHighlight":"#88c0d0cc","minimap.warningHighlight":"#ebcb8bcc","minimapGutter.addedBackground":"#a3be8c","minimapGutter.deletedBackground":"#bf616a","minimapGutter.modifiedBackground":"#ebcb8b","minimapSlider.activeBackground":"#434c5eaa","minimapSlider.background":"#434c5e99","minimapSlider.hoverBackground":"#434c5eaa","notification.background":"#3b4252","notification.buttonBackground":"#434c5e","notification.buttonForeground":"#d8dee9","notification.buttonHoverBackground":"#4c566a","notification.errorBackground":"#bf616a","notification.errorForeground":"#2e3440","notification.foreground":"#d8dee9","notification.infoBackground":"#88c0d0","notification.infoForeground":"#2e3440","notification.warningBackground":"#ebcb8b","notification.warningForeground":"#2e3440","notificationCenter.border":"#3b425200","notificationCenterHeader.background":"#2e3440","notificationCenterHeader.foreground":"#88c0d0","notificationLink.foreground":"#88c0d0","notifications.background":"#3b4252","notifications.border":"#2e3440","notifications.foreground":"#d8dee9","notificationToast.border":"#3b425200","panel.background":"#2e3440","panel.border":"#3b4252","panelTitle.activeBorder":"#88c0d000","panelTitle.activeForeground":"#88c0d0","panelTitle.inactiveForeground":"#d8dee9","peekView.border":"#4c566a","peekViewEditor.background":"#2e3440","peekViewEditorGutter.background":"#2e3440","peekViewEditor.matchHighlightBackground":"#88c0d04d","peekViewResult.background":"#2e3440","peekViewResult.fileForeground":"#88c0d0","peekViewResult.lineForeground":"#d8dee966","peekViewResult.matchHighlightBackground":"#88c0d0cc","peekViewResult.selectionBackground":"#434c5e","peekViewResult.selectionForeground":"#d8dee9","peekViewTitle.background":"#3b4252","peekViewTitleDescription.foreground":"#d8dee9","peekViewTitleLabel.foreground":"#88c0d0","pickerGroup.border":"#3b4252","pickerGroup.foreground":"#88c0d0","progressBar.background":"#88c0d0","quickInputList.focusBackground":"#88c0d0","quickInputList.focusForeground":"#2e3440","sash.hoverBorder":"#88c0d0","scrollbar.shadow":"#00000066","scrollbarSlider.activeBackground":"#434c5eaa","scrollbarSlider.background":"#434c5e99","scrollbarSlider.hoverBackground":"#434c5eaa","selection.background":"#88c0d099","sideBar.background":"#2e3440","sideBar.foreground":"#d8dee9","sideBar.border":"#3b4252","sideBarSectionHeader.background":"#3b4252","sideBarSectionHeader.foreground":"#d8dee9","sideBarTitle.foreground":"#d8dee9","statusBar.background":"#3b4252","statusBar.debuggingBackground":"#5e81ac","statusBar.debuggingForeground":"#d8dee9","statusBar.noFolderForeground":"#d8dee9","statusBar.noFolderBackground":"#3b4252","statusBar.foreground":"#d8dee9","statusBarItem.activeBackground":"#4c566a","statusBarItem.hoverBackground":"#434c5e","statusBarItem.prominentBackground":"#3b4252","statusBarItem.prominentHoverBackground":"#434c5e","statusBarItem.errorBackground":"#3b4252","statusBarItem.errorForeground":"#bf616a","statusBarItem.warningBackground":"#ebcb8b","statusBarItem.warningForeground":"#2e3440","statusBar.border":"#3b425200","tab.activeBackground":"#3b4252","tab.activeForeground":"#d8dee9","tab.border":"#3b425200","tab.activeBorder":"#88c0d000","tab.unfocusedActiveBorder":"#88c0d000","tab.inactiveBackground":"#2e3440","tab.inactiveForeground":"#d8dee966","tab.unfocusedActiveForeground":"#d8dee999","tab.unfocusedInactiveForeground":"#d8dee966","tab.hoverBackground":"#3b4252cc","tab.unfocusedHoverBackground":"#3b4252b3","tab.hoverBorder":"#88c0d000","tab.unfocusedHoverBorder":"#88c0d000","tab.activeBorderTop":"#88c0d000","tab.unfocusedActiveBorderTop":"#88c0d000","tab.lastPinnedBorder":"#4c566a","terminal.background":"#2e3440","terminal.foreground":"#d8dee9","terminal.ansiBlack":"#3b4252","terminal.ansiRed":"#bf616a","terminal.ansiGreen":"#a3be8c","terminal.ansiYellow":"#ebcb8b","terminal.ansiBlue":"#81a1c1","terminal.ansiMagenta":"#b48ead","terminal.ansiCyan":"#88c0d0","terminal.ansiWhite":"#e5e9f0","terminal.ansiBrightBlack":"#4c566a","terminal.ansiBrightRed":"#bf616a","terminal.ansiBrightGreen":"#a3be8c","terminal.ansiBrightYellow":"#ebcb8b","terminal.ansiBrightBlue":"#81a1c1","terminal.ansiBrightMagenta":"#b48ead","terminal.ansiBrightCyan":"#8fbcbb","terminal.ansiBrightWhite":"#eceff4","terminal.tab.activeBorder":"#88c0d0","textBlockQuote.background":"#3b4252","textBlockQuote.border":"#81a1c1","textCodeBlock.background":"#4c566a","textLink.activeForeground":"#88c0d0","textLink.foreground":"#88c0d0","textPreformat.foreground":"#8fbcbb","textSeparator.foreground":"#eceff4","titleBar.activeBackground":"#2e3440","titleBar.activeForeground":"#d8dee9","titleBar.border":"#2e344000","titleBar.inactiveBackground":"#2e3440","titleBar.inactiveForeground":"#d8dee966","tree.indentGuidesStroke":"#616e88","walkThrough.embeddedEditorBackground":"#2e3440","welcomePage.buttonBackground":"#434c5e","welcomePage.buttonHoverBackground":"#4c566a","widget.shadow":"#00000066"},tokenColors:[{settings:{foreground:"#d8dee9ff",background:"#2e3440ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{name:"Comment",scope:"comment",settings:{foreground:"#616E88"}},{name:"Constant Character",scope:"constant.character",settings:{foreground:"#EBCB8B"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#EBCB8B"}},{name:"Constant Language",scope:"constant.language",settings:{foreground:"#81A1C1"}},{name:"Constant Numeric",scope:"constant.numeric",settings:{foreground:"#B48EAD"}},{name:"Constant Regexp",scope:"constant.regexp",settings:{foreground:"#EBCB8B"}},{name:"Entity Name Class/Type",scope:["entity.name.class","entity.name.type.class"],settings:{foreground:"#8FBCBB"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#88C0D0"}},{name:"Entity Name Tag",scope:"entity.name.tag",settings:{foreground:"#81A1C1"}},{name:"Entity Other Attribute Name",scope:"entity.other.attribute-name",settings:{foreground:"#8FBCBB"}},{name:"Entity Other Inherited Class",scope:"entity.other.inherited-class",settings:{fontStyle:"bold",foreground:"#8FBCBB"}},{name:"Invalid Deprecated",scope:"invalid.deprecated",settings:{foreground:"#D8DEE9",background:"#EBCB8B"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#D8DEE9",background:"#BF616A"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#81A1C1"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#81A1C1"}},{name:"Keyword Other New",scope:"keyword.other.new",settings:{foreground:"#81A1C1"}},{name:"Markup Bold",scope:"markup.bold",settings:{fontStyle:"bold"}},{name:"Markup Changed",scope:"markup.changed",settings:{foreground:"#EBCB8B"}},{name:"Markup Deleted",scope:"markup.deleted",settings:{foreground:"#BF616A"}},{name:"Markup Inserted",scope:"markup.inserted",settings:{foreground:"#A3BE8C"}},{name:"Meta Preprocessor",scope:"meta.preprocessor",settings:{foreground:"#5E81AC"}},{name:"Punctuation",scope:"punctuation",settings:{foreground:"#ECEFF4"}},{name:"Punctuation Definition Parameters",scope:["punctuation.definition.method-parameters","punctuation.definition.function-parameters","punctuation.definition.parameters"],settings:{foreground:"#ECEFF4"}},{name:"Punctuation Definition Tag",scope:"punctuation.definition.tag",settings:{foreground:"#81A1C1"}},{name:"Punctuation Definition Comment",scope:["punctuation.definition.comment","punctuation.end.definition.comment","punctuation.start.definition.comment"],settings:{foreground:"#616E88"}},{name:"Punctuation Section",scope:"punctuation.section",settings:{foreground:"#ECEFF4"}},{name:"Punctuation Section Embedded",scope:["punctuation.section.embedded.begin","punctuation.section.embedded.end"],settings:{foreground:"#81A1C1"}},{name:"Punctuation Terminator",scope:"punctuation.terminator",settings:{foreground:"#81A1C1"}},{name:"Punctuation Variable",scope:"punctuation.definition.variable",settings:{foreground:"#81A1C1"}},{name:"Storage",scope:"storage",settings:{foreground:"#81A1C1"}},{name:"String",scope:"string",settings:{foreground:"#A3BE8C"}},{name:"String Regexp",scope:"string.regexp",settings:{foreground:"#EBCB8B"}},{name:"Support Class",scope:"support.class",settings:{foreground:"#8FBCBB"}},{name:"Support Constant",scope:"support.constant",settings:{foreground:"#81A1C1"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#88C0D0"}},{name:"Support Function Construct",scope:"support.function.construct",settings:{foreground:"#81A1C1"}},{name:"Support Type",scope:"support.type",settings:{foreground:"#8FBCBB"}},{name:"Support Type Exception",scope:"support.type.exception",settings:{foreground:"#8FBCBB"}},{name:"Token Debug",scope:"token.debug-token",settings:{foreground:"#b48ead"}},{name:"Token Error",scope:"token.error-token",settings:{foreground:"#bf616a"}},{name:"Token Info",scope:"token.info-token",settings:{foreground:"#88c0d0"}},{name:"Token Warning",scope:"token.warn-token",settings:{foreground:"#ebcb8b"}},{name:"Variable",scope:"variable.other",settings:{foreground:"#D8DEE9"}},{name:"Variable Language",scope:"variable.language",settings:{foreground:"#81A1C1"}},{name:"Variable Parameter",scope:"variable.parameter",settings:{foreground:"#D8DEE9"}},{name:"[C/CPP] Punctuation Separator Pointer-Access",scope:"punctuation.separator.pointer-access.c",settings:{foreground:"#81A1C1"}},{name:"[C/CPP] Meta Preprocessor Include",scope:["source.c meta.preprocessor.include","source.c string.quoted.other.lt-gt.include"],settings:{foreground:"#8FBCBB"}},{name:"[C/CPP] Conditional Directive",scope:["source.cpp keyword.control.directive.conditional","source.cpp punctuation.definition.directive","source.c keyword.control.directive.conditional","source.c punctuation.definition.directive"],settings:{foreground:"#5E81AC",fontStyle:"bold"}},{name:"[CSS] Constant Other Color RGB Value",scope:"source.css constant.other.color.rgb-value",settings:{foreground:"#B48EAD"}},{name:"[CSS](Function) Meta Property-Value",scope:"source.css meta.property-value",settings:{foreground:"#88C0D0"}},{name:"[CSS] Media Queries",scope:["source.css keyword.control.at-rule.media","source.css keyword.control.at-rule.media punctuation.definition.keyword"],settings:{foreground:"#D08770"}},{name:"[CSS] Punctuation Definition Keyword",scope:"source.css punctuation.definition.keyword",settings:{foreground:"#81A1C1"}},{name:"[CSS] Support Type Property Name",scope:"source.css support.type.property-name",settings:{foreground:"#D8DEE9"}},{name:"[diff] Meta Range Context",scope:"source.diff meta.diff.range.context",settings:{foreground:"#8FBCBB"}},{name:"[diff] Meta Header From-File",scope:"source.diff meta.diff.header.from-file",settings:{foreground:"#8FBCBB"}},{name:"[diff] Punctuation Definition From-File",scope:"source.diff punctuation.definition.from-file",settings:{foreground:"#8FBCBB"}},{name:"[diff] Punctuation Definition Range",scope:"source.diff punctuation.definition.range",settings:{foreground:"#8FBCBB"}},{name:"[diff] Punctuation Definition Separator",scope:"source.diff punctuation.definition.separator",settings:{foreground:"#81A1C1"}},{name:"[Elixir](JakeBecker.elixir-ls) module names",scope:"entity.name.type.module.elixir",settings:{foreground:"#8FBCBB"}},{name:"[Elixir](JakeBecker.elixir-ls) module attributes",scope:"variable.other.readwrite.module.elixir",settings:{foreground:"#D8DEE9",fontStyle:"bold"}},{name:"[Elixir](JakeBecker.elixir-ls) atoms",scope:"constant.other.symbol.elixir",settings:{foreground:"#D8DEE9",fontStyle:"bold"}},{name:"[Elixir](JakeBecker.elixir-ls) modules",scope:"variable.other.constant.elixir",settings:{foreground:"#8FBCBB"}},{name:"[Go] String Format Placeholder",scope:"source.go constant.other.placeholder.go",settings:{foreground:"#EBCB8B"}},{name:"[Java](JavaDoc) Comment Block Documentation HTML Entities",scope:"source.java comment.block.documentation.javadoc punctuation.definition.entity.html",settings:{foreground:"#81A1C1"}},{name:"[Java](JavaDoc) Constant Other",scope:"source.java constant.other",settings:{foreground:"#D8DEE9"}},{name:"[Java](JavaDoc) Keyword Other Documentation",scope:"source.java keyword.other.documentation",settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Keyword Other Documentation Author",scope:"source.java keyword.other.documentation.author.javadoc",settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Keyword Other Documentation Directive/Custom",scope:["source.java keyword.other.documentation.directive","source.java keyword.other.documentation.custom"],settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Keyword Other Documentation See",scope:"source.java keyword.other.documentation.see.javadoc",settings:{foreground:"#8FBCBB"}},{name:"[Java] Meta Method-Call",scope:"source.java meta.method-call meta.method",settings:{foreground:"#88C0D0"}},{name:"[Java](JavaDoc) Meta Tag Template Link",scope:["source.java meta.tag.template.link.javadoc","source.java string.other.link.title.javadoc"],settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Meta Tag Template Value",scope:"source.java meta.tag.template.value.javadoc",settings:{foreground:"#88C0D0"}},{name:"[Java](JavaDoc) Punctuation Definition Keyword",scope:"source.java punctuation.definition.keyword.javadoc",settings:{foreground:"#8FBCBB"}},{name:"[Java](JavaDoc) Punctuation Definition Tag",scope:["source.java punctuation.definition.tag.begin.javadoc","source.java punctuation.definition.tag.end.javadoc"],settings:{foreground:"#616E88"}},{name:"[Java] Storage Modifier Import",scope:"source.java storage.modifier.import",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Modifier Package",scope:"source.java storage.modifier.package",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Type",scope:"source.java storage.type",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Type Annotation",scope:"source.java storage.type.annotation",settings:{foreground:"#D08770"}},{name:"[Java] Storage Type Generic",scope:"source.java storage.type.generic",settings:{foreground:"#8FBCBB"}},{name:"[Java] Storage Type Primitive",scope:"source.java storage.type.primitive",settings:{foreground:"#81A1C1"}},{name:"[JavaScript] Decorator",scope:["source.js punctuation.decorator","source.js meta.decorator variable.other.readwrite","source.js meta.decorator entity.name.function"],settings:{foreground:"#D08770"}},{name:"[JavaScript] Meta Object-Literal Key",scope:"source.js meta.object-literal.key",settings:{foreground:"#88C0D0"}},{name:"[JavaScript](JSDoc) Storage Type Class",scope:"source.js storage.type.class.jsdoc",settings:{foreground:"#8FBCBB"}},{name:"[JavaScript] String Template Literals Punctuation",scope:["source.js string.quoted.template punctuation.quasi.element.begin","source.js string.quoted.template punctuation.quasi.element.end","source.js string.template punctuation.definition.template-expression"],settings:{foreground:"#81A1C1"}},{name:"[JavaScript] Interpolated String Template Punctuation Functions",scope:"source.js string.quoted.template meta.method-call.with-arguments",settings:{foreground:"#ECEFF4"}},{name:"[JavaScript] String Template Literal Variable",scope:["source.js string.template meta.template.expression support.variable.property","source.js string.template meta.template.expression variable.other.object"],settings:{foreground:"#D8DEE9"}},{name:"[JavaScript] Support Type Primitive",scope:"source.js support.type.primitive",settings:{foreground:"#81A1C1"}},{name:"[JavaScript] Variable Other Object",scope:"source.js variable.other.object",settings:{foreground:"#D8DEE9"}},{name:"[JavaScript] Variable Other Read-Write Alias",scope:"source.js variable.other.readwrite.alias",settings:{foreground:"#8FBCBB"}},{name:"[JavaScript] Parentheses in Template Strings",scope:["source.js meta.embedded.line meta.brace.square","source.js meta.embedded.line meta.brace.round","source.js string.quoted.template meta.brace.square","source.js string.quoted.template meta.brace.round"],settings:{foreground:"#ECEFF4"}},{name:"[HTML] Constant Character Entity",scope:"text.html.basic constant.character.entity.html",settings:{foreground:"#EBCB8B"}},{name:"[HTML] Constant Other Inline-Data",scope:"text.html.basic constant.other.inline-data",settings:{foreground:"#D08770",fontStyle:"italic"}},{name:"[HTML] Meta Tag SGML Doctype",scope:"text.html.basic meta.tag.sgml.doctype",settings:{foreground:"#5E81AC"}},{name:"[HTML] Punctuation Definition Entity",scope:"text.html.basic punctuation.definition.entity",settings:{foreground:"#81A1C1"}},{name:"[INI] Entity Name Section Group-Title",scope:"source.properties entity.name.section.group-title.ini",settings:{foreground:"#88C0D0"}},{name:"[INI] Punctuation Separator Key-Value",scope:"source.properties punctuation.separator.key-value.ini",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Markup Fenced Code Block",scope:["text.html.markdown markup.fenced_code.block","text.html.markdown markup.fenced_code.block punctuation.definition"],settings:{foreground:"#8FBCBB"}},{name:"[Markdown] Markup Heading",scope:"markup.heading",settings:{foreground:"#88C0D0"}},{name:"[Markdown] Markup Inline",scope:["text.html.markdown markup.inline.raw","text.html.markdown markup.inline.raw punctuation.definition.raw"],settings:{foreground:"#8FBCBB"}},{name:"[Markdown] Markup Italic",scope:"text.html.markdown markup.italic",settings:{fontStyle:"italic"}},{name:"[Markdown] Markup Link",scope:"text.html.markdown markup.underline.link",settings:{fontStyle:"underline"}},{name:"[Markdown] Markup List Numbered/Unnumbered",scope:"text.html.markdown beginning.punctuation.definition.list",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Markup Quote Punctuation Definition",scope:"text.html.markdown beginning.punctuation.definition.quote",settings:{foreground:"#8FBCBB"}},{name:"[Markdown] Markup Quote Punctuation Definition",scope:"text.html.markdown markup.quote",settings:{foreground:"#616E88"}},{name:"[Markdown] Markup Math Constant",scope:"text.html.markdown constant.character.math.tex",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Markup Math Definition Marker",scope:["text.html.markdown punctuation.definition.math.begin","text.html.markdown punctuation.definition.math.end"],settings:{foreground:"#5E81AC"}},{name:"[Markdown] Markup Math Function Definition Marker",scope:"text.html.markdown punctuation.definition.function.math.tex",settings:{foreground:"#88C0D0"}},{name:"[Markdown] Markup Math Operator",scope:"text.html.markdown punctuation.math.operator.latex",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Punctuation Definition Heading",scope:"text.html.markdown punctuation.definition.heading",settings:{foreground:"#81A1C1"}},{name:"[Markdown] Punctuation Definition Constant/String",scope:["text.html.markdown punctuation.definition.constant","text.html.markdown punctuation.definition.string"],settings:{foreground:"#81A1C1"}},{name:"[Markdown] String Other Link Description/Title",scope:["text.html.markdown constant.other.reference.link","text.html.markdown string.other.link.description","text.html.markdown string.other.link.title"],settings:{foreground:"#88C0D0"}},{name:"[Perl] Perl Sigils",scope:"source.perl punctuation.definition.variable",settings:{foreground:"#D8DEE9"}},{name:"[PHP] Meta Function-Call Object",scope:["source.php meta.function-call","source.php meta.function-call.object"],settings:{foreground:"#88C0D0"}},{name:"[Python] Decorator",scope:["source.python entity.name.function.decorator","source.python meta.function.decorator support.type"],settings:{foreground:"#D08770"}},{name:"[Python] Function Call",scope:"source.python meta.function-call.generic",settings:{foreground:"#88C0D0"}},{name:"[Python] Support Type",scope:"source.python support.type",settings:{foreground:"#88C0D0"}},{name:"[Python] Function Parameter",scope:["source.python variable.parameter.function.language"],settings:{foreground:"#D8DEE9"}},{name:"[Python] Function Parameter Special",scope:["source.python meta.function.parameters variable.parameter.function.language.special.self"],settings:{foreground:"#81A1C1"}},{name:"[Rust] Entity types",scope:"source.rust entity.name.type",settings:{foreground:"#8FBCBB"}},{name:"[Rust] Macro",scope:"source.rust meta.macro entity.name.function",settings:{fontStyle:"bold",foreground:"#88C0D0"}},{name:"[Rust] Attributes",scope:["source.rust meta.attribute","source.rust meta.attribute punctuation","source.rust meta.attribute keyword.operator"],settings:{foreground:"#5E81AC"}},{name:"[Rust] Traits",scope:"source.rust entity.name.type.trait",settings:{fontStyle:"bold"}},{name:"[Rust] Interpolation Bracket Curly",scope:"source.rust punctuation.definition.interpolation",settings:{foreground:"#EBCB8B"}},{name:"[SCSS] Punctuation Definition Interpolation Bracket Curly",scope:["source.css.scss punctuation.definition.interpolation.begin.bracket.curly","source.css.scss punctuation.definition.interpolation.end.bracket.curly"],settings:{foreground:"#81A1C1"}},{name:"[SCSS] Variable Interpolation",scope:"source.css.scss variable.interpolation",settings:{foreground:"#D8DEE9",fontStyle:"italic"}},{name:"[TypeScript] Decorators",scope:["source.ts punctuation.decorator","source.ts meta.decorator variable.other.readwrite","source.ts meta.decorator entity.name.function","source.tsx punctuation.decorator","source.tsx meta.decorator variable.other.readwrite","source.tsx meta.decorator entity.name.function"],settings:{foreground:"#D08770"}},{name:"[TypeScript] Object-literal keys",scope:["source.ts meta.object-literal.key","source.tsx meta.object-literal.key"],settings:{foreground:"#D8DEE9"}},{name:"[TypeScript] Object-literal functions",scope:["source.ts meta.object-literal.key entity.name.function","source.tsx meta.object-literal.key entity.name.function"],settings:{foreground:"#88C0D0"}},{name:"[TypeScript] Type/Class",scope:["source.ts support.class","source.ts support.type","source.ts entity.name.type","source.ts entity.name.class","source.tsx support.class","source.tsx support.type","source.tsx entity.name.type","source.tsx entity.name.class"],settings:{foreground:"#8FBCBB"}},{name:"[TypeScript] Static Class Support",scope:["source.ts support.constant.math","source.ts support.constant.dom","source.ts support.constant.json","source.tsx support.constant.math","source.tsx support.constant.dom","source.tsx support.constant.json"],settings:{foreground:"#8FBCBB"}},{name:"[TypeScript] Variables",scope:["source.ts support.variable","source.tsx support.variable"],settings:{foreground:"#D8DEE9"}},{name:"[TypeScript] Parentheses in Template Strings",scope:["source.ts meta.embedded.line meta.brace.square","source.ts meta.embedded.line meta.brace.round","source.tsx meta.embedded.line meta.brace.square","source.tsx meta.embedded.line meta.brace.round"],settings:{foreground:"#ECEFF4"}},{name:"[XML] Entity Name Tag Namespace",scope:"text.xml entity.name.tag.namespace",settings:{foreground:"#8FBCBB"}},{name:"[XML] Keyword Other Doctype",scope:"text.xml keyword.other.doctype",settings:{foreground:"#5E81AC"}},{name:"[XML] Meta Tag Preprocessor",scope:"text.xml meta.tag.preprocessor entity.name.tag",settings:{foreground:"#5E81AC"}},{name:"[XML] Entity Name Tag Namespace",scope:["text.xml string.unquoted.cdata","text.xml string.unquoted.cdata punctuation.definition.string"],settings:{foreground:"#D08770",fontStyle:"italic"}},{name:"[YAML] Entity Name Tag",scope:"source.yaml entity.name.tag",settings:{foreground:"#8FBCBB"}}]},lineNumbers:!0,showCopyButton:!0,autoImport:!0,skipLanguages:[],filepath:"/home/runner/work/docs/docs/docs/cadence/core-contracts/nft-storefront.md"};function g(e){const t=Object.assign({h2:"h2",p:"p",code:"code",em:"em",img:"img",a:"a",h3:"h3",strong:"strong",ul:"ul",li:"li",ol:"ol",hr:"hr"},(0,r.ah)(),e.components);return d||f("CH",!1),d.Code||f("CH.Code",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"primer",children:"Primer"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," contract lets you create a ",(0,n.jsx)(t.em,{children:"non-custodial Resource (NFT) marketplace"})," on the FLOW blockchain."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," makes it simple for Sellers to list NFTs in dApp specific marketplaces. DApp developers leverage the APIs provided by the contract to manage listings being offered for sale and to transact NFT trades."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/191749748-714f9d8f-cb41-4be4-a3d2-ec84cb8b5ffb.png",alt:"dapps_1"})}),"\n",(0,n.jsxs)(t.p,{children:["Developers should use the ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," to create their marketplace and to enable p2p purchases. The diagram below shows how dApps can facilitate the creation of NFT listings for different marketplaces and how marketplaces can filter their listings."]}),"\n",(0,n.jsx)(t.p,{children:"Listings made through a specific dApp storefront can be simultaneously listed on 3rd party marketplaces beyond that dApp. Well known 3rd party marketplaces listen for compatible NFT listing events enabling the automation of listings into their marketplace dashboards."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/191753605-e1c48a57-0c3c-4509-808b-8fee4e7d32e8.png",alt:"dapps_2"})}),"\n",(0,n.jsxs)(t.p,{children:["Using the ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"}),", marketplaces can instantly and easily tap into the vibrant FLOW NFT ecosystem and allow NFT holders to list their NFTs and enables creator royalties."]}),"\n",(0,n.jsx)(t.p,{children:"Marketplaces then process an NFT trade by interacting directly with seller storefronts. Flow's account based model ensures that NFTs listed for sale always reside in the Seller account until traded, regardless of how many listings are posted across any number of marketplaces, for the same NFT."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/191755699-fe0570cb-80a3-408c-8eef-4051e3209481.png",alt:"marketplace_1"})}),"\n",(0,n.jsx)(t.h2,{id:"functional-overview",children:"Functional Overview"}),"\n",(0,n.jsxs)(t.p,{children:["A general purpose sale support contract for NFTs implementing the Flow ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flow-nft/blob/master/contracts/NonFungibleToken.cdc",children:(0,n.jsx)(t.code,{children:"NonFungibleToken"})})," standard.\nEach account that wants to list NFTs for sale creates a ",(0,n.jsx)(t.code,{children:"Storefront"})," resource to store in their account and lists individual sales within that Storefront as Listings. There is usually one Storefront per account held at the ",(0,n.jsx)(t.code,{children:"/storage/NFTStorefrontV2"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Each listing can define one or more sale cuts taken out of the sale price to go to one or more addresses. Listing fees, royalties, or other considerations can be paid using sale cuts. Also, the listing can include a commission as one of these sale cuts is paid to whoever facilitates the purchase."}),"\n",(0,n.jsxs)(t.p,{children:["Listings can have an optional list of marketplace ",(0,n.jsx)(t.a,{href:"/docs/cadence/language/capability-based-access-control",children:"receiver capabilities"})," used to receive the commission for fulfilling the listing. An NFT may be listed in one or more Listings, and the validity of each listing can easily be checked."]}),"\n",(0,n.jsx)(t.p,{children:'Interested parties can globally track Listing events on-chain and filter by NFT types, IDs and other characteristics to determine which to make available for purchase within their own marketplace UIs."'}),"\n",(0,n.jsx)(t.h2,{id:"selling-nfts",children:"Selling NFTs"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," offers a generic process for creating the listing for an NFT. It provides all the essential APIs to manage those listings independently."]}),"\n",(0,n.jsxs)(t.p,{children:["Many marketplaces create a single storefront resource to manage different individual listings. We recommend creating the listing under the user-owned storefront resource to make it trustless and platform-independent. Users should possess the ",(0,n.jsx)(t.code,{children:"Storefront"})," resource under their account to create the listing using the storefront contract."]}),"\n",(0,n.jsx)(t.h2,{id:"creating-a-successful-listing-using-the-nftstorefrontv2-contract",children:"Creating a successful listing using the NFTStorefrontV2 contract."}),"\n",(0,n.jsxs)(t.p,{children:["As recommended above, the first step is to create and store the ",(0,n.jsx)(t.a,{href:"#resource-storefront",children:"Storefront resource"})," in the user account using the ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/main/transactions/setup_account.cdc",children:"setup_account"})," transaction."]}),"\n",(0,n.jsx)(t.p,{children:"The next step is to create a listing under the newly created storefront resource. If the user (repetitive) already holds the storefront resource, then use the existing resource. The seller can come with multiple requirements for listing their NFTs, and We try our best to cover most of them below."}),"\n",(0,n.jsxs)(t.h3,{id:"scenario-1-selling-nfts-corresponds-to-more-than-one-cryptocurrency-ie-flow-fusd-etc",children:[(0,n.jsx)(t.strong,{children:"Scenario 1:"})," Selling NFTs corresponds to more than one cryptocurrency, i.e. FLOW, FUSD etc."]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," contract doesn\u2019t support selling an NFT for multiple different currencies with a single listing. However, this can be achieved by creating multiple listings for the same NFT for each different currency."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Example -"})," Alice wants to sell a kitty and is open to receiving FLOW and FUSD"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/190966672-e1793fa3-112c-4273-b2a3-e81b8c94fd70.png",alt:"scenario_1"})}),"\n",(0,n.jsxs)(t.p,{children:["Putting an NFT on sell called listing, seller can create a listing using ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/main/transactions/sell_item.cdc",children:"sell_item"})," transaction by providing some required details to list an NFT, i.e. Receiving currency type, ",(0,n.jsx)(t.a,{href:"/docs/cadence/language/capability-based-access-control",children:"Capability"})," from where NFT will be deducted etc. If interested look ",(0,n.jsx)(t.a,{href:"#fun-createListing()",children:"here"})," for more details."]}),"\n",(0,n.jsxs)(t.p,{children:["To receive a different currency seller has to provide a different ",(0,n.jsx)(t.strong,{children:"Receiver currency type"})," , i.e. ",(0,n.jsx)(t.code,{children:"salePaymentVaultType"})," As depicted in the above diagram, There are two listing formations with almost the same inputs. The only differentiator is the ",(0,n.jsx)(t.code,{children:"salePaymentVaultType"})," parameter that needs to be different when creating duplicate NFT listings with different sale currency types."]}),"\n",(0,n.jsxs)(t.h3,{id:"scenario-2--peer-to-peer-p2p-listing-of-nft-a-listing-anyone-can-fulfil",children:[(0,n.jsx)(t.strong,{children:"Scenario 2:"}),"  Peer-to-Peer (p2p) listing of NFT: A listing anyone can fulfil."]}),"\n",(0,n.jsxs)(t.p,{children:["Dapps can leverage the ",(0,n.jsx)(t.strong,{children:"NFTStorefrontV2"})," to facilitate the creation of a listing for the seller independent of any marketplace. Dapps or marketplaces can list those listings on their platforms, or seller can settle it p2p."]}),"\n",(0,n.jsxs)(t.p,{children:["The seller can use ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/main/transactions/sell_item.cdc",children:"sell_item"})," transaction to create a p2p listing, providing the ",(0,n.jsx)(t.code,{children:"marketplacesAddress"})," with an empty array. The seller has a choice of providing ",(0,n.jsx)(t.a,{href:"#commission",children:"commission"})," to the facilitator of sale, which can also act as a discount if the facilitator and the purchaser are the same."]}),"\n",(0,n.jsxs)(t.h3,{id:"scenario-3-the-seller-wants-to-list-its-nft-in-different-marketplaces",children:[(0,n.jsx)(t.strong,{children:"Scenario 3:"})," The seller wants to list its NFT in different marketplaces."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," offers two different ways of doing it."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["The seller can create a listing and provide the ",(0,n.jsx)(t.code,{children:"marketplacesAddress"})," that it wants to have a listing on using ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/main/transactions/sell_item.cdc",children:"sell_item"})," transaction."]}),"\n",(0,n.jsxs)(t.p,{children:["Marketplaces can listen to ",(0,n.jsx)(t.code,{children:"ListingAvailable"})," events and check whether their address is included in the ",(0,n.jsx)(t.code,{children:"commissionReceivers"})," list; If yes, the marketplace would be rewarded during the successful fulfilment of the listing."]}),"\n",(0,n.jsx)(t.p,{children:"Example - Bob wants to list on marketplace 0xA, 0xB & 0xC and is willing to offer 10% commission on the sale price of the listing to the marketplaces."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/190966834-8eda4ec4-e9bf-49ef-9dec-3c47a236d281.png",alt:"scenario_3"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Another way to accomplish this is to create separate listings for each marketplace on which a user wants their listing using ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/main/transactions/sell_item_with_marketplace_cut.cdc",children:"sell_item_with_marketplace_cut"})," transaction. In this case, the marketplace would be incentivized by earning one of the parts of the ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/160e97aa802405ad26a3164bcaff0fde7ee52ad2/contracts/NFTStorefrontV2.cdc#L104",children:(0,n.jsx)(t.code,{children:"saleCut"})})," by appending marketplace saleCut in ",(0,n.jsx)(t.code,{children:"saleCuts"})," array during the creation of the listing."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"considerations",children:"Considerations"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Ghost listings -"})," ",(0,n.jsx)(t.em,{children:"Ghost listings are listings which don\u2019t have an underlying NFT in the seller\u2019s account. However, the listing is still available for buyers to attempt to purchase"}),". StorefrontV2 is not immune to ghost listings. Usually, ghost listings will cause a purchaser\u2019s transaction to fail, which is annoying but isn\u2019t a significant problem. Ghost listings become a problem for the seller when the listed NFT comes back to the seller\u2019s account after its original sale. The ghost listing will no longer be invalid when it comes back, and anyone can purchase it even if the seller doesn\u2019t want to sell it at that price anymore."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note -"})," ",(0,n.jsx)(t.em,{children:"We recommend that marketplaces and p2p dApps create an off-chain notification service that tells their users (i.e., sellers) to remove the listings if they don\u2019t hold the NFT anymore in the same account."})]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Expired listings -"})," ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," introduces a safety measure to specify that a listing will expire after a certain period that can be set during the creation so no one can purchase the listing anymore. It is not a fool-proof safety measure, but it does give some safe ground to the sellers for the ghost listings & stale listings."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note -"})," ",(0,n.jsx)(t.em,{children:"We recommended for marketplaces and p2p dApps not to show the expired listings on their dashboards."})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"purchasing-nfts",children:"Purchasing NFTs"}),"\n",(0,n.jsxs)(t.p,{children:["Purchasing NFTs through the ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," is simple. The buyer has to provide the payment vault and the ",(0,n.jsx)(t.code,{children:"commissionRecipient"})," , if applicable, during the purchase. p2p dApps don\u2019t need any intermediaries to facilitate the purchase of listings. ",(0,n.jsx)(t.a,{href:"#fun-purchase",children:(0,n.jsx)(t.code,{children:"purchase"})})," API offered by the ",(0,n.jsx)(t.code,{children:"Listing"})," resource gets used to facilitate the purchase of NFT."]}),"\n",(0,n.jsx)(t.p,{children:"During the listing purchase all saleCuts are paid automatically. This also includes distributing royalties for that NFT, if applicable. If the vault provided by the buyer lacks sufficient funds then the transaction will fail."}),"\n",(0,n.jsx)(t.h3,{id:"considerations-1",children:"Considerations"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Auto cleanup -"})," ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," offers a unique ability to do auto cleanup of duplicate listings during a purchase. It comes with a drawback if one NFT has thousands of duplicate listings. It will become the bottleneck during purchasing one of the listings as it will likely trigger an out-of-gas error."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note -"})," ",(0,n.jsx)(t.em,{children:"We recommended NOT to have more than 50 (TBD) duplicate listings of any given NFT."})]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Unsupported receiver capability"})," - A common pitfall during the purchase of an NFT that some saleCut receivers don\u2019t have a supported receiver capability because that entitled sale cut would transfer to first valid sale cut receiver. However, it can be partially solved by providing the generic receiver using the ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flow-ft/blob/master/contracts/FungibleTokenSwitchboard.cdc",children:(0,n.jsx)(t.code,{children:"FungibleTokenSwitchboard"})})," contract and adding all the currency capabilities the beneficiary wants to receive. More on the ",(0,n.jsx)(t.code,{children:"FungibleTokenSwitchboard"})," can be read ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flow-ft#fungible-token-switchboard",children:"here"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"enabling-creator-royalties-for-nfts",children:"Enabling creator royalties for NFTs"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," contract optionally supports paying royalties to the minter account for secondary resales of that NFT after the original sale. Marketplaces decide for themselves whether to support creator royalties when validating listings for sale eligibility. We encourage all marketplaces to support creator royalties and support community creators in the ",(0,n.jsx)(t.strong,{children:"FLOW"})," ecosystem."]}),"\n",(0,n.jsxs)(t.p,{children:["Providing that a seller's NFT supports the ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flow-nft/blob/21c254438910c8a4b5843beda3df20e4e2559625/contracts/MetadataViews.cdc#L335",children:"Royalty Metadata View"})," standard, then marketplaces can honor royalties payments at time of purchase. ",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," dynamically calculates the royalties owed at the time of listing creation and applies it as a saleCut of the listing at the time of purchase."]}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"// Check whether the NFT implements the MetadataResolver or not.",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"if",props:{style:{color:"#81A1C1"}}},{content:" nft.",props:{style:{color:"#D8DEE9FF"}}},{content:"getViews",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"contains",props:{style:{color:"#88C0D0"}}},{content:"(Type",props:{style:{color:"#D8DEE9FF"}}},{content:"<",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews.Royalties",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:") ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"\t\t// Resolve the royalty view",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    let",props:{style:{color:"#81A1C1"}}},{content:" royaltiesRef = nft.",props:{style:{color:"#D8DEE9FF"}}},{content:"resolveView",props:{style:{color:"#88C0D0"}}},{content:"(Type",props:{style:{color:"#D8DEE9FF"}}},{content:"<",props:{style:{color:"#81A1C1"}}},{content:"MetadataViews.Royalties",props:{style:{color:"#D8DEE9FF"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:")",props:{style:{color:"#D8DEE9FF"}}},{content:"?? ",props:{style:{color:"#81A1C1"}}},{content:"panic",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:'"',props:{style:{color:"#ECEFF4"}}},{content:"Unable to retrieve the royalties",props:{style:{color:"#A3BE8C"}}},{content:'")',props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"\t  // Fetch the royalties.",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"\t\tlet",props:{style:{color:"#81A1C1"}}},{content:" royalties = (royaltiesRef as",props:{style:{color:"#D8DEE9FF"}}},{content:"!",props:{style:{color:"#81A1C1"}}},{content:" MetadataViews.Royalties).",props:{style:{color:"#D8DEE9FF"}}},{content:"getRoyalties",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"\t\t// Append the royalties as the salecut",props:{style:{color:"#616E88"}}}]},{tokens:[{content:"    for",props:{style:{color:"#81A1C1"}}},{content:" royalty ",props:{style:{color:"#D8DEE9FF"}}},{content:"in",props:{style:{color:"#81A1C1"}}},{content:" royalties ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        self",props:{style:{color:"#81A1C1"}}},{content:".saleCuts.",props:{style:{color:"#D8DEE9FF"}}},{content:"append",props:{style:{color:"#88C0D0"}}},{content:"(NFTStorefrontV2.",props:{style:{color:"#D8DEE9FF"}}},{content:"SaleCut",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#D8DEE9FF"}}},{content:"receiver",props:{style:{color:"#88C0D0"}}},{content:":",props:{style:{color:"#ECEFF4"}}},{content:" royalty.receiver, ",props:{style:{color:"#D8DEE9FF"}}},{content:"amount",props:{style:{color:"#88C0D0"}}},{content:":",props:{style:{color:"#ECEFF4"}}},{content:" royalty.cut ",props:{style:{color:"#D8DEE9FF"}}},{content:"*",props:{style:{color:"#81A1C1"}}},{content:" effectiveSaleItemPrice",props:{style:{color:"#D8DEE9FF"}}},{content:"))",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"        totalRoyaltyCut ",props:{style:{color:"#D8DEE9FF"}}},{content:"=",props:{style:{color:"#81A1C1"}}},{content:" totalRoyaltyCut ",props:{style:{color:"#D8DEE9FF"}}},{content:"+",props:{style:{color:"#81A1C1"}}},{content:" royalty.cut ",props:{style:{color:"#D8DEE9FF"}}},{content:"*",props:{style:{color:"#81A1C1"}}},{content:" effectiveSaleItemPrice",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    }",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["Complete transaction can be viewed ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/nft-storefront/blob/main/transactions/sell_item.cdc",children:"here"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["saleCut only supports a single token receiver type and therefore beneficiaries of a ",(0,n.jsx)(t.code,{children:"saleCut"})," can also only receive the token type used for the purchase. To support different token types for saleCuts we recommend using the ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flow-ft/blob/master/contracts/FungibleTokenSwitchboard.cdc",children:"FungibleTokenSwitchboard"})," contract. The contract defines a generic receiver for fungible tokens which itself handles routing of tokens to the respective vault for that token type. Learn more about this ",(0,n.jsx)(t.a,{href:"https://github.com/onflow/flow-ft#fungible-token-switchboard",children:"here"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"enabling-marketplace-commissions-for-nft-sales",children:"Enabling marketplace commissions for NFT sales"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," enables optional commissions on trades for marketplaces which require it as a condition to list a NFT for sale. Commission & commission receivers are set by the seller during initial listing creation. At time of purchase the commission amount is paid once only to the commission receiver matching the marketplace receiver address which facilitated the sale."]}),"\n",(0,n.jsxs)(t.p,{children:["For NFT listings in marketplaces which don't require commission, commission receivers can be set as nil. Setting the buyer of the NFT and ",(0,n.jsx)(t.code,{children:"commissionRecipient"})," to the same has the effect of applying a discount for the buyer."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/190966499-c176203f-b6a6-4422-860f-1bf6f2bcdbb6.png",alt:"scenario_2"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"apis--events-offered-by-nftstorefrontv2",children:"APIs & Events offered by NFTStorefrontV2"}),"\n",(0,n.jsxs)(t.h2,{id:"resource-interface-listingpublic",children:["Resource Interface ",(0,n.jsx)(t.code,{children:"ListingPublic"})]}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"resource interface",props:{style:{color:"#81A1C1"}}},{content:" ListingPublic ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"borrowNFT",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" &",props:{style:{color:"#D8DEE9FF"}}},{content:"NonFungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"NFT",props:{style:{color:"#81A1C1"}}},{content:"?",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"purchase",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"          payment",props:{style:{color:"#88C0D0"}}},{content:": @",props:{style:{color:"#D8DEE9FF"}}},{content:"FungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"Vault",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"          commissionRecipient",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Capability",props:{style:{color:"#81A1C1"}}},{content:"<&{",props:{style:{color:"#D8DEE9FF"}}},{content:"FungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"Receiver",props:{style:{color:"#81A1C1"}}},{content:"}>?,",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"      )",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" @",props:{style:{color:"#D8DEE9FF"}}},{content:"NonFungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"NFT",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getDetails",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:": ListingDetail",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getAllowedCommissionReceivers",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"Capability",props:{style:{color:"#81A1C1"}}},{content:"<&",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"FungibleToken.Receiver",props:{style:{color:"#D8DEE9FF"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"An interface providing a useful public interface to a Listing."}),"\n",(0,n.jsx)(t.h3,{id:"functions",children:"Functions"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"borrowNFT()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"borrowNFT",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" &",props:{style:{color:"#D8DEE9FF"}}},{content:"NonFungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"NFT",props:{style:{color:"#81A1C1"}}},{content:"?",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"This will assert in the same way as the NFT standard borrowNFT()\nif the NFT is absent, for example if it has been sold via another listing."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"purchase()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"purchase",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"payment FungibleToken.Vault, commissionRecipient Capability<&{FungibleToken.Receiver}>?",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:": NonFungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"NFT",props:{style:{color:"#81A1C1"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"Facilitates the purchase of the listing by providing the payment vault\nand the commission recipient capability if there is a non-zero commission for the given listing.\nRespective saleCuts are transferred to beneficiaries and funtion return underlying or listed NFT."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getDetails()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getDetails",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:": ListingDetails",props:{style:{color:"#81A1C1"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"Fetches the details of the listings"}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getAllowedCommissionReceivers()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getAllowedCommissionReceivers",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"Capability",props:{style:{color:"#81A1C1"}}},{content:"<&",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"FungibleToken.Receiver",props:{style:{color:"#D8DEE9FF"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:">",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["Fetches the allowed marketplaces capabilities or commission receivers for the underlying listing.\nIf it returns ",(0,n.jsx)(t.code,{children:"nil"})," then commission is up to grab by anyone."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsxs)(t.h2,{id:"resource-storefront",children:["Resource ",(0,n.jsx)(t.code,{children:"Storefront"})]}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"resource",props:{style:{color:"#81A1C1"}}},{content:" Storefront ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"createListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"            nftProviderCapability",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Capability",props:{style:{color:"#81A1C1"}}},{content:"<&{",props:{style:{color:"#D8DEE9FF"}}},{content:"NonFungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"Provider",props:{style:{color:"#81A1C1"}}},{content:", NonFungibleToken.CollectionPublic}>,",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            nftType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            nftID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            salePaymentVaultType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            saleCuts",props:{style:{color:"#88C0D0"}}},{content:": [",props:{style:{color:"#D8DEE9FF"}}},{content:"SaleCut",props:{style:{color:"#81A1C1"}}},{content:"],",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            marketplacesCapability",props:{style:{color:"#88C0D0"}}},{content:": [",props:{style:{color:"#D8DEE9FF"}}},{content:"Capability",props:{style:{color:"#81A1C1"}}},{content:"<&{",props:{style:{color:"#D8DEE9FF"}}},{content:"FungibleToken",props:{style:{color:"#81A1C1"}}},{content:".",props:{style:{color:"#D8DEE9FF"}}},{content:"Receiver",props:{style:{color:"#81A1C1"}}},{content:"}>]?,",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            customID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#81A1C1"}}},{content:"?,",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            commissionAmount",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#81A1C1"}}},{content:",",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"            expiry",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"         )",props:{style:{color:"#ECEFF4"}}},{content:": UInt64",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"removeListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getListingIDs",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getDuplicateListingIDs",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"listingID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"cleanupExpiredListings",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"fromIndex",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"toIndex",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"borrowListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" &",props:{style:{color:"#D8DEE9FF"}}},{content:"Listing",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"ListingPublic",props:{style:{color:"#D8DEE9FF"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"A resource that allows its owner to manage a list of Listings, and anyone to interact with them\nin order to query their details and purchase the NFTs that they represent."}),"\n",(0,n.jsx)(t.p,{children:"Implemented Interfaces:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.code,{children:"StorefrontManager"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.code,{children:"StorefrontPublic"})}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"initializer",children:"Initializer"}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"init",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.h3,{id:"functions-1",children:"Functions"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"createListing()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"createListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftProviderCapability Capability<&{NonFungibleToken.Provider, NonFungibleToken.CollectionPublic}>, nftType Type, nftID UInt64, salePaymentVaultType Type, saleCuts [SaleCut], marketplacesCapability [Capability<&{FungibleToken.Receiver}>]?, customID String?, commissionAmount UFix64, expiry UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:": UInt64",props:{style:{color:"#81A1C1"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"insert\nCreate and publish a Listing for an NFT."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"removeListing()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"removeListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"removeListing\nRemove a Listing that has not yet been purchased from the collection and destroy it."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getListingIDs()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getListingIDs",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"getListingIDs\nReturns an array of the Listing resource IDs that are in the collection"}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getDuplicateListingIDs()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getDuplicateListingIDs",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftType Type, nftID UInt64, listingID UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["getDuplicateListingIDs\nReturns an array of listing IDs that are duplicates of the given ",(0,n.jsx)(t.code,{children:"nftType"})," and ",(0,n.jsx)(t.code,{children:"nftID"}),"."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"cleanupExpiredListings()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"cleanupExpiredListings",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"fromIndex UInt64, toIndex UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"cleanupExpiredListings\nCleanup the expired listing by iterating over the provided range of indexes."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"borrowListing()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"borrowListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" &",props:{style:{color:"#D8DEE9FF"}}},{content:"Listing",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"ListingPublic",props:{style:{color:"#D8DEE9FF"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"borrowListing\nReturns a read-only view of the listing for the given listingID if it is contained by this collection."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsxs)(t.h2,{id:"resource-interface-storefrontpublic",children:["Resource Interface ",(0,n.jsx)(t.code,{children:"StorefrontPublic"})]}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"resource interface",props:{style:{color:"#81A1C1"}}},{content:" StorefrontPublic ",props:{style:{color:"#D8DEE9FF"}}},{content:"{",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getListingIDs",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getDuplicateListingIDs",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"listingID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"cleanupExpiredListings",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"fromIndex",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"toIndex",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"borrowListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" &",props:{style:{color:"#D8DEE9FF"}}},{content:"Listing",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"ListingPublic",props:{style:{color:"#D8DEE9FF"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"cleanupPurchasedListings",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]},{tokens:[{content:"    pub fun ",props:{style:{color:"#81A1C1"}}},{content:"getExistingListingIDs",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]},{tokens:[{content:"}",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"StorefrontPublic\nAn interface to allow listing and borrowing Listings, and purchasing items via Listings\nin a Storefront."}),"\n",(0,n.jsx)(t.h3,{id:"functions-2",children:"Functions"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getListingIDs()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getListingIDs",props:{style:{color:"#88C0D0"}}},{content:"()",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"getListingIDs Returns an array of the Listing resource IDs that are in the collection"}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getDuplicateListingIDs()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getDuplicateListingIDs",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftType Type, nftID UInt64, listingID UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"getDuplicateListingIDs Returns an array of listing IDs that are duplicates of the given nftType and nftID."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"borrowListing()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"borrowListing",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" &",props:{style:{color:"#D8DEE9FF"}}},{content:"Listing",props:{style:{color:"#81A1C1"}}},{content:"{",props:{style:{color:"#ECEFF4"}}},{content:"ListingPublic",props:{style:{color:"#D8DEE9FF"}}},{content:"}",props:{style:{color:"#ECEFF4"}}},{content:"?",props:{style:{color:"#81A1C1"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"borrowListing Returns a read-only view of the listing for the given listingID if it is contained by this collection."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"cleanupExpiredListings()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"cleanupExpiredListings",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"fromIndex UInt64, toIndex UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"cleanupExpiredListings Cleanup the expired listing by iterating over the provided range of indexes."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"cleanupPurchasedListings()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"cleanupPurchasedListings",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"cleanupPurchasedListings\nAllows anyone to remove already purchased listings."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["fun ",(0,n.jsx)(t.code,{children:"getExistingListingIDs()"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"fun ",props:{style:{color:"#81A1C1"}}},{content:"getExistingListingIDs",props:{style:{color:"#88C0D0"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"nftType Type, nftID UInt64",props:{style:{color:"#D8DEE9FF"}}},{content:")",props:{style:{color:"#ECEFF4"}}},{content:":",props:{style:{color:"#81A1C1"}}},{content:" [",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:"]",props:{style:{color:"#D8DEE9FF"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["getExistingListingIDs\nReturns an array of listing IDs of the given ",(0,n.jsx)(t.code,{children:"nftType"})," and ",(0,n.jsx)(t.code,{children:"nftID"}),"."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"events",children:"Events"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["event ",(0,n.jsx)(t.code,{children:"StorefrontInitialized"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"event",props:{style:{color:"#81A1C1"}}},{content:" StorefrontInitialized",props:{style:{color:"#D8DEE9FF"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"storefrontResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["A Storefront resource has been created. Consumers can now expect events from this Storefront. Note that we do not specify an address: we cannot and should not. Created resources do not have an owner address, and may be moved\nafter creation in ways we cannot check. ",(0,n.jsx)(t.code,{children:"ListingAvailable"})," events can be used to determine the address\nof the owner of the Storefront at the time of the listing but only at that precise moment in that precise transaction. If the seller moves the Storefront while the listing is valid, that is on them."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["event ",(0,n.jsx)(t.code,{children:"StorefrontDestroyed"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"event",props:{style:{color:"#81A1C1"}}},{content:" StorefrontDestroyed",props:{style:{color:"#D8DEE9FF"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"storefrontResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"A Storefront has been destroyed. Event consumers can now stop processing events from this Storefront.\nNote - we do not specify an address."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["event ",(0,n.jsx)(t.code,{children:"ListingAvailable"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"event",props:{style:{color:"#81A1C1"}}},{content:" ListingAvailable",props:{style:{color:"#D8DEE9FF"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"storefrontAddress",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftUUID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"salePaymentVaultType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"salePrice",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"customID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#81A1C1"}}},{content:"?, ",props:{style:{color:"#D8DEE9FF"}}},{content:"commissionAmount",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"commissionReceivers",props:{style:{color:"#88C0D0"}}},{content:": [",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#81A1C1"}}},{content:"]?, ",props:{style:{color:"#D8DEE9FF"}}},{content:"expiry",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["Above event gets emitted when a listing has been created and added to a Storefront resource. The Address values here are valid when the event is emitted, but the state of the accounts they refer to may change outside of the\n",(0,n.jsx)(t.code,{children:"NFTStorefrontV2"})," workflow, so be careful to check when using them."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["event ",(0,n.jsx)(t.code,{children:"ListingCompleted"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"event",props:{style:{color:"#81A1C1"}}},{content:" ListingCompleted",props:{style:{color:"#D8DEE9FF"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"listingResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"storefrontResourceID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"purchased",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Bool",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftUUID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"nftID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"salePaymentVaultType",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Type",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"salePrice",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"customID",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"String",props:{style:{color:"#81A1C1"}}},{content:"?, ",props:{style:{color:"#D8DEE9FF"}}},{content:"commissionAmount",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"commissionReceiver",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#81A1C1"}}},{content:"?, ",props:{style:{color:"#D8DEE9FF"}}},{content:"expiry",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UInt64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"The listing has been resolved. It has either been purchased, removed or destroyed."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsxs)(t.strong,{children:["event ",(0,n.jsx)(t.code,{children:"UnpaidReceiver"})]})}),"\n",(0,n.jsx)(d.Code,{codeConfig:u,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"event",props:{style:{color:"#81A1C1"}}},{content:" UnpaidReceiver",props:{style:{color:"#D8DEE9FF"}}},{content:"(",props:{style:{color:"#ECEFF4"}}},{content:"receiver",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"Address",props:{style:{color:"#81A1C1"}}},{content:", ",props:{style:{color:"#D8DEE9FF"}}},{content:"entitledSaleCut",props:{style:{color:"#88C0D0"}}},{content:": ",props:{style:{color:"#D8DEE9FF"}}},{content:"UFix64",props:{style:{color:"#81A1C1"}}},{content:")",props:{style:{color:"#ECEFF4"}}}]}],lang:"cadence"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"A entitled receiver has not been paid during the sale of the NFT."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Holistic process flow diagram of NFTStorefrontV2 -"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/14581509/191960793-ff153e5d-2934-410c-b724-5c5dffd2c20f.png",alt:"NFT Storefront Process flow"})}),"\n",(0,n.jsx)(t.h2,{id:"glossary",children:"Glossary"}),"\n",(0,n.jsx)(t.p,{children:"SaleCut - A struct consists a recipient and amount of token ,i.e. cut that must be sent to recipient when a NFT get sold."})]})}const h=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,n.jsx)(t,Object.assign({},e,{children:(0,n.jsx)(g,e)})):g(e)};function f(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);