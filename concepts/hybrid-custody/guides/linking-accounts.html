<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-concepts/hybrid-custody/guides/linking-accounts">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Linking Accounts | Flow docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/concepts/hybrid-custody/guides/linking-accounts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linking Accounts | Flow docs"><meta data-rh="true" name="description" content="If you’ve built dApps on Flow, or any blockchain for that matter, you’re painfully aware of the user onboarding process and successive pain of prompting user signatures for on-chain interactions. As a developer, this leaves you with two options - custody the user’s private key and act on their behalf or go with the Web3 status quo, hope your new users are native to Flow and authenticate them via their existing wallet. Either choice will force significant compromise, fragmenting user experience and leaving much to be desired compared to the broader status quo of Web2 identity authentication and single-click onboarding flow."><meta data-rh="true" property="og:description" content="If you’ve built dApps on Flow, or any blockchain for that matter, you’re painfully aware of the user onboarding process and successive pain of prompting user signatures for on-chain interactions. As a developer, this leaves you with two options - custody the user’s private key and act on their behalf or go with the Web3 status quo, hope your new users are native to Flow and authenticate them via their existing wallet. Either choice will force significant compromise, fragmenting user experience and leaving much to be desired compared to the broader status quo of Web2 identity authentication and single-click onboarding flow."><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/concepts/hybrid-custody/guides/linking-accounts"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/concepts/hybrid-custody/guides/linking-accounts" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/concepts/hybrid-custody/guides/linking-accounts" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DKF9ZIO5WM-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Flow docs" href="/docs/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script><link rel="stylesheet" href="/docs/assets/css/styles.be0abdec.css">
<link rel="preload" href="/docs/assets/js/runtime~main.0e607cc6.js" as="script">
<link rel="preload" href="/docs/assets/js/main.05ceea81.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/concepts/intro">Concepts</a><a class="navbar__item navbar__link" href="/docs/tutorials/intro">Tutorials</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/tooling/intro">Tooling</a><a class="navbar__item navbar__link" href="/docs/references/Introduction">References</a><a class="navbar__item navbar__link" href="/docs/community-resources/Introduction">Community Resources</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/concepts/intro">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/concepts/start-here">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/concepts/flow-networks">Flow Networks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Networks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/concepts/flow-token">FLOW Token</a><button aria-label="Toggle the collapsible sidebar category &#x27;FLOW Token&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/concepts/token-standards">Token Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Token Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/concepts/nodes">Flow Nodes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Nodes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/concepts/mobile">Flow Mobile</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Mobile&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/concepts/hybrid-custody">Hybrid Custody</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hybrid Custody&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/hybrid-custody/get-started">Get Started with Account Linking</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/concepts/hybrid-custody/guides/account-abstraction">guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/hybrid-custody/guides/account-abstraction">Account Abstraction on Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/hybrid-custody/guides/account-model">Account Model &amp; Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/concepts/hybrid-custody/guides/linking-accounts">Linking Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/hybrid-custody/guides/walletless-onboarding">Walletless Onboarding</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/intro">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cadence/intro">Cadence</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tooling/intro">Tooling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/references/Introduction">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/community-resources/Introduction">community-resources</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Flow Documentation</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/concepts/hybrid-custody"><span itemprop="name">Hybrid Custody</span></a><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">guides</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Linking Accounts</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Linking Accounts</h1></header><p>If you’ve built dApps on Flow, or any blockchain for that matter, you’re painfully aware of the user onboarding process and successive pain of prompting user signatures for on-chain interactions. As a developer, this leaves you with two options - custody the user’s private key and act on their behalf or go with the Web3 status quo, hope your new users are native to Flow and authenticate them via their existing wallet. Either choice will force significant compromise, fragmenting user experience and leaving much to be desired compared to the broader status quo of Web2 identity authentication and single-click onboarding flow.</p>
<p>In this doc, we’ll dive into a progressive onboarding flow, including the Cadence scripts &amp; transactions that go into its implementation in your dApp. These components will enable any implementing dApp to create a custodial account, intermediate the user’s on-chain actions on their behalf, and later delegate control of that dApp-created account to the user’s wallet-mediated account. We’ll refer to this custodial pattern as the Hybrid Account Model and the process of delegating control of the dApp account as Account Linking.</p>
<blockquote>
<p>⚠️ Note that the documentation on Hybrid Custody covers the current state and will likely differ from the final implementation. Builders should be aware that breaking changes will deploy between current state and the stable version. Interested in shaping the conversation? <a href="https://github.com/onflow/flips/pull/72" target="_blank" rel="noopener noreferrer">Join in!</a></p>
</blockquote>
<h1>Objectives</h1>
<ul>
<li>Establish a <a href="https://flow.com/post/flow-blockchain-mainstream-adoption-easy-onboarding-wallets" target="_blank" rel="noopener noreferrer">walletless onboarding flow</a></li>
<li>Create a blockchain-native onboarding flow</li>
<li>Link an existing app account as a child to a newly authenticated parent account</li>
<li>Get your dApp to recognize “parent” accounts along with any associated “child” accounts</li>
<li>View Fungible and NonFungible Token metadata relating to assets across all of a user’s associated accounts - their wallet-mediated “parent” account and any hybrid custody model “child” accounts</li>
<li>Facilitate transactions acting on assets in child accounts</li>
</ul>
<h1>Point of Clarity</h1>
<p>Before diving in, let&#x27;s make a distinction between <strong>&quot;account linking&quot;</strong> and <strong>&quot;linking accounts&quot;</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="account-linking">Account Linking<a href="#account-linking" class="hash-link" aria-label="Direct link to Account Linking" title="Direct link to Account Linking">​</a></h2>
<p>Very simply, account linking is a <a href="https://github.com/onflow/flips/pull/53" target="_blank" rel="noopener noreferrer">feature in Cadence</a> that let&#x27;s an <a href="/docs/cadence/language/accounts#authaccount">AuthAccount</a> create a <a href="/docs/cadence/language/capability-based-access-control">Capability</a> on itself. You can do so in the following transaction:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>#allowAccountLinking</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>transaction(linkPathSuffix: String) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        // Create the PrivatePath where we&#x27;ll create the link</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        let linkPath = PrivatePath(identifier: linkPathSuffix)</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>            ?? panic(&quot;Could not construct PrivatePath from given identifier: &quot;.concat(linkPathSuffix))</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        // Check if an AuthAccount Capability already exists at the specified path</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        if !signer.getCapability&lt;&amp;AuthAccount&gt;(linkPath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>            // If not, unlink anything that may be there and link the AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>            signer.unlink(linkpath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>            signer.linkAccount(linkPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->15</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>From there, the signing account can retrieve the privately linked AuthAccount Capability and delegate it to another account, unlinking the Capability if they wish to revoke delegated access.</p>
<p>Note that in order to link an account, a transaction must state the <code>#allowAccountLinking</code> as a pragme in the top line of the transaction. This is an interim safety measure so that wallet providers can notify users they&#x27;re about to sign a transaction that may create and use a Capability on their AuthAccount.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="linking-accounts">Linking Accounts<a href="#linking-accounts" class="hash-link" aria-label="Direct link to Linking Accounts" title="Direct link to Linking Accounts">​</a></h2>
<p>Linking accounts uses an account link, otherwise known as an <strong>AuthAccount Capability</strong>, and encapsulates it in an object that is then kept in the a collection of linked account. The <a href="https://github.com/onflow/flips/pull/72" target="_blank" rel="noopener noreferrer">components and actions</a> involved in this process - what the Capabity is encapsulated in, the collection that holds those encapsulations, etc. is what we&#x27;ll dive into in this doc.</p>
<h1>Terminology</h1>
<p><strong>Parent-Child accounts</strong> - For the moment, we’ll call the account created by the dApp the “child” account and the account receiving its AuthAccount Capability the “parent” account. Existing methods of account access &amp; delegation (i.e. keys) still imply ownership over the account, but insofar as linked accounts are concerned, the account to which both the user and the dApp share access via AuthAccount Capability will be considered the “child” account. This naming is a topic of community discussion and may be subject to change.</p>
<p><strong>Walletless onboarding</strong> - An onboarding flow whereby a dApp creates an account for a user, onboarding them to the dApp, obviating the need for user wallet authentication.</p>
<p><strong>Blockchain-native onboarding</strong> - Similar to the already familiar Web3 onboarding flow where a user authenticates with their existing wallet, a dApp onboards a user via wallet authentication while additionally creating a dApp account and linking it with the authenticated account, resulting in a hybrid custody model.</p>
<p><strong>Hybrid Custody Model</strong> - A custodial pattern in which a dApp and a user maintain access to a dApp created account and user access to that account has been mediated by account linking.</p>
<p><strong>Account Linking</strong> - Technically speaking, account linking in our context consists of giving some other account an AuthAccount Capability from the granting account. This Capability is maintained in (soon to be standard) resource called a <code>LinkedAccounts.Collection</code>, providing its owning user access to any and all of their linked accounts.</p>
<p><strong>Progressive Onboarding</strong> - An onboarding flow that walks a user up to self-custodial ownership, starting with walletless onboarding and later linking the dApp account with the user’s authenticated wallet once the user chooses to do so.</p>
<h1>Onboarding Flows</h1>
<p>Given the ability to establish an account and later delegate access to a user, dApps are freed from the constraints of dichotomous custodial &amp; self-custodial patterns. A developer can choose to onboard a user via traditional Web2 identity and later delegate access to the user’s wallet account. Alternatively, a dApp can enable wallet authentication at the outset, creating a dApp specific account &amp; linking with the user’s wallet account. As specified above, these two flows are known as walletless and blockchain-native respectively. Developers can choose to implement one for simplicity or both for user flexibility.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="walletless-onboarding">Walletless Onboarding<a href="#walletless-onboarding" class="hash-link" aria-label="Direct link to Walletless Onboarding" title="Direct link to Walletless Onboarding">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-creation">Account Creation<a href="#account-creation" class="hash-link" aria-label="Direct link to Account Creation" title="Direct link to Account Creation">​</a></h3>
<p>The following transaction creates an account, funding creation via the signer and adding the provided public key. You&#x27;ll notice this transaction is pretty much your standard account creation. The magic for you will be how you custody the key for this account (locally, KMS, wallet service, etc.) in a manner that allows your dapp to mediate on-chain interactions on behalf of your user.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>import FlowToken from &quot;../../contracts/utility/FlowToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>import FungibleToken from &quot;../../contracts/utility/FungibleToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>/// Taken from the onflow/linked-accounts repo</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>/// https://github.com/onflow/linked-accounts</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>///</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>transaction(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>    pubKey: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>    initialFundingAmt: UFix64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>  ) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>	</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>	prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		/* --- Account Creation (your dApp may choose to separate creation depending on your custodial model) --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// Create the child account, funding via the signer</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		let newAccount = AuthAccount(payer: signer)</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// Create a public key for the proxy account from string value in the provided arg</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// **NOTE:** You may want to specify a different signature algo for your use case</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		let key = PublicKey(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			publicKey: pubKey.decodeHex(),</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			signatureAlgorithm: SignatureAlgorithm.ECDSA_P256</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		)</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// Add the key to the new account</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// **NOTE:** You may want to specify a different hash algo &amp; weight best for your use case</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		newAccount.keys.add(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			publicKey: key,</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			hashAlgorithm: HashAlgorithm.SHA3_256,</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			weight: 1000.0</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		)</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		/* --- (Optional) Additional Account Funding --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// Fund the new account if specified</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		if initialFundingAmt &gt; 0.0 {</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			// Get a vault to fund the new account</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			let fundingProvider = signer.borrow&lt;&amp;FlowToken.Vault{FungibleToken.Provider}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>					from: /storage/flowTokenVault</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>				)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			// Fund the new account with the initialFundingAmount specified</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			newAccount.getCapability&lt;&amp;FlowToken.Vault{FungibleToken.Receiver}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>				/public/flowTokenReceiver</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			).borrow()!</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			.deposit(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>				from: &lt;-fundingProvider.withdraw(</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>					amount: initialFundingAmt</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>				)</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>			)</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		}</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		/* Continue with use case specific setup */</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// At this point, the newAccount can further be configured as suitable for</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// use in your dapp (e.g. Setup a Collection, Mint NFT, Configure Vault, etc.)</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>		// ...</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>	}</span></div></div><div><span class="ch-code-line-number">_<!-- -->57</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blockchain-native-onboarding">Blockchain-Native Onboarding<a href="#blockchain-native-onboarding" class="hash-link" aria-label="Direct link to Blockchain-Native Onboarding" title="Direct link to Blockchain-Native Onboarding">​</a></h2>
<p>Compared to walletless onboarding where a user does not have a Flow account, blockchain-native onboarding assumes a user already has a wallet configured and immediately links it with a newly created dApp account. This enables the dApp to sign transactions on the user&#x27;s behalf via the new child account while immediately delegating control of that account to the onboarding user&#x27;s main account.</p>
<p>After this transaction, both the custodial party (presumably the client/dApp) and the signing parent account will have access to the newly created account - the custodial party via key access and the parent account via their <code>LinkedAccounts.Collection</code> maintaining the new account&#x27;s AuthAccount Capability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-creation--linking">Account Creation &amp; Linking<a href="#account-creation--linking" class="hash-link" aria-label="Direct link to Account Creation &amp; Linking" title="Direct link to Account Creation &amp; Linking">​</a></h3>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>#allowAccountLinking</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>import FungibleToken from &quot;../../contracts/utility/FungibleToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>import FlowToken from &quot;../../contracts/utility/FlowToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>import MetadataViews from &quot;../../contracts/utility/MetadataViews.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>import NonFungibleToken from &quot;../../contracts/utility/NonFungibleToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>import LinkedAccountMetadataViews from &quot;../../contracts/LinkedAccountMetadataViews.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>import LinkedAccounts from &quot;../../contracts/LinkedAccounts.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>/// Taken from the onflow/linked-accounts repo</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>/// https://github.com/onflow/linked-accounts</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>///</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>transaction(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    pubKey: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    fundingAmt: UFix64,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    linkedAccountName: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    linkedAccountDescription: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    clientThumbnailURL: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    clientExternalURL: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    authAccountPathSuffix: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    handlerPathSuffix: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>  ) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	let collectionRef: &amp;LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    let info: LinkedAccountMetadataViews.AccountInfo</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>    let authAccountCap: Capability&lt;&amp;AuthAccount&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	let newAccountAddress: Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	prepare(parent: AuthAccount, client: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		/* --- Account Creation (your dApp may choose to handle creation differently depending on your custodial model) --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Create the child account, funding via the signer</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		let newAccount = AuthAccount(payer: client)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Create a public key for the proxy account from string value in the provided arg</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// **NOTE:** You may want to specify a different signature algo for your use case</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		let key = PublicKey(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			publicKey: pubKey.decodeHex(),</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			signatureAlgorithm: SignatureAlgorithm.ECDSA_P256</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Add the key to the new account</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// **NOTE:** You may want to specify a different hash algo &amp; weight best for your use case</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		newAccount.keys.add(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			publicKey: key,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			hashAlgorithm: HashAlgorithm.SHA3_256,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			weight: 1000.0</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		/* (Optional) Additional Account Funding */</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Fund the new account if specified</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		if fundingAmt &gt; 0.0 {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			// Get a vault to fund the new account</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			let fundingProvider = client.borrow&lt;&amp;FlowToken.Vault{FungibleToken.Provider}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>					from: /storage/flowTokenVault</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>				)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			// Fund the new account with the initialFundingAmount specified</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			newAccount.getCapability&lt;&amp;FlowToken.Vault{FungibleToken.Receiver}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>				/public/flowTokenReceiver</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			).borrow()!</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			.deposit(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>				from: &lt;-fundingProvider.withdraw(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>					amount: fundingAmt</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>				)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		self.newAccountAddress = newAccount.address</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// At this point, the newAccount can further be configured as suitable for</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// use in your dapp (e.g. Setup a Collection, Mint NFT, Configure Vault, etc.)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// ...</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		/* --- Setup parent&#x27;s LinkedAccounts.Collection --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Check that Collection is saved in storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        if parent.type(at: LinkedAccounts.CollectionStoragePath) == nil {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            parent.save(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                &lt;-LinkedAccounts.createEmptyCollection(),</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                to: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        // Link the public Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        if !parent.getCapability&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(LinkedAccounts.CollectionPublicPath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            parent.unlink(LinkedAccounts.CollectionPublicPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            parent.link&lt;&amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, MetadataViews.ResolverCollection}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                LinkedAccounts.CollectionPublicPath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                target: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        // Link the private Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        if !parent.getCapability&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, NonFungibleToken.CollectionPublic, NonFungibleToken.Receiver, NonFungibleToken.Provider, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(LinkedAccounts.CollectionPrivatePath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            parent.unlink(LinkedAccounts.CollectionPrivatePath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            parent.link&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, NonFungibleToken.CollectionPublic, NonFungibleToken.Receiver, NonFungibleToken.Provider, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                LinkedAccounts.CollectionPrivatePath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>                target: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Assign a reference to the Collection we now know is correctly configured</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		self.collectionRef = parent.borrow&lt;&amp;LinkedAccounts.Collection&gt;(from: LinkedAccounts.CollectionStoragePath)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		/* --- Link the child account&#x27;s AuthAccount Capability &amp; assign --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Assign the PrivatePath where we&#x27;ll link the AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        let authAccountPath: PrivatePath = PrivatePath(identifier: authAccountPathSuffix)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            ?? panic(&quot;Could not construct PrivatePath from given suffix: &quot;.concat(authAccountPathSuffix))</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Link the new account&#x27;s AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		self.authAccountCap = newAccount.linkAccount(authAccountPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		/** --- Construct metadata --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        // Construct linked account metadata from given arguments</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        self.info = LinkedAccountMetadataViews.AccountInfo(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            name: linkedAccountName,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            description: linkedAccountDescription,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            thumbnail: MetadataViews.HTTPFile(url: clientThumbnailURL),</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>            externalURL: MetadataViews.ExternalURL(clientExternalURL)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	execute {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		/* --- Link the parent &amp; child accounts --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		//</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Add the child account</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		self.collectionRef.addAsChildAccount(</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			linkedAccountCap: self.authAccountCap,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			linkedAccountMetadata: self.info,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			linkedAccountMetadataResolver: nil,</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			handlerPathSuffix: handlerPathSuffix</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		)</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	post {</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		// Make sure new account was linked to parent&#x27;s successfully</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>		self.collectionRef.getLinkedAccountAddresses().contains(self.newAccountAddress):</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>			&quot;Problem linking accounts!&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>	}</span></div></div><div><span class="ch-code-line-number">_<!-- -->143</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h1>Account Linking</h1>
<p>Linking an account is the process of delegating account access via AuthAccount Capability. Of course, we want to do this in a way that allows the receiving account to maintain that Capability and allows easy identification of the accounts on either end of the linkage - the user&#x27;s main &quot;parent&quot; account and the linked &quot;child&quot; account. This is accomplished in the (still in flux) <code>LinkedAccounts</code> contract which we&#x27;ll continue to use in this guidance.</p>
<blockquote>
<p>⚠️ Note that since account linking is a sensitive action, transactions where an account may be linked are designated by a topline pragma <code>#allowAccountLinking</code>. This lets wallet providers inform users that their account may be linked in the signing transaction.</p>
</blockquote>
<p><img loading="lazy" src="/docs/assets/images/linked-accounts-diagram-f661c11d238d62ff6d5009edcb51be0f.jpg" alt="resources/linked-accounts-diagram.jpg" width="2676" height="2247" class="img_ev3q"></p>
<p><em>In this scenario, a user custodies a key for their main account which has a <code>LinkedAccounts.Collection</code> within it. Their <code>LinkedAccounts.NFT</code> maintains an AuthAccount Capability to the child account, which the dApp maintains access to via the account’s key and within which a <code>LinkedAccounts.Handler</code>.</em></p>
<p>Linking accounts can be done in one of two ways. Put simply, the child account needs to get the parent account its AuthAccount Capability, and the parent needs to save that Capability in its <code>LinkedAccounts.Collection</code> in a manner that represents the linked accounts and their relative associations. We can achieve this in a multisig transaction signed by both the the accounts on either side of the link, or we can leverage Cadence’s <code>AuthAccount.Inbox</code> to publish the Capability from the child account &amp; have the parent claim the Capability in a separate transaction. Let’s take a look at both.</p>
<blockquote>
<p>A consideration during the linking process is whether you would like the parent account to be configured with some resources or Capabilities relevant to your dApp. For example, if your dApp deals with specific NFTs, you may want to configure the parent account with Collections for those NFTs so the user can easily transfer them between their linked accounts.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multisig-transaction">Multisig Transaction<a href="#multisig-transaction" class="hash-link" aria-label="Direct link to Multisig Transaction" title="Direct link to Multisig Transaction">​</a></h3>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>#allowAccountLinking</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>import MetadataViews from &quot;../../contracts/utility/MetadataViews.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>import NonFungibleToken from &quot;../../contracts/utility/NonFungibleToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>import LinkedAccountMetadataViews from &quot;../../contracts/LinkedAccountMetadataViews.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>import LinkedAccounts from &quot;../../contracts/LinkedAccounts.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>/// Links thie signing accounts as labeled, with the child&#x27;s AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>/// maintained in the parent&#x27;s LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>///</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>transaction(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    linkedAccountName: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    linkedAccountDescription: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    clientThumbnailURL: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    clientExternalURL: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    authAccountPathSuffix: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    handlerPathSuffix: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    let collectionRef: &amp;LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    let info: LinkedAccountMetadataViews.AccountInfo</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    let authAccountCap: Capability&lt;&amp;AuthAccount&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    let linkedAccountAddress: Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    prepare(parent: AuthAccount, child: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        /** --- Configure Collection &amp; get ref --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Check that Collection is saved in storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        if parent.type(at: LinkedAccounts.CollectionStoragePath) == nil {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            parent.save(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                &lt;-LinkedAccounts.createEmptyCollection(),</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                to: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Link the public Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        if !parent.getCapability&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(LinkedAccounts.CollectionPublicPath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            parent.unlink(LinkedAccounts.CollectionPublicPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            parent.link&lt;&amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, MetadataViews.ResolverCollection}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                LinkedAccounts.CollectionPublicPath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                target: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Link the private Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        if !parent.getCapability&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, NonFungibleToken.CollectionPublic, NonFungibleToken.Receiver, NonFungibleToken.Provider, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(LinkedAccounts.CollectionPrivatePath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            parent.unlink(LinkedAccounts.CollectionPrivatePath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            parent.link&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, NonFungibleToken.CollectionPublic, NonFungibleToken.Receiver, NonFungibleToken.Provider, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                LinkedAccounts.CollectionPrivatePath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                target: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Get Collection reference from signer</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        self.collectionRef = parent.borrow&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                from: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            )!</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        /* --- Link the child account&#x27;s AuthAccount Capability &amp; assign --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Assign the PrivatePath where we&#x27;ll link the AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        let authAccountPath: PrivatePath = PrivatePath(identifier: authAccountPathSuffix)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            ?? panic(&quot;Could not construct PrivatePath from given suffix: &quot;.concat(authAccountPathSuffix))</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Get the AuthAccount Capability, linking if necessary</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        if !child.getCapability&lt;&amp;AuthAccount&gt;(authAccountPath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            // Unlink any Capability that may be there</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            child.unlink(authAccountPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            // Link &amp; assign the AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            self.authAccountCap = child.linkAccount(authAccountPath)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        } else {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            // Assign the AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            self.authAccountCap = child.getCapability&lt;&amp;AuthAccount&gt;(authAccountPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        self.linkedAccountAddress = self.authAccountCap.borrow()?.address ?? panic(&quot;Problem with retrieved AuthAccount Capability&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        /** --- Construct metadata --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Construct linked account metadata from given arguments</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        self.info = LinkedAccountMetadataViews.AccountInfo(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            name: linkedAccountName,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            description: linkedAccountDescription,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            thumbnail: MetadataViews.HTTPFile(url: clientThumbnailURL),</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            externalURL: MetadataViews.ExternalURL(clientExternalURL)</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    execute {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        // Add child account if it&#x27;s parent-child accounts aren&#x27;t already linked</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        if !self.collectionRef.getLinkedAccountAddresses().contains(self.linkedAccountAddress) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            // Add the child account</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            self.collectionRef.addAsChildAccount(</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                linkedAccountCap: self.authAccountCap,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                linkedAccountMetadata: self.info,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                linkedAccountMetadataResolver: nil,</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>                handlerPathSuffix: handlerPathSuffix</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    post {</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>        self.collectionRef.getLinkedAccountAddresses().contains(self.linkedAccountAddress):</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>            &quot;Problem linking accounts!&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->110</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="publish--claim">Publish &amp; Claim<a href="#publish--claim" class="hash-link" aria-label="Direct link to Publish &amp; Claim" title="Direct link to Publish &amp; Claim">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="publish">Publish<a href="#publish" class="hash-link" aria-label="Direct link to Publish" title="Direct link to Publish">​</a></h3>
<p>Here, the account delegating access to itself links its AuthAccount Capability, and publishes it to be claimed by the account it will be linked to.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>#allowAccountLinking</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// Signing account publishes a Capability to its AuthAccount for</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>/// the specified parentAddress to claim</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>///</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>transaction(parentAddress: Address, authAccountPathSuffix: String) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    let authAccountCap: Capability&lt;&amp;AuthAccount&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // Assign the PrivatePath where we&#x27;ll link the AuthAccount Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        let authAccountPath: PrivatePath = PrivatePath(identifier: authAccountPathSuffix)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>            ?? panic(&quot;Could not construct PrivatePath from given suffix: &quot;.concat(authAccountPathSuffix))</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // Get the AuthAccount Capability, linking if necessary</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        if !signer.getCapability&lt;&amp;AuthAccount&gt;(authAccountPath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>            signer.unlink(authAccountPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>            self.authAccountCap = signer.linkAccount(authAccountPath)!</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        } else {</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>            self.authAccountCap = signer.getCapability&lt;&amp;AuthAccount&gt;(authAccountPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        // Publish for the specified Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>        signer.inbox.publish(self.authAccountCap!, name: &quot;AuthAccountCapability&quot;, recipient: parentAddress)</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->24</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="claim">Claim<a href="#claim" class="hash-link" aria-label="Direct link to Claim" title="Direct link to Claim">​</a></h3>
<p>On the other side, the receiving account claims the published AuthAccount Capability, adding it to the signer&#x27;s <code>LinkedAccounts.Collection</code>.</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>import MetadataViews from &quot;../../contracts/utility/MetadataViews.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>import NonFungibleToken from &quot;../../contracts/utility/NonFungibleToken.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>import LinkedAccountMetadataViews from &quot;../../contracts/LinkedAccountMetadataViews.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>import LinkedAccounts from &quot;../../contracts/LinkedAccounts.cdc&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>/// Signing account claims a Capability to specified Address&#x27;s AuthAccount</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>/// and adds it as a child account in its LinkedAccounts.Collection, allowing it </span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>/// to maintain the claimed Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>///</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>transaction(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        linkedAccountAddress: Address,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        linkedAccountName: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        linkedAccountDescription: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        clientThumbnailURL: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        clientExternalURL: String,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        handlerPathSuffix: String</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    ) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    let collectionRef: &amp;LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    let info: LinkedAccountMetadataViews.AccountInfo</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    let authAccountCap: Capability&lt;&amp;AuthAccount&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    prepare(signer: AuthAccount) {</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        /** --- Configure Collection &amp; get ref --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Check that Collection is saved in storage</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        if signer.type(at: LinkedAccounts.CollectionStoragePath) == nil {</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            signer.save(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &lt;-LinkedAccounts.createEmptyCollection(),</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                to: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Link the public Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        if !signer.getCapability&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(LinkedAccounts.CollectionPublicPath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            signer.unlink(LinkedAccounts.CollectionPublicPath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            signer.link&lt;&amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, MetadataViews.ResolverCollection}&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                LinkedAccounts.CollectionPublicPath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                target: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Link the private Capability</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        if !signer.getCapability&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, NonFungibleToken.CollectionPublic, NonFungibleToken.Receiver, NonFungibleToken.Provider, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(LinkedAccounts.CollectionPrivatePath).check() {</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            signer.unlink(LinkedAccounts.CollectionPrivatePath)</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            signer.link&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection{LinkedAccounts.CollectionPublic, NonFungibleToken.CollectionPublic, NonFungibleToken.Receiver, NonFungibleToken.Provider, MetadataViews.ResolverCollection}</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                LinkedAccounts.CollectionPrivatePath,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                target: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Get Collection reference from signer</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        self.collectionRef = signer.borrow&lt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &amp;LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            &gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                from: LinkedAccounts.CollectionStoragePath</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            )!</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        /** --- Prep to link account --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Claim the previously published AuthAccount Capability from the given Address</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        self.authAccountCap = signer.inbox.claim&lt;&amp;AuthAccount&gt;(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &quot;AuthAccountCapability&quot;,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                provider: linkedAccountAddress</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            ) ?? panic(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                &quot;No AuthAccount Capability available from given provider&quot;</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                .concat(linkedAccountAddress.toString())</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                .concat(&quot; with name &quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>                .concat(&quot;AuthAccountCapability&quot;)</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            )</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        /** --- Construct metadata --- */</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        //</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Construct linked account metadata from given arguments</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        self.info = LinkedAccountMetadataViews.AccountInfo(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            name: linkedAccountName,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            description: linkedAccountDescription,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            thumbnail: MetadataViews.HTTPFile(url: clientThumbnailURL),</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            externalURL: MetadataViews.ExternalURL(clientExternalURL)</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    execute {</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        // Add account as child to the signer&#x27;s LinkedAccounts.Collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        self.collectionRef.addAsChildAccount(</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            linkedAccountCap: self.authAccountCap,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            linkedAccountMetadata: self.info,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            linkedAccountMetadataResolver: nil,</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>            handlerPathSuffix: handlerPathSuffix</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>        )</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><span class="ch-code-line-number">_<!-- -->95</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h1>Funding &amp; Custody Patterns</h1>
<p>Aside from implementing onboarding flows &amp; account linking, you&#x27;ll want to also consider the account funding &amp; custodial pattern appropriate for the dApp you&#x27;re building. The only one compatible with walletless onboarding (and therefore the only one showcased above) is one in which the dApp custodies the child account&#x27;s key and funds account creation.</p>
<p>In general, the funding pattern for account creation will determine to some extent the backend infrastructure needed to support your dApp and the onboarding flow your dApp can support. For example, if you want to to create a service-less client (a totally local dApp without backend infrastructure), you could forego walletless onboarding in favor of a user-funded blockchain-native onboarding to achieve a hybrid custody model. Your dApp maintains the keys to the dApp account to sign on behalf of the user, and the user funds the creation of the the account, linking to their main account on account creation. This would be a <strong>user-funded, dApp custodied</strong> pattern.</p>
<p>Again, custody may deserve some regulatory insight depending on your jurisdiction. If building for production, you&#x27;ll likely want to consider these non-technical implications in your technical decision-making. Such is the nature of building in crypto...</p>
<p>Here are the patterns you might consider:</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dapp-funded-dapp-custodied">DApp-Funded, DApp-Custodied<a href="#dapp-funded-dapp-custodied" class="hash-link" aria-label="Direct link to DApp-Funded, DApp-Custodied" title="Direct link to DApp-Funded, DApp-Custodied">​</a></h2>
<p>If you want to implement walletless onboarding, you can stop here as this is the only compatible pattern. In this scenario, a backend dApp account funds the creation of a new account and the dApp custodies the key for said account either on the user&#x27;s device or some backend KMS.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dapp-funded-user-custodied">DApp-Funded, User-Custodied<a href="#dapp-funded-user-custodied" class="hash-link" aria-label="Direct link to DApp-Funded, User-Custodied" title="Direct link to DApp-Funded, User-Custodied">​</a></h2>
<p>In this case, the backend dApp account funds account creation, but adds a key to the account which the user custodies. In order for the dApp to act on the user&#x27;s behalf, it has to be delegated access via AuthAccount Capability which the backend dApp account would maintain in a <code>LinkedAccounts.Collection</code>. This means that the new account would have two parent accounts - the user&#x27;s and the dApp. While not comparatively useful now, once <a href="https://forum.onflow.org/t/super-user-account/4088" target="_blank" rel="noopener noreferrer"><code>SuperAuthAccount</code></a> is ironed out and implemented, this pattern will be the most secure in that the custodying user will have ultimate authority over the child account. Also note that this and the following patterns are incompatible with walletless onboarding in that the user must have a wallet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-funded-dapp-custodied">User-Funded, DApp-Custodied<a href="#user-funded-dapp-custodied" class="hash-link" aria-label="Direct link to User-Funded, DApp-Custodied" title="Direct link to User-Funded, DApp-Custodied">​</a></h2>
<p>As mentioned above, this pattern unlocks totally service-less architectures - just a local client &amp; smart contracts. An authenticated user signs a transaction creating an account, adding the key provided by the client, and linking the account as a child account. At the end of the transaction, hybrid custody is achieved and the dApp can sign with the custodied key on the user&#x27;s behalf using the newly created account.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-funded-user-custodied">User-Funded, User-Custodied<a href="#user-funded-user-custodied" class="hash-link" aria-label="Direct link to User-Funded, User-Custodied" title="Direct link to User-Funded, User-Custodied">​</a></h2>
<p>While perhaps not useful for most dApps, this pattern may be desirable for advanced users who wish to create a shared access account themselves. The user funds account creation, adding keys they custody, and delegates secondary access to some other account. As covered above in account linking, this can be done via multisig or the publish &amp; claim mechanism.</p>
<h1>Additional Resources</h1>
<p>You can find additional Cadence examples in context at the following repos:</p>
<ul>
<li><a href="https://github.com/onflow/linked-accounts" target="_blank" rel="noopener noreferrer">LinkedAccounts contract &amp; supporting scripts &amp; transactions</a></li>
<li><a href="https://github.com/onflow/sc-eng-gaming/tree/sisyphusSmiling/child-account-auth-acct-cap" target="_blank" rel="noopener noreferrer">Using ChildAccount paradigm in an on-chain Rock, Paper, Scissors game</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/concepts/hybrid-custody/guides/linking-accounts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-05-12T18:20:57.000Z">May 12, 2023</time></b> by <b>Alex</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/concepts/hybrid-custody/guides/account-model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Account Model &amp; Implementation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts/hybrid-custody/guides/walletless-onboarding"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Walletless Onboarding</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#account-linking" class="table-of-contents__link toc-highlight">Account Linking</a></li><li><a href="#linking-accounts" class="table-of-contents__link toc-highlight">Linking Accounts</a></li><li><a href="#walletless-onboarding" class="table-of-contents__link toc-highlight">Walletless Onboarding</a><ul><li><a href="#account-creation" class="table-of-contents__link toc-highlight">Account Creation</a></li></ul></li><li><a href="#blockchain-native-onboarding" class="table-of-contents__link toc-highlight">Blockchain-Native Onboarding</a><ul><li><a href="#account-creation--linking" class="table-of-contents__link toc-highlight">Account Creation &amp; Linking</a></li><li><a href="#multisig-transaction" class="table-of-contents__link toc-highlight">Multisig Transaction</a></li></ul></li><li><a href="#publish--claim" class="table-of-contents__link toc-highlight">Publish &amp; Claim</a><ul><li><a href="#publish" class="table-of-contents__link toc-highlight">Publish</a></li><li><a href="#claim" class="table-of-contents__link toc-highlight">Claim</a></li></ul></li><li><a href="#dapp-funded-dapp-custodied" class="table-of-contents__link toc-highlight">DApp-Funded, DApp-Custodied</a></li><li><a href="#dapp-funded-user-custodied" class="table-of-contents__link toc-highlight">DApp-Funded, User-Custodied</a></li><li><a href="#user-funded-dapp-custodied" class="table-of-contents__link toc-highlight">User-Funded, DApp-Custodied</a></li><li><a href="#user-funded-user-custodied" class="table-of-contents__link toc-highlight">User-Funded, User-Custodied</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn">Learning Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/mobile">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tooling/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/kitty-items">Kitty Items</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.0e607cc6.js"></script>
<script src="/docs/assets/js/main.05ceea81.js"></script>
</body>
</html>