<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-stable plugin-docs plugin-id-default docs-doc-id-concepts/staking/staking-collection">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Manage a Staking Collection | Flow Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" name="twitter:image" content="https://onflow.github.io/docs/img/FlowDocs_Logo_FlowLogo_Horizontal_Green_BlackText.svg"><meta data-rh="true" property="og:url" content="https://onflow.github.io/docs/concepts/staking/staking-collection"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="stable"><meta data-rh="true" name="docusaurus_tag" content="docs-default-stable"><meta data-rh="true" name="docsearch:version" content="stable"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-stable"><meta data-rh="true" property="og:title" content="Manage a Staking Collection | Flow Developer Portal"><meta data-rh="true" name="description" content="This document outlines the steps a token holder can take to stake"><meta data-rh="true" property="og:description" content="This document outlines the steps a token holder can take to stake"><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="https://onflow.github.io/docs/concepts/staking/staking-collection"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/concepts/staking/staking-collection" hreflang="en"><link data-rh="true" rel="alternate" href="https://onflow.github.io/docs/concepts/staking/staking-collection" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Flow Developer Portal" href="/docs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/mixpanel.js" async onload="if (&#39;776159d170484f49f19c3c2f7339f297&#39; &amp;&amp; &#39;776159d170484f49f19c3c2f7339f297&#39; !== &#39;undefined&#39;) {
  window.mixpanel.init(&#39;776159d170484f49f19c3c2f7339f297&#39;);

  const viwedPayload = {
    &#39;Page Name&#39;: document.title,
    &#39;Page URL&#39;: window.location.pathname,
  }
  window.mixpanel.track(&#39;Page Viewed&#39;, viwedPayload);

  const playUrl = &#39;play.onflow.org&#39;;
  const links = document.querySelectorAll(&#39;a&#39;) || [];
  const isPlayPage = Array.from(links).some((link) =&gt; link.href.includes(playUrl));

  if (isPlayPage) {
    window.mixpanel.track(&#39;Play Page Viewed&#39;, viwedPayload);
  }
  
  window.document.addEventListener(&#39;click&#39;, function (event) {
    var target = event.target;
  
    // Check if the clicked element is a link with an href attribute
    if (target.tagName === &#39;A&#39; &amp;&amp; target.hasAttribute(&#39;href&#39;)) {
      if (window.mixpanel) {
        const payload = {
          href: target.getAttribute(&#39;href&#39;),
          id: target.id,
          class: target.className,
        }
        window.mixpanel.track(&#39;Link clicked&#39;, payload);
        const isPlay = payload.href.includes(&#39;play.onflow.org&#39;);
        if (isPlay) {
          window.mixpanel.track(&#39;Play Link clicked&#39;, payload);        
        }
      }
    }
  });
}"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script>
<script src="/hotjar.js" async></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="0f0b3ed1-7761-4986-851e-09336ea6ef1c" data-project-name="Flow" data-project-color="#2E8555" data-project-logo="https://cryptologos.cc/logos/flow-flow-logo.png" async></script><link rel="stylesheet" href="/docs/assets/css/styles.115fa643.css">
<link rel="preload" href="/docs/assets/js/runtime~main.eb536800.js" as="script">
<link rel="preload" href="/docs/assets/js/main.7281d816.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/flow-docs-logo-dark.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/flow-docs-logo-light.png" alt="Flow Developer Portal Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/concepts/intro">Concepts</a><a class="navbar__item navbar__link" href="/docs/next/guides">Guides</a><a class="navbar__item navbar__link" href="/docs/cadence/intro">Cadence</a><a class="navbar__item navbar__link" href="/docs/next/tools">Tools</a><a class="navbar__item navbar__link" href="/docs/references/Introduction">References</a><a class="navbar__item navbar__link" href="/docs/community-resources/Introduction">Resources</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/concepts/intro">Current</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/concepts/start-here">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/concepts/staking/staking-collection">Current</a></li></ul></div><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="GitHub" id="navbar-github" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Github</span></a><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link h-8 desktop:p-1"><img src="" alt="Discord" id="navbar-discord" class="box-content h-32 w-32"><span class="p-2 desktop:hidden">Discord</span></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/start-here">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/flow-networks">Flow Networks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Networks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/flow-token">FLOW Token</a><button aria-label="Toggle the collapsible sidebar category &#x27;FLOW Token&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/core-contracts">Flow Core Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Core Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/concepts/staking">Epochs, Staking &amp; Delegating on Flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Epochs, Staking &amp; Delegating on Flow&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/epoch-terminology">Epoch and Staking Terminology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/schedule">Epoch and Reward Schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/epoch-preparation">Epoch Preparation Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/stake-slashing">Stake Slashing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/epoch-scripts-events">Query Epoch Info with Scripts or Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/technical-overview">Staking Technical Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/staking-scripts-events">Query Staking Info with Scripts or Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/staking-rewards">Staking and Delegation rewards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/qc-dkg">Quorum Certificate and Distributed Key Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/qc-dkg-scripts-events">Query QC/DKG Info with Scripts or Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/machine-account">Machine Account</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/faq">Staking FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/staking-options">Options for Building Staking Integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/concepts/staking/staking-collection">Manage a Staking Collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/staking/staking-guide">Basic Staking with FLOW</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/token-standards">Token Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Token Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/nodes">Flow Nodes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Nodes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/mobile">Flow Mobile</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flow Mobile&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concepts/account-linking">Account Linking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Account Linking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/concepts/staking"><span itemprop="name">Epochs, Staking &amp; Delegating on Flow</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Manage a Staking Collection</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Current</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Manage a Staking Collection</h1></header><p>This document outlines the steps a token holder can take to stake
using <a href="/docs/concepts/core-contracts/staking-contract-reference">the <code>FlowIDTableStaking</code> contract</a>
and <a href="/docs/concepts/core-contracts/staking-collection">the <code>FlowStakingCollection</code> contract.</a>
This is the recommended and most supported way to stake FLOW.
It supports any number of nodes and delegators per account, supports locked and unlocked FLOW,
and supports easily interaction with a node&#x27;s machine account for collector and consensus nodes.</p>
<h1>Staking Collection Overview</h1>
<p>A Staking Collection is a resource that allows its owner to manage multiple staking
objects in a single account via a single storage path, and perform staking actions
using both locked and unlocked Flow.</p>
<p>Before the staking collection, accounts could use the instructions in
<a href="/docs/concepts/staking/staking-guide">the unlocked staking guide</a>
to stake with tokens. This was a bit restrictive, because that guide (and the corresponding transactions)
only supports one node and one delegator object
per account. If a user wanted to have more than one per account,
they would either have to use custom transactions with custom storage paths for each object,
or they would have had to use multiple accounts, which comes with many hassles of its own.</p>
<p>The staking collection is a solution to both of these deficiencies.
When an account is set up to use a staking collection, the staking collection recognizes
the existing locked account capabilities (if they exist) and unlocked account staking objects,
and incorporates their functionality so any user can stake for a node or stake as a delegator
through a single common interface, regardless of if they have a brand new account,
or have been staking through the locked account or unlocked account before.</p>
<p>The staking collection also easily allows a user to transfer their node or delegator objects
to other accounts without interrupting the staking process!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="staker-object-fields">Staker Object Fields<a href="#staker-object-fields" class="hash-link" aria-label="Direct link to Staker Object Fields" title="Direct link to Staker Object Fields">​</a></h2>
<p>The staking collection resource has two main fields,</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(self) var nodeStakers: @{String: FlowIDTableStaking.NodeStaker}</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(self) var nodeDelegators: @{String: FlowIDTableStaking.NodeDelegator}</span></div></div><br></code></div></div>
<p>These dictionaries store the staking objects that are managed by the staking collection.
Access to these dictionaries are mediated by the staking methods.
When a user wants to perform a staking operation,
they specify the nodeID and/or delegatorID they want to stake for, and the function routes the function
call to the correct staking object and performs the specified operation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vault-capability-fields">Vault Capability Fields<a href="#vault-capability-fields" class="hash-link" aria-label="Direct link to Vault Capability Fields" title="Direct link to Vault Capability Fields">​</a></h2>
<p>The staking collection also has a field that stores a capability for
the unlocked FLOW Vault and locked FLOW vault (if applicable)</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// unlocked vault</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(self) var unlockedVault: Capability&lt;&amp;FlowToken.Vault&gt;</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// locked vault</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// will be nil if the account has no corresponding locked account</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>access(self) var lockedVault: Capability&lt;&amp;FlowToken.Vault&gt;?</span></div></div><br></code></div></div>
<p>When a user performs staking operations like staking new tokens,
the staking collection tracks the number of unlocked tokens
and locked tokens (if applicable) that are used by the staking objects in the collection.
The collection will always try to stake any available locked tokens first.
Once all locked tokens are staked, if the user requested to stake more than the locked token balance,
the collection will then dip into the unlocked balance for the remaining tokens.
If the user has no locked tokens, the staking collection
will simply ignore the locked tokens part of the functionality and only use unlocked tokens.</p>
<p>When a user withdraws tokens from a staking object, the collection
will always try to withdraw unlocked tokens first.
Any unlocked tokens are then deposited directly into the vault on the unlocked account,
and remaining locked tokens are deposited to the vault in the locked account.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="machine-account-support">Machine Account Support<a href="#machine-account-support" class="hash-link" aria-label="Direct link to Machine Account Support" title="Direct link to Machine Account Support">​</a></h2>
<p>The staking collection also supports an important feature for epochs, machine accounts.
Machine accounts are where node operators store important resource objects
that are critical to the functionality of the epoch preparation protocol.
Every collector and consensus node should have an associated machine account that stores these objects,
and the staking collection helps the user create and manage these accounts.</p>
<p>When a user registers a new collector or consensus node,
the staking collection also creates a machine account for them and registers
the required object that needs to go in the machine account.
The node operator is then responsible for adding keys to the account.
(the <strong>Register Node</strong> transaction includes this step).</p>
<p>Once the machine account is created and set up, the node operator just has to
connect it to their node software and make sure the account has enough FLOW
to pay for transaction fees, which can be handled simply by submitting
a regular FLOW transfer to the machine account&#x27;s address</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="staking-collection-public-getter-methods">Staking Collection Public Getter Methods<a href="#staking-collection-public-getter-methods" class="hash-link" aria-label="Direct link to Staking Collection Public Getter Methods" title="Direct link to Staking Collection Public Getter Methods">​</a></h2>
<p>The staking collection also defines many getter methods to query information
about an account&#x27;s staking collection. You can simply call one of these methods on the contract,
providing the account address, and the contract will retreive
the relevant info for you, like so:</p>
<div class="ch-codeblock not-prose"><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>import FlowStakingCollection from 0xSTAKINGCOLLECTIONADDRESS</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>import FlowIDTableStaking from 0xIDENTITYTABLEADDRESS</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>/// Gets an array of all the delegator metadata for delegators stored in the staking collection</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>pub fun main(address: Address): [FlowIDTableStaking.DelegatorInfo] {</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>    return FlowStakingCollection.getAllDelegatorInfo(address: address)</span></div></div><div><span class="ch-code-line-number">_<!-- -->10</span><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Remember: A Staking Collection does not require an account
to have a secondary locked account or locked FLOW.
However, if an account does have an associated locked account, when the Staking Collection is initialized,
it will connect to that locked account&#x27;s node and delegator objects
as well as it&#x27;s locked token vault allowing it to perform staking actions with locked and unlocked FLOW.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Staking Collection is backwards compatible with other methods of staking on Flow.
Existing accounts with associated locked accounts
will still be able to stake in the same way as before,
but they will also be able to use the staking collection, if desired.</p></div></div>
<h1>How to use the Staking Collection</h1>
<p>There is a standard set of transactions provided with the staking collection.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-a-staking-collection">Setup a Staking Collection<a href="#setup-a-staking-collection" class="hash-link" aria-label="Direct link to Setup a Staking Collection" title="Direct link to Setup a Staking Collection">​</a></h3>
<p>To set up a Staking Collection, you must run the <strong>Setup Staking Collection</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.01</a>) transaction.</p>
<p>This transaction requires no arguments and will perform the following actions:</p>
<ol>
<li>Create private capabilities for the unlocked vault and locked vault (if applicable).</li>
<li>Create a new staking collection resource object, initializing it with the unlocked and locked vault capabilities.</li>
<li>Store the staking collection at a pre-defined storage path.</li>
<li>Create a public link to the staking collection so others can query metadata about it.</li>
<li>If there are any node or delegator objects in the unlocked account, the transaction stores those in the staking collection
so they can be used through the same interface as usual.</li>
</ol>
<p><strong>No arguments</strong> are required for the <strong>Setup Staking Collection</strong> transaction.</p>
<p>Once this transaction is complete, your existing staking objects (if any) from your unlocked account and locked account
will be available via the staking collection and you can use all the transactions described below to access them.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-machine-account-for-an-existing-node">Create a Machine Account for an existing Node<a href="#create-a-machine-account-for-an-existing-node" class="hash-link" aria-label="Direct link to Create a Machine Account for an existing Node" title="Direct link to Create a Machine Account for an existing Node">​</a></h3>
<p>Many nodes will have been created before the staking collection was set up and before epochs were enabled,
meaning that they don&#x27;t already have an associated machine account.
These nodes need a new transaction to create the machine account for the node and save it to the staking collection.</p>
<p>To create a machine account for a node that doesn&#x27;t already have one,
you must submit the <strong>Create Machine Account</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.03</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The ID of the node.</td></tr><tr><td><strong>publicKeys</strong></td><td><code>[String]</code></td><td>The public keys to add to the machine account.</td></tr></tbody></table>
<p>If the node is a collector or consensus node, this transaction creates the associated machine account,
registers the QC or DKG object, stores it in the machine account,
and adds the provided public key(s) to the machine account.
If no public keys are provided, the transaction will fail.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-stakers">Register Stakers<a href="#register-stakers" class="hash-link" aria-label="Direct link to Register Stakers" title="Direct link to Register Stakers">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-a-new-staked-node">Register a New Staked Node<a href="#register-a-new-staked-node" class="hash-link" aria-label="Direct link to Register a New Staked Node" title="Direct link to Register a New Staked Node">​</a></h3>
<p>To register a new staked node, you must submit the <strong>Register Node</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.03</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>id</strong></td><td><code>String</code></td><td>The ID of the new node. It must be a 32 byte <code>String</code>. The operator is free to choose this value, but it must be unique across all nodes. A recommended process to generate this is to hash the staking public key.</td></tr><tr><td><strong>role</strong></td><td><code>UInt8</code></td><td>The role of the new node. (1: collection, 2: consensus, 3: execution, 4: verification, 5: access)</td></tr><tr><td><strong>networkingAddress</strong></td><td><code>String</code></td><td>The IP address of the new node.</td></tr><tr><td><strong>networkingKey</strong></td><td><code>String</code></td><td>The networking public key as a hex-encoded string.</td></tr><tr><td><strong>stakingKey</strong></td><td><code>String</code></td><td>The staking public key as a hex-encoded string.</td></tr><tr><td><strong>stakingKeyPoP</strong></td><td><code>String</code></td><td>The staking key Proof-of-Possesion as a hex-encoded string.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to stake.</td></tr><tr><td><strong>publicKeys</strong></td><td><code>[String]?</code></td><td>The public keys to add to the machine account. <code>nil</code> if no machine account</td></tr></tbody></table>
<p>This transaction registers the account as a staker with the specified node information
and attaches a <code>NodeStaker</code> resource to the <code>Staking Collection</code>.
This <code>NodeStaker</code> resourece can then later be used to perform staking actions via the staking collection staking methods.</p>
<p>If the node is a collector or consensus node, it also creates the associated machine account,
registers the QC or DKG object, stores it in the machine account,
and adds the provided public key(s) to the machine account.
If the node requires a machine account and no public keys are provided, the transaction will fail.</p>
<p>Once the account has registered their node using their Staking Collection,
their tokens and node information are committed to the central staking contract for the next epoch.</p>
<p>At this point, the Staking Collection now has access to various staking operations that they can perform,
assuming they have the correct number of tokens to perform the action.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-a-new-staked-delegator">Register a New Staked Delegator<a href="#register-a-new-staked-delegator" class="hash-link" aria-label="Direct link to Register a New Staked Delegator" title="Direct link to Register a New Staked Delegator">​</a></h3>
<p>To register a new delegator, you must submit the <strong>Register Delegator</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.02</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>id</strong></td><td><code>String</code></td><td>The ID of the node to delegate to.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to delegate.</td></tr></tbody></table>
<p>This transaction registers the account as a delegator to the node identified by the supplied node id.
It also attaches a <code>NodeDelegator</code> resource to the <code>Staking Collection</code>.
This <code>NodeDelegator</code> resourece can then later be used to perform delegation actions.</p>
<p>Once the account has registered their new delegator using their Staking Collection,
their tokens are committed to the central staking contract for the next epoch.</p>
<p>At this point, the Staking Collection now has access to various delegator operations that they can perform,
assuming they have the correct number of tokens to perform the action.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="staking-operations">Staking Operations<a href="#staking-operations" class="hash-link" aria-label="Direct link to Staking Operations" title="Direct link to Staking Operations">​</a></h2>
<p>These transactions perform actions that directly interact with the staking contract.
Most of them will only succeed during the Staking Auction phase of the epoch.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stake-new-tokens">Stake New Tokens<a href="#stake-new-tokens" class="hash-link" aria-label="Direct link to Stake New Tokens" title="Direct link to Stake New Tokens">​</a></h3>
<p>The Staking Collection can stake additional tokens for any Node or Delegator managed by it at any time.</p>
<p>The owner of a Staking Collection can use the <strong>Stake New Tokens</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.06</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to stake new tokens to.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to stake.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To stake new tokens for an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p><p>If staking for a delegator, <b>delegatorID</b> should be the delegator ID you are staking for.</p></div></div>
<p>The amount may be any number of tokens up to the sum of an accounts locked and unlocked FLOW.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="re-stake-unstaked-tokens">Re-stake Unstaked Tokens<a href="#re-stake-unstaked-tokens" class="hash-link" aria-label="Direct link to Re-stake Unstaked Tokens" title="Direct link to Re-stake Unstaked Tokens">​</a></h3>
<p>After tokens become unstaked, the owner of a Staking Collection can choose
to re-stake the unstaked tokens to the same Node or Delegator.</p>
<p>The owner of a Staking Collection can use the <strong>Stake Unstaked Tokens</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.08</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to stake the unstaked tokens to.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to restake.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To stake unstaked tokens for an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p><p>If staking for a delegator, <b>delegatorID</b> should be the delegator ID you are staking for.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="re-stake-rewarded-tokens">Re-stake Rewarded Tokens<a href="#re-stake-rewarded-tokens" class="hash-link" aria-label="Direct link to Re-stake Rewarded Tokens" title="Direct link to Re-stake Rewarded Tokens">​</a></h3>
<p>After earning rewards from staking, the owner of a Staking Collection
can choose to re-stake the rewarded tokens to the same node or delegator.</p>
<p>The owner of a Staking Collection can use the <strong>Stake Unstaked Tokens</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.07</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to stake the rewarded tokens to.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to restake.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To stake rewarded tokens for an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-to-unstake-tokens-at-the-end-of-the-epoch">Request to Unstake Tokens at the end of the Epoch<a href="#request-to-unstake-tokens-at-the-end-of-the-epoch" class="hash-link" aria-label="Direct link to Request to Unstake Tokens at the end of the Epoch" title="Direct link to Request to Unstake Tokens at the end of the Epoch">​</a></h3>
<p>The owner of a Staking Collection can submit a request to unstake their tokens at any time for any Node or Delegator in their collection.</p>
<p>If the tokens aren&#x27;t staked yet, they will be uncommitted and available to withdraw.</p>
<p><em>Note: unstaked tokens will be held by the central staking contract until the end of the following epoch.</em>
<em>Once the tokens are released (unstaked), they can be claimed via the <a href="#withdraw-unstaked-tokens">Withdraw Unstaked Tokens</a> action below.</em></p>
<p>The owner of a Staking Collection can use the <strong>Unstake Tokens</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.05</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the chosen node.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to restake.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To unstake tokens from an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unstake-all-tokens">Unstake All Tokens<a href="#unstake-all-tokens" class="hash-link" aria-label="Direct link to Unstake All Tokens" title="Direct link to Unstake All Tokens">​</a></h3>
<p>The owner of a Staking Collection can use the <strong>Unstake All</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.09</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to unstake all tokens from.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="withdraw-unstaked-tokens">Withdraw Unstaked Tokens<a href="#withdraw-unstaked-tokens" class="hash-link" aria-label="Direct link to Withdraw Unstaked Tokens" title="Direct link to Withdraw Unstaked Tokens">​</a></h3>
<p>After tokens for an active Node or Delegator become unstaked,
the ownder of Staking Collection can withdraw them from the central staking contract.</p>
<p>The owner of a Staking Collection can use the <strong>Withdraw Unstaked Tokens</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.11</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to withdraw the unstaked tokens from.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to withdraw.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To withdraw unstaked tokens from an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="withdraw-rewarded-tokens">Withdraw Rewarded Tokens<a href="#withdraw-rewarded-tokens" class="hash-link" aria-label="Direct link to Withdraw Rewarded Tokens" title="Direct link to Withdraw Rewarded Tokens">​</a></h3>
<p>After earning rewards from staking, the token holder can withdraw them from the central staking contract.</p>
<p>The owner of a Staking Collection can use the <strong>Withdraw Rewarded Tokens</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.10</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to withdraw the rewarded tokens from.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr><tr><td><strong>amount</strong></td><td><code>UFix64</code></td><td>The number of FLOW tokens to withdraw.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To withdraw rewarded tokens from an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="staking-collection-modification">Staking Collection Modification<a href="#staking-collection-modification" class="hash-link" aria-label="Direct link to Staking Collection Modification" title="Direct link to Staking Collection Modification">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="close-a-node-or-delegator">Close a Node or Delegator<a href="#close-a-node-or-delegator" class="hash-link" aria-label="Direct link to Close a Node or Delegator" title="Direct link to Close a Node or Delegator">​</a></h3>
<p>Once a Node or Delegator has no tokens staked, comitted or in an unstaking state, it is eligible to be closed.</p>
<p>Closing a Node or Delegator first returns any unstaked or rewarded tokens
to the account for which the Staking Collection is stored in.
It then destroys the NodeStaker or NodeDelegator object from within the Staking Collection.</p>
<p><em>Note: Once a Node or Delegator has been closed, it cannot be accessed again,</em>
<em>and no staking or delegation actions can be futher preformed on it.</em></p>
<p>The owner of a Staking Collection can use the <strong>Close Stake</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.12</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to close.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td><code>nil</code> if staking for a node. If staking for a delegator, the delegator ID.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To close an active node, leave the <b>delegatorID</b> arguement as <b>nil</b>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-a-node">Transfer a Node<a href="#transfer-a-node" class="hash-link" aria-label="Direct link to Transfer a Node" title="Direct link to Transfer a Node">​</a></h3>
<p>A user may transfer an existing Node to another another account&#x27;s Staking Collection.</p>
<p>The account to transfer the Node to must have a valid Staking Collection set up.</p>
<p>Transferring a Node will remove it from the authorizer&#x27;s Staking Collection
and deposit it to the receiver&#x27;s Staking Collection.</p>
<p><em>Note: Once a Node or Delegator has been transferred, it cannot be accessed again by the sender.</em>
<em>As well, all staked tokens will be considered staked by the receiver&#x27;s Staking Collection.</em></p>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_vXIg"><p>Transferring a Node will result in loss of custody of any Staked tokens for the sender.</p></div></div>
<p>The owner of a Staking Collection can use the <strong>Transfer Node</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.13</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to transfer.</td></tr><tr><td><strong>to</strong></td><td><code>Address</code></td><td>The address of the account which contains the Staking Collection to transfer the Node to.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-a-delegator">Transfer a Delegator<a href="#transfer-a-delegator" class="hash-link" aria-label="Direct link to Transfer a Delegator" title="Direct link to Transfer a Delegator">​</a></h3>
<p>A user may transfer an existing Delegator to another another account&#x27;s Staking Collection.</p>
<p>The account to transfer the Delegator to must have a valid Staking Collection set up.</p>
<p>Transferring a Delegator will remove it from the authorizer&#x27;s Staking Collection
and deposit it to the receiver&#x27;s Staking Collection.</p>
<p><em>Note: Once a Node or Delegator has been transferred, it cannot be accessed again by the sender.</em>
<em>As well, all staked tokens will be considered staked by the receiver&#x27;s Staking Collection.</em></p>
<div class="theme-admonition theme-admonition-warning alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_vXIg"><p>Transferring a Delegator will result in loss of custody of any Staked tokens for the sender.</p></div></div>
<p>The owner of a Staking Collection can use the <strong>Transfer Delegator</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.14</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the delegator to transfer.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>UInt32</code></td><td>The delegatorID of the delegator to transfer.</td></tr><tr><td><strong>to</strong></td><td><code>Address</code></td><td>The address of the account which contains the Staking Collection to transfer the Delegator to.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-a-nodes-networking-address">Update A Node&#x27;s Networking Address<a href="#update-a-nodes-networking-address" class="hash-link" aria-label="Direct link to Update A Node&#x27;s Networking Address" title="Direct link to Update A Node&#x27;s Networking Address">​</a></h3>
<p>A user may update their node&#x27;s networking address if it has become inconsistent with the protocol state.</p>
<p>This operation can only be performed in the staking auction phase of an epoch.</p>
<p><em>Note: Currently, if a node updates its networking address and the new address does not match</em>
<em>what is stored in the protocol state for the node, the node will not be able to participate in the upcoming epoch</em>
<em>Only update your networking address if you have already confirmed with the Flow team that you can.</em>
<em>This restriction will be removed once fully automated epochs are completely implemented</em></p>
<p>The owner of a Staking Collection can use the <strong>Update Networking Address</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.22</a>)
transaction with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to update.</td></tr><tr><td><strong>newAddress</strong></td><td><code>String</code></td><td>The new networking address</td></tr></tbody></table>
<h1>Staking Collection Scripts</h1>
<p>These scripts allow anyone to query information about an account&#x27;s staking collection</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-node-info">Get All Node Info<a href="#get-all-node-info" class="hash-link" aria-label="Direct link to Get All Node Info" title="Direct link to Get All Node Info">​</a></h3>
<p>To return an array of structs representing the information associated with each node managed by an account&#x27;s Staking Collection, anyone
can use the <strong>Get All Node Info</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.15</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns an array of <code>FlowIDTableStaking.NodeInfo</code> <a href="https://github.com/onflow/flow-core-contracts/blob/master/contracts/FlowIDTableStaking.cdc#L264" target="_blank" rel="noopener noreferrer">structs</a>
representing the nodes managed by an accounts Staking Collection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-delegator-info">Get All Delegator Info<a href="#get-all-delegator-info" class="hash-link" aria-label="Direct link to Get All Delegator Info" title="Direct link to Get All Delegator Info">​</a></h3>
<p>To return an array of structs representing the information associated with each delegator managed by an account&#x27;s Staking Collection, anyone
can use the <strong>Get All Delegator Info</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.16</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns an array of <code>FlowIDTableStaking.DelegatorInfo</code> <a href="https://github.com/onflow/flow-core-contracts/blob/master/contracts/FlowIDTableStaking.cdc#L264" target="_blank" rel="noopener noreferrer">structs</a>
representing the delegators managed by an accounts Staking Collection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-node-ids">Get All Node Ids<a href="#get-all-node-ids" class="hash-link" aria-label="Direct link to Get All Node Ids" title="Direct link to Get All Node Ids">​</a></h3>
<p>To return an array of Strings representing the ids associated with each node managed by an account&#x27;s Staking Collection, anyone
can use the <strong>Get All Node Ids</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.17</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns an array of <code>String</code>
representing each id of each node managed by an accounts Staking Collection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-delegator-ids">Get All Delegator Ids<a href="#get-all-delegator-ids" class="hash-link" aria-label="Direct link to Get All Delegator Ids" title="Direct link to Get All Delegator Ids">​</a></h3>
<p>To return an array of structs representing the delegator ids associated with each delegation managed by an account&#x27;s Staking Collection, anyone
can use the <strong>Get All Delegator Ids</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.16</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns an array of <code>FlowStakingCollection.DelegatorIDs</code> <a href="https://github.com/onflow/flow-core-contracts/blob/master/contracts/FlowStakingCollection.cdc#L29" target="_blank" rel="noopener noreferrer">structs</a>
representing the delegator Ids of each delegator managed by an accounts Staking Collection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-locked-tokens-used">Get Locked Tokens Used<a href="#get-locked-tokens-used" class="hash-link" aria-label="Direct link to Get Locked Tokens Used" title="Direct link to Get Locked Tokens Used">​</a></h3>
<p>To query how many Locked FLOW tokens an account has staked using their Staking Collection, anyone
can use the <strong>Get Locked Tokens Used</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.19</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns a <code>UFix64</code> representing the number of Locked FLOW tokens staked using an accounts Staking Collection.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Note: This number does not include Locked FLOW tokens staked not through an accounts Staking Collection.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-unlocked-tokens-used">Get Unlocked Tokens Used<a href="#get-unlocked-tokens-used" class="hash-link" aria-label="Direct link to Get Unlocked Tokens Used" title="Direct link to Get Unlocked Tokens Used">​</a></h3>
<p>To query how many Unlocked FLOW tokens an account has staked using their Staking Collection, anyone
can use the <strong>Get Unlocked Tokens Used</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.20</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns a <code>UFix64</code> representing the number of Unlocked FLOW tokens staked using an accounts Staking Collection.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Note: This number does not include Unlocked FLOW tokens staked not through an accounts Staking Collection.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-does-stake-exist">Get Does Stake Exist<a href="#get-does-stake-exist" class="hash-link" aria-label="Direct link to Get Does Stake Exist" title="Direct link to Get Does Stake Exist">​</a></h3>
<p>To query if a Node or Delegator is managed by an accounts Staking Collection, anyone
can use the <strong>Get Does Node Exist</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.21</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr><tr><td><strong>nodeID</strong></td><td><code>String</code></td><td>The nodeID of the node to check, or the nodeID of the node delegating to to check.</td></tr><tr><td><strong>delegatorID</strong></td><td><code>Optional(UInt32)</code></td><td>The delegatorID of the delegator to check, if checking for a delegator.</td></tr></tbody></table>
<p>This script returns a <code>Bool</code>.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>To query if a Node is managed by an accounts Staking Collection, leave the <b>delegatorID</b> arguement as <b>nil</b>.
Otherwise, fill it in with the <b>delegatorID</b> of the Delegator.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-machine-account-info">Get Machine Account Info<a href="#get-machine-account-info" class="hash-link" aria-label="Direct link to Get Machine Account Info" title="Direct link to Get Machine Account Info">​</a></h3>
<p>To query the machine account information for an account&#x27;s staking collection, anyone
can use the <strong>Get Machine Account Info</strong> (<a href="/docs/concepts/core-contracts/staking-collection">SCO.21</a>) script with the following arguments:</p>
<table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>address</strong></td><td><code>Addresss</code></td><td>The Address of the account holding the Staking Collection to query from</td></tr></tbody></table>
<p>This script returns a <code>{String: FlowStakingCollection.MachineAccountInfo}</code>,
which is a mapping of nodeIDs to the <code>FlowStakingCollection.MachineAccountInfo</code> struct.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/onflow/docs/tree/main/docs/concepts/staking/14-staking-collection.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-31T17:44:21.000Z">Aug 31, 2023</time></b> by <b>Gregor G</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/concepts/staking/staking-options"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Options for Building Staking Integrations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts/staking/staking-guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Basic Staking with FLOW</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#staker-object-fields" class="table-of-contents__link toc-highlight">Staker Object Fields</a></li><li><a href="#vault-capability-fields" class="table-of-contents__link toc-highlight">Vault Capability Fields</a></li><li><a href="#machine-account-support" class="table-of-contents__link toc-highlight">Machine Account Support</a></li><li><a href="#staking-collection-public-getter-methods" class="table-of-contents__link toc-highlight">Staking Collection Public Getter Methods</a></li><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a><ul><li><a href="#setup-a-staking-collection" class="table-of-contents__link toc-highlight">Setup a Staking Collection</a></li><li><a href="#create-a-machine-account-for-an-existing-node" class="table-of-contents__link toc-highlight">Create a Machine Account for an existing Node</a></li></ul></li><li><a href="#register-stakers" class="table-of-contents__link toc-highlight">Register Stakers</a><ul><li><a href="#register-a-new-staked-node" class="table-of-contents__link toc-highlight">Register a New Staked Node</a></li><li><a href="#register-a-new-staked-delegator" class="table-of-contents__link toc-highlight">Register a New Staked Delegator</a></li></ul></li><li><a href="#staking-operations" class="table-of-contents__link toc-highlight">Staking Operations</a><ul><li><a href="#stake-new-tokens" class="table-of-contents__link toc-highlight">Stake New Tokens</a></li><li><a href="#re-stake-unstaked-tokens" class="table-of-contents__link toc-highlight">Re-stake Unstaked Tokens</a></li><li><a href="#re-stake-rewarded-tokens" class="table-of-contents__link toc-highlight">Re-stake Rewarded Tokens</a></li><li><a href="#request-to-unstake-tokens-at-the-end-of-the-epoch" class="table-of-contents__link toc-highlight">Request to Unstake Tokens at the end of the Epoch</a></li><li><a href="#unstake-all-tokens" class="table-of-contents__link toc-highlight">Unstake All Tokens</a></li><li><a href="#withdraw-unstaked-tokens" class="table-of-contents__link toc-highlight">Withdraw Unstaked Tokens</a></li><li><a href="#withdraw-rewarded-tokens" class="table-of-contents__link toc-highlight">Withdraw Rewarded Tokens</a></li></ul></li><li><a href="#staking-collection-modification" class="table-of-contents__link toc-highlight">Staking Collection Modification</a><ul><li><a href="#close-a-node-or-delegator" class="table-of-contents__link toc-highlight">Close a Node or Delegator</a></li><li><a href="#transfer-a-node" class="table-of-contents__link toc-highlight">Transfer a Node</a></li><li><a href="#transfer-a-delegator" class="table-of-contents__link toc-highlight">Transfer a Delegator</a></li><li><a href="#update-a-nodes-networking-address" class="table-of-contents__link toc-highlight">Update A Node&#39;s Networking Address</a></li><li><a href="#get-all-node-info" class="table-of-contents__link toc-highlight">Get All Node Info</a></li><li><a href="#get-all-delegator-info" class="table-of-contents__link toc-highlight">Get All Delegator Info</a></li><li><a href="#get-all-node-ids" class="table-of-contents__link toc-highlight">Get All Node Ids</a></li><li><a href="#get-all-delegator-ids" class="table-of-contents__link toc-highlight">Get All Delegator Ids</a></li><li><a href="#get-locked-tokens-used" class="table-of-contents__link toc-highlight">Get Locked Tokens Used</a></li><li><a href="#get-unlocked-tokens-used" class="table-of-contents__link toc-highlight">Get Unlocked Tokens Used</a></li><li><a href="#get-does-stake-exist" class="table-of-contents__link toc-highlight">Get Does Stake Exist</a></li><li><a href="#get-machine-account-info" class="table-of-contents__link toc-highlight">Get Machine Account Info</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools">SDK&#x27;s &amp; Tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn">Learning Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/intro">Cadence</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/mobile">Mobile</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/clients/fcl-js">FCL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/flow-js-testing">JS Testing Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/flow-cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/emulator">Emulator</a></li><li class="footer__item"><a href="https://github.com/onflow/fcl-dev-wallet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Wallet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/tools/toolchains/vscode-extension">VS Code Extension</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community">Ecosystem</a></li><li class="footer__item"><a href="https://port.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Port<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/onflow/developer-grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/flow-responsible-disclosure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Responsible Disclosure<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flowverse.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowverse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald Academy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://floats.city/" target="_blank" rel="noopener noreferrer" class="footer__link-item">FLOATs (Attendance NFTs)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Start Building</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flow Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/kitty-items">Kitty Items</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cadence/tutorial/first-steps">Cadence Tutorials</a></li><li class="footer__item"><a href="https://open-cadence.onflow.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cadence Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/core-contracts">Core Contracts &amp; Standards</a></li><li class="footer__item"><a href="https://academy.ecdao.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Emerald DAO Bootcamp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Network Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Mainnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet.flowscan.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flowscan Testnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/past-sporks">Past Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/upcoming-sporks">Upcoming Sporks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation">Node Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/nodes/node-operation/spork">Spork Information</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/onflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://onflow.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OnFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://flow.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Flow, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.eb536800.js"></script>
<script src="/docs/assets/js/main.7281d816.js"></script>
</body>
</html>